import{j as e,b9 as I,y as L,z as O,B as r,_ as V,T as t,n as D,bq as y,br as j,E as R,bs as f,bt as g,bu as H,X as o,Y as c,D as Y,d as b,H as P,x as _,a4 as q,s as N}from"./mui-vendor-C1HUv1lu.js";import{r as d}from"./react-vendor-BW_9WhSV.js";import{a as E}from"./admin-features-DSNbd77k.js";const Q=()=>{const[a,x]=d.useState({emailNotifications:!0,newVacancyAlerts:!0,newPlayerAlerts:!0,trialInvitations:!0,weeklyDigest:!0,instantAlerts:!1,preferredLeagues:[],ageGroups:[],positions:[],maxDistance:50}),[z,v]=d.useState(!0),[m,k]=d.useState(!1),[w,C]=d.useState(""),[A,u]=d.useState(""),F=["Premier League","Championship","League One","League Two","National League","Sunday League"],W=["U8","U10","U12","U14","U16","U18","U21","Senior","Veterans"],B=["Goalkeeper","Defender","Midfielder","Forward","Winger","Striker"];d.useEffect(()=>{S()},[]);const S=async()=>{try{v(!0);const s=await E.get("/alerts/preferences");x(s.data.preferences)}catch(s){u("Failed to load alert preferences"),console.error("Error loading preferences:",s)}finally{v(!1)}},U=async()=>{try{k(!0),C(""),u(""),await E.put("/alerts/preferences",a),C("Alert preferences saved successfully!")}catch(s){u(s.response?.data?.error||"Failed to save preferences")}finally{k(!1)}},n=s=>i=>{x(l=>({...l,[s]:i.target.checked}))},p=(s,i)=>{x(l=>{const h=l[s],G=h.includes(i)?h.filter(M=>M!==i):[...h,i];return{...l,[s]:G}})},T=(s,i)=>{x(l=>({...l,maxDistance:i}))};return z?e.jsx(I,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh"},children:e.jsx(L,{})}):e.jsx(I,{maxWidth:"md",sx:{py:3},children:e.jsxs(O,{elevation:3,sx:{p:3},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(V,{sx:{mr:2,color:"primary.main"}}),e.jsx(t,{variant:"h4",component:"h1",children:"Alert Preferences"})]}),e.jsx(t,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Customize your notification settings to stay informed about relevant opportunities and activities in the grassroots football community."}),w&&e.jsx(D,{severity:"success",sx:{mb:3},children:w}),A&&e.jsx(D,{severity:"error",sx:{mb:3},children:A}),e.jsxs(y,{defaultExpanded:!0,children:[e.jsx(j,{expandIcon:e.jsx(f,{}),children:e.jsxs(r,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(R,{sx:{mr:1}}),e.jsx(t,{variant:"h6",children:"Email Notifications"})]})}),e.jsx(g,{children:e.jsxs(H,{children:[e.jsx(o,{control:e.jsx(c,{checked:a.emailNotifications,onChange:n("emailNotifications"),color:"primary"}),label:"Enable email notifications"}),e.jsxs(r,{sx:{ml:4,mt:1},children:[e.jsx(o,{control:e.jsx(c,{checked:a.newVacancyAlerts,onChange:n("newVacancyAlerts"),disabled:!a.emailNotifications,size:"small"}),label:"New team vacancy alerts"}),e.jsx(o,{control:e.jsx(c,{checked:a.newPlayerAlerts,onChange:n("newPlayerAlerts"),disabled:!a.emailNotifications,size:"small"}),label:"New player availability alerts"}),e.jsx(o,{control:e.jsx(c,{checked:a.trialInvitations,onChange:n("trialInvitations"),disabled:!a.emailNotifications,size:"small"}),label:"Trial invitations"}),e.jsx(o,{control:e.jsx(c,{checked:a.weeklyDigest,onChange:n("weeklyDigest"),disabled:!a.emailNotifications,size:"small"}),label:"Weekly activity digest"}),e.jsx(o,{control:e.jsx(c,{checked:a.instantAlerts,onChange:n("instantAlerts"),disabled:!a.emailNotifications,size:"small"}),label:"Instant alerts (immediate notifications)"})]})]})})]}),e.jsxs(y,{children:[e.jsx(j,{expandIcon:e.jsx(f,{}),children:e.jsxs(r,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Y,{sx:{mr:1}}),e.jsx(t,{variant:"h6",children:"Alert Filters"})]})}),e.jsxs(g,{children:[e.jsxs(r,{sx:{mb:3},children:[e.jsx(t,{variant:"subtitle1",gutterBottom:!0,children:"Preferred Leagues"}),e.jsx(t,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Only receive alerts for these leagues (leave empty for all leagues)"}),e.jsx(r,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:F.map(s=>e.jsx(b,{label:s,clickable:!0,color:a.preferredLeagues.includes(s)?"primary":"default",onClick:()=>p("preferredLeagues",s),variant:a.preferredLeagues.includes(s)?"filled":"outlined"},s))})]}),e.jsx(P,{sx:{my:3}}),e.jsxs(r,{sx:{mb:3},children:[e.jsx(t,{variant:"subtitle1",gutterBottom:!0,children:"Age Groups"}),e.jsx(t,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Filter alerts by relevant age groups"}),e.jsx(r,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:W.map(s=>e.jsx(b,{label:s,clickable:!0,color:a.ageGroups.includes(s)?"primary":"default",onClick:()=>p("ageGroups",s),variant:a.ageGroups.includes(s)?"filled":"outlined"},s))})]}),e.jsx(P,{sx:{my:3}}),e.jsxs(r,{sx:{mb:3},children:[e.jsx(t,{variant:"subtitle1",gutterBottom:!0,children:"Positions"}),e.jsx(t,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Filter alerts by specific playing positions"}),e.jsx(r,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:B.map(s=>e.jsx(b,{label:s,clickable:!0,color:a.positions.includes(s)?"primary":"default",onClick:()=>p("positions",s),variant:a.positions.includes(s)?"filled":"outlined"},s))})]})]})]}),e.jsxs(y,{children:[e.jsx(j,{expandIcon:e.jsx(f,{}),children:e.jsxs(r,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(_,{sx:{mr:1}}),e.jsx(t,{variant:"h6",children:"Location Settings"})]})}),e.jsx(g,{children:e.jsxs(r,{sx:{mb:3},children:[e.jsxs(t,{variant:"subtitle1",gutterBottom:!0,children:["Maximum Distance: ",a.maxDistance," km"]}),e.jsx(t,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Only show opportunities within this distance from your location"}),e.jsx(r,{sx:{px:2},children:e.jsx(q,{value:a.maxDistance,onChange:T,min:5,max:200,step:5,marks:[{value:5,label:"5km"},{value:50,label:"50km"},{value:100,label:"100km"},{value:200,label:"200km"}],valueLabelDisplay:"auto",color:"primary"})})]})})]}),e.jsxs(r,{sx:{mt:4,display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:2},children:[e.jsx(N,{variant:"outlined",onClick:S,disabled:m,children:"Reset to Saved"}),e.jsx(N,{variant:"contained",onClick:U,disabled:m,startIcon:m?e.jsx(L,{size:20}):null,sx:{minWidth:120},children:m?"Saving...":"Save Preferences"})]}),e.jsx(r,{sx:{mt:4,p:2,bgcolor:"grey.50",borderRadius:1},children:e.jsxs(t,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"ðŸ’¡ Tip:"})," Set up your alert preferences to receive personalized notifications about relevant opportunities. You can always adjust these settings later. Weekly digests are sent every Sunday morning to keep you updated on platform activity."]})})]})})};export{Q as default};
