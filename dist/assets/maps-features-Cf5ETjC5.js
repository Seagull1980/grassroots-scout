const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/admin-features-DSNbd77k.js","assets/mui-vendor-C1HUv1lu.js","assets/react-vendor-BW_9WhSV.js"])))=>i.map(i=>d[i]);
import{j as e,n as ct,B as h,y as Tt,z as ee,G as k,s as f,D as Ot,H as B,J as te,K as Bt,N as Wt,O as et,Q as Nt,U as Ut,X as Vt,Y as tt,Z as Ht,_ as Yt,E as st,T as c,$ as qt,a0 as ue,a1 as Jt,a2 as Kt,a3 as Zt,i as se,a4 as at,C as $e,a as _e,a5 as nt,d as R,a6 as ge,a7 as me,a8 as he,a9 as pe,M as Qt,l as Xt,aa as es,I as xe,ab as ot,m as ts,ac as rt,ad as ss,V as as,ae as ns}from"./mui-vendor-C1HUv1lu.js";import{r as o,a as ae,u as os}from"./react-vendor-BW_9WhSV.js";import{i as Be}from"./maps-vendor-BfPVeWMj.js";import{u as rs,e as fe,g as it,b as is}from"./admin-features-DSNbd77k.js";const O={apiKey:"AIzaSyCPOJ5YQDzy8pLMZGsqCxhQb_6VGd9Nxwk",libraries:["places","geometry","marker"],version:"weekly",defaultCenter:{lat:51.5074,lng:-.1278},defaultZoom:10,searchRadius:500,mapId:"GRASSROOTS_HUB_MAP",mapOptions:{disableDefaultUI:!1,zoomControl:!0,streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!0,gestureHandling:"greedy"}};""+btoa(`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#2196F3" width="24" height="24">
        <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
      </svg>
    `),""+btoa(`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#4CAF50" width="24" height="24">
        <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
      </svg>
    `),""+btoa(`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#FF5722" width="24" height="24">
        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
      </svg>
    `),""+btoa(`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#FF9800" width="24" height="24">
        <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
      </svg>
    `);const ls=r=>{switch(r){case Be.Status.LOADING:return e.jsx(h,{display:"flex",justifyContent:"center",alignItems:"center",height:"400px",children:e.jsx(Tt,{})});case Be.Status.FAILURE:return e.jsx(ct,{severity:"error",sx:{m:2},children:e.jsxs(h,{children:[e.jsx("strong",{children:"Google Maps Loading Failed"}),e.jsx("br",{}),e.jsx("br",{}),"This is likely due to a billing or API configuration issue. To resolve:",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"1. Enable Billing:"}),e.jsx("br",{}),"â€¢ Go to Google Cloud Console: ",e.jsx("a",{href:"https://console.cloud.google.com/",target:"_blank",rel:"noopener noreferrer",children:"console.cloud.google.com"}),e.jsx("br",{}),"â€¢ Navigate to Billing and enable billing for your project",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"2. Enable Required APIs:"}),e.jsx("br",{}),"â€¢ Maps JavaScript API",e.jsx("br",{}),"â€¢ Places API",e.jsx("br",{}),"â€¢ Geocoding API",e.jsx("br",{}),"â€¢ Geometry API",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"3. Check API Key Restrictions:"}),e.jsx("br",{}),"â€¢ Ensure your API key is not restricted to specific domains",e.jsx("br",{}),"â€¢ Or add localhost and your domain to allowed referrers"]})});default:return e.jsx("div",{children:"Loading map..."})}},cs=({children:r})=>{const i=O.apiKey;return e.jsx(Be.Wrapper,{apiKey:i,render:ls,libraries:O.libraries,version:O.version,children:r})},ds=({center:r,zoom:i,children:p,onMapLoad:g,style:S={height:"400px",width:"100%"}})=>{const j=o.useRef(null),[m,x]=o.useState(),C=o.useCallback(()=>{if(j.current&&!m){const v=new google.maps.Map(j.current,{center:r,zoom:i,mapId:O.mapId,...O.mapOptions});x(v),g?.(v)}},[r,i,m,g]);return ae.useEffect(()=>{C()},[C]),ae.useEffect(()=>{m&&(m.setCenter(r),m.setZoom(i))},[m,r,i]),e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:j,style:S}),ae.Children.map(p,v=>ae.isValidElement(v)?ae.cloneElement(v,{map:m}):v)]})},us=(r,i)=>{const g=ye(i.lat-r.lat),S=ye(i.lng-r.lng),j=Math.sin(g/2)*Math.sin(g/2)+Math.cos(ye(r.lat))*Math.cos(ye(i.lat))*Math.sin(S/2)*Math.sin(S/2);return 6371*(2*Math.atan2(Math.sqrt(j),Math.sqrt(1-j)))},ye=r=>r*Math.PI/180,bs=async r=>new Promise(i=>{if(!window.google){i(null);return}new google.maps.Geocoder().geocode({address:r},(g,S)=>{if(S==="OK"&&g&&g[0]){const j=g[0],m={address:j.formatted_address,latitude:j.geometry.location.lat(),longitude:j.geometry.location.lng(),placeId:j.place_id};i(m)}else i(null)})}),gs=()=>new Promise(r=>{if(!navigator.geolocation){console.warn("Geolocation is not supported by this browser"),r({error:"Geolocation not supported",userMessage:"Geolocation is not supported by your browser. Please click on the map to set your location."});return}navigator.geolocation.getCurrentPosition(i=>{console.log("Location obtained successfully:",i.coords),r({lat:i.coords.latitude,lng:i.coords.longitude})},i=>{let p="Unknown error",g="warn",S="Could not get your location. Please try again.";switch(i.code){case 1:p="Location access denied by user",S="Location access denied. Please allow location permissions and try again.",g="info";break;case 2:p="Location information unavailable (GPS/network issue)",S="Location unavailable. Please check your GPS/network connection and try again.";break;case 3:p="Location request timed out after 15 seconds",S="Location request timed out. Please try again or click on the map manually.";break;default:p=`Unknown geolocation error (code: ${i.code})`,S="Location error occurred. Please try clicking on the map manually."}g==="info"?console.info("Geolocation:",p,{code:i.code,message:i.message}):console.warn("Geolocation failed:",p,{code:i.code,message:i.message,error:i}),r({error:p,userMessage:S})},{timeout:15e3,enableHighAccuracy:!0,maximumAge:6e4})}),Te=r=>r<1?`${Math.round(r*1e3)}m`:`${r.toFixed(1)}km`,ms="modulepreload",hs=function(r){return"/"+r},lt={},ps=function(i,p,g){let S=Promise.resolve();if(p&&p.length>0){document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),x=m?.nonce||m?.getAttribute("nonce");S=Promise.allSettled(p.map(C=>{if(C=hs(C),C in lt)return;lt[C]=!0;const v=C.endsWith(".css"),A=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${C}"]${A}`))return;const d=document.createElement("link");if(d.rel=v?"stylesheet":ms,v||(d.as="script"),d.crossOrigin="",d.href=C,x&&d.setAttribute("nonce",x),document.head.appendChild(d),v)return new Promise((P,W)=>{d.addEventListener("load",P),d.addEventListener("error",()=>W(new Error(`Unable to preload CSS for ${C}`)))})}))}function j(m){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=m,window.dispatchEvent(x),!x.defaultPrevented)throw m}return S.then(m=>{for(const x of m||[])x.status==="rejected"&&j(x.reason);return i().catch(j)})},xs=({position:r,map:i,title:p,icon:g,onClick:S,children:j})=>{const[m,x]=o.useState(),[C,v]=o.useState();return o.useEffect(()=>{if(!i)return;let A;if(window.google?.maps?.marker?.AdvancedMarkerElement)try{let d;typeof g=="string"&&g.includes("red-dot")?d=new google.maps.marker.PinElement({background:"#EA4335",borderColor:"#C5221F",glyphColor:"#FFFFFF"}):typeof g=="string"&&g.includes("blue-dot")&&(d=new google.maps.marker.PinElement({background:"#4285F4",borderColor:"#1A73E8",glyphColor:"#FFFFFF"})),A=new google.maps.marker.AdvancedMarkerElement({position:r,map:i,title:p,content:d?.element}),console.log("AdvancedMarkerElement created:",{position:r,title:p})}catch(d){console.warn("Failed to create AdvancedMarkerElement, falling back to legacy marker:",d),A=new google.maps.Marker({position:r,map:i,title:p,icon:g}),console.log("Legacy Marker created:",{position:r,title:p})}else A=new google.maps.Marker({position:r,map:i,title:p,icon:g}),console.log("Legacy Marker created (API not available):",{position:r,title:p});if(x(A),j){const d=new google.maps.InfoWindow;v(d)}return()=>{A&&(A instanceof google.maps.Marker?A.setMap(null):window.google?.maps?.marker?.AdvancedMarkerElement&&A instanceof google.maps.marker.AdvancedMarkerElement&&(A.map=null))}},[i,r,p,g,j]),o.useEffect(()=>{if(!m)return;const A=()=>{if(console.log("Marker clicked!",{title:p,position:r}),S?.(),C&&j){const P=document.createElement("div");C.setContent(P),m instanceof google.maps.Marker?C.open(i,m):(C.setPosition(r),C.open(i))}};let d;return(m instanceof google.maps.Marker||window.google?.maps?.marker?.AdvancedMarkerElement&&m instanceof google.maps.marker.AdvancedMarkerElement)&&(d=m.addListener("click",A)),()=>{d&&google.maps.event.removeListener(d)}},[m,S,C,j,i,r]),null},Oe="grassroots-hub-saved-regions",ws=({searchType:r})=>{const{user:i}=rs(),p=os(),[g,S]=o.useState(O.defaultCenter),[j,m]=o.useState(O.defaultZoom),[x,C]=o.useState(O.searchRadius),[v,A]=o.useState([]),[d,P]=o.useState(null),[,W]=o.useState(!1),[D,dt]=o.useState(),[Y,We]=o.useState(null),[F,q]=o.useState({isActive:!1,mode:"view",currentPolygon:null}),[J,ve]=o.useState(!1),[G,ne]=o.useState([]),[je,oe]=o.useState([]),[N,be]=o.useState(null),[b,we]=o.useState(null),[I,Se]=o.useState(!1),[U,Ce]=o.useState([]),[ut,re]=o.useState(!1),[K,Ne]=o.useState(""),[gt,ke]=o.useState(!1),[mt,ht]=o.useState(null),[Le,y]=o.useState({open:!1,message:"",severity:"success"}),[L,Ae]=o.useState(new Set),[z,Ue]=o.useState(!1),[pt,ie]=o.useState(!1),[$,Ve]=o.useState({subject:"",message:""}),[w,xt]=o.useState(!1),[le,Ie]=o.useState(!1),[Me,He]=o.useState(null),[Ee,ce]=o.useState(!1),[Z,ft]=o.useState([]),[yt,Q]=o.useState(!1),[M,Pe]=o.useState(""),[E,De]=o.useState(""),[ze,vt]=o.useState(!1),[V,Ye]=o.useState("training"),jt=["County League","Regional League","Youth League","Premier Youth League","Championship Youth","Local League"],bt=["Under 6","Under 7","Under 8","Under 9","Under 10","Under 11","Under 12","Under 13","Under 14","Under 15","Under 16","Under 17","Under 18","Under 19","Under 20","Under 21","Senior","Veterans"];o.useEffect(()=>{const t=localStorage.getItem(Oe);if(t)try{const s=JSON.parse(t).map(n=>({...n,createdAt:new Date(n.createdAt),coordinates:n.coordinates.map(a=>new google.maps.LatLng(a.lat,a.lng))}));Ce(s)}catch(s){console.error("Error loading saved regions:",s)}},[]),o.useEffect(()=>{i&&de()},[i]),o.useEffect(()=>{const t=()=>{const s=navigator.userAgent||"",n=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(s),a=window.innerWidth<768;xt(n||a)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),o.useEffect(()=>{if(!w)return;const t=a=>{He(a.touches[0].clientY),ce(!1)},s=a=>{if(Me===null)return;const u=a.touches[0].clientY,l=Me-u;l>50&&!Ee?(ce(!0),Ie(!0)):l<-50&&!Ee&&(ce(!0),Ie(!1))},n=()=>{He(null),ce(!1)};return document.addEventListener("touchstart",t),document.addEventListener("touchmove",s),document.addEventListener("touchend",n),()=>{document.removeEventListener("touchstart",t),document.removeEventListener("touchmove",s),document.removeEventListener("touchend",n)}},[Me,Ee,w]);const Re=o.useCallback(()=>{if(!D||G.length<3)return;b&&b.setMap(null),je.forEach(s=>{"setMap"in s&&typeof s.setMap=="function"?s.setMap(null):google.maps.event.removeListener(s)}),oe([]),N&&(N.setMap(null),be(null));const t=new google.maps.Polygon({paths:G,strokeColor:"#2196F3",strokeOpacity:.8,strokeWeight:3,fillColor:"#2196F3",fillOpacity:.2,editable:!0,draggable:!0,map:D});we(t),q(s=>({...s,isActive:!1,mode:"edit",currentPolygon:t})),Se(!0),ve(!1),ne([]),Ze(t),H(t),y({open:!0,message:"Search area drawn! You can now save this region or edit it by dragging the corners.",severity:"success"})},[D,G,b,je]);o.useEffect(()=>{const t=s=>{J&&(s.key==="Enter"&&G.length>=3?(s.preventDefault(),Re()):s.key==="Escape"&&(s.preventDefault(),Qe()))};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[J,G,Re]);const de=async()=>{try{const t=await fe.getAll();ft(t.alerts)}catch(t){console.error("Error loading email alerts:",t)}},Fe=t=>{const s=new Set(L);s.has(t)?s.delete(t):s.add(t),Ae(s)},wt=()=>{const t=new Set(v.map((s,n)=>`${s.type}_${n}`));Ae(t)},qe=()=>{Ae(new Set),Ue(!1)},Je=()=>v.filter((t,s)=>L.has(`${t.type}_${s}`)),St=async()=>{const t=Je(),s=t.map(async n=>{const a=n.item;return n.type==="vacancy"?fetch("/api/messages",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({recipientId:a.postedBy,subject:$.subject,message:$.message,relatedVacancyId:a.id,messageType:"vacancy_interest"})}):fetch("/api/messages",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({recipientId:a.postedBy,subject:$.subject,message:$.message,relatedPlayerAvailabilityId:a.id,messageType:"player_inquiry"})})});try{await Promise.all(s),y({open:!0,message:`Successfully contacted ${t.length} ${t.length===1?"person":"people"}!`,severity:"success"}),ie(!1),qe()}catch(n){console.error("Bulk contact error:",n),y({open:!0,message:"Some messages failed to send. Please try again.",severity:"error"})}},Ke=async t=>{if(!i){y({open:!0,message:"Please log in to create email alerts",severity:"error"});return}try{const s={alertType:t};if(t==="new_match"){if(s.filters={league:M||void 0,ageGroup:E||void 0,radius:I?void 0:x,center:I?void 0:g},I&&b){const n=b.getPath(),a=[];for(let u=0;u<n.getLength();u++){const l=n.getAt(u);a.push({lat:l.lat(),lng:l.lng()})}s.searchRegion={name:`Search Area ${new Date().toLocaleDateString()}`,coordinates:a}}}else if(t==="saved_search"&&b){const n=b.getPath(),a=[];for(let u=0;u<n.getLength();u++){const l=n.getAt(u);a.push({lat:l.lat(),lng:l.lng()})}s.searchRegion={name:K||`Search Area ${new Date().toLocaleDateString()}`,coordinates:a},s.filters={league:M||void 0,ageGroup:E||void 0}}await fe.create(s),y({open:!0,message:"Email alert created successfully! You'll be notified of new matches.",severity:"success"}),de(),Q(!1)}catch(s){console.error("Error creating email alert:",s),y({open:!0,message:"Failed to create email alert. Please try again.",severity:"error"})}},Ct=async t=>{try{await fe.delete(t),y({open:!0,message:"Email alert deleted",severity:"success"}),de()}catch(s){console.error("Error deleting email alert:",s),y({open:!0,message:"Failed to delete email alert",severity:"error"})}},kt=async(t,s)=>{try{await fe.update(t,{isActive:s}),y({open:!0,message:`Email alert ${s?"enabled":"disabled"}`,severity:"success"}),de()}catch(n){console.error("Error updating email alert:",n),y({open:!0,message:"Failed to update email alert",severity:"error"})}},Lt=o.useCallback(t=>{dt(t);const s=l=>{if(J&&l.latLng){const T=[...G,l.latLng];ne(T);const _t=new google.maps.Marker({position:l.latLng,map:t,icon:{path:google.maps.SymbolPath.CIRCLE,scale:4,fillColor:"#2196F3",fillOpacity:1,strokeColor:"#1976D2",strokeWeight:2}});if(N&&N.setMap(null),T.length>1){const Ge=new google.maps.Polyline({path:T,strokeColor:"#2196F3",strokeWeight:2,strokeOpacity:.8,map:t});be(Ge)}oe(Ge=>[...Ge,_t])}},n=l=>{J&&G.length>=3&&Re()},a=t.addListener("click",s),u=t.addListener("dblclick",n);oe([a,u])},[J,G]),Ze=t=>{google.maps.event.addListener(t.getPath(),"set_at",()=>{H(t)}),google.maps.event.addListener(t.getPath(),"insert_at",()=>{H(t)}),google.maps.event.addListener(t,"dragend",()=>{H(t)})},At=()=>{if(!b||!K.trim())return;const t=b.getPath(),s=[];for(let l=0;l<t.getLength();l++)s.push(t.getAt(l));const n={id:Date.now().toString(),name:K.trim(),coordinates:s,createdAt:new Date,isVisible:!0},a=[...U,n];Ce(a);const u=a.map(l=>({...l,coordinates:l.coordinates.map(T=>({lat:T.lat(),lng:T.lng()}))}));localStorage.setItem(Oe,JSON.stringify(u)),re(!1),Ne(""),y({open:!0,message:`Search region "${n.name}" saved successfully!`,severity:"success"})},It=t=>{b&&b.setMap(null);const s=new google.maps.Polygon({paths:t.coordinates,strokeColor:"#2196F3",strokeOpacity:.8,strokeWeight:3,fillColor:"#2196F3",fillOpacity:.2,editable:!0,draggable:!0,map:D});we(s),Se(!0),q(a=>({...a,mode:"edit",currentPolygon:s})),Ze(s);const n=new google.maps.LatLngBounds;t.coordinates.forEach(a=>n.extend(a)),D?.fitBounds(n),H(s),ke(!1),y({open:!0,message:`Loaded search region "${t.name}"`,severity:"success"})},Mt=t=>{const s=U.filter(a=>a.id!==t);Ce(s);const n=s.map(a=>({...a,coordinates:a.coordinates.map(u=>({lat:u.lat(),lng:u.lng()}))}));localStorage.setItem(Oe,JSON.stringify(n)),y({open:!0,message:"Search region deleted",severity:"success"})},_=o.useCallback(async(t,s)=>{W(!0);try{const n=[];if(r==="vacancies"||r==="both")try{const{getTeamVacanciesWithLocationType:a}=await ps(async()=>{const{getTeamVacanciesWithLocationType:l}=await import("./admin-features-DSNbd77k.js").then(T=>T.q);return{getTeamVacanciesWithLocationType:l}},__vite__mapDeps([0,1,2])),u=await a({latitude:t.lat,longitude:t.lng,radius:s,locationType:V,hasVacancies:!0});u.trainingLocations&&u.trainingLocations.length>0&&u.trainingLocations.forEach(l=>{n.push({item:{id:l.id.toString(),title:l.teamName||l.title,description:l.description||"",league:l.league||"",ageGroup:l.ageGroup||"",position:l.position||"",location:l.location||"",contactInfo:l.contactEmail||"",status:"active",createdAt:l.date||new Date().toISOString(),firstName:"Coach",lastName:"Team",postedBy:"1",locationData:{latitude:l.latitude,longitude:l.longitude,address:l.locationData?.address||l.location,postcode:l.locationData?.postcode||""}},distance:l.distance,type:"vacancy"})})}catch(a){console.error("Error fetching team vacancies:",a)}(r==="availability"||r==="both")&&(await it()).forEach(u=>{if(u.locationData){if(M&&!u.preferredLeagues.includes(M)||E&&u.ageGroup!==E)return;const l=us(t,{lat:u.locationData.latitude,lng:u.locationData.longitude});l<=s&&n.push({item:u,distance:l,type:"availability"})}}),n.sort((a,u)=>(a.distance||0)-(u.distance||0)),A(n)}catch(n){console.error("âŒ Error searching area:",n)}finally{W(!1)}},[r,M,E,V]),H=o.useCallback(async t=>{W(!0);try{const s=[];(r==="vacancies"||r==="both")&&(await is()).forEach(a=>{if(a.locationData){if(M&&a.league!==M||E&&a.ageGroup!==E)return;const u=new google.maps.LatLng(a.locationData.latitude,a.locationData.longitude);google.maps.geometry.poly.containsLocation(u,t)&&s.push({item:{...a,id:a.id.toString(),postedBy:a.postedBy.toString()},distance:0,type:"vacancy"})}}),(r==="availability"||r==="both")&&(await it()).forEach(a=>{if(a.locationData){if(M&&!a.preferredLeagues.includes(M)||E&&a.ageGroup!==E)return;const u=new google.maps.LatLng(a.locationData.latitude,a.locationData.longitude);google.maps.geometry.poly.containsLocation(u,t)&&s.push({item:a,distance:0,type:"availability"})}}),A(s)}catch(s){console.error("âŒ Error searching drawn area:",s)}finally{W(!1)}},[r,M,E,V]);o.useEffect(()=>{I||_(g,x)},[r,M,E,V,x,g,I,_]),o.useEffect(()=>{if(!D||I){Y&&(Y.setMap(null),We(null));return}if(Y)Y.setCenter(g),Y.setRadius(x*1e3);else{const t=new google.maps.Circle({strokeColor:"#2196F3",strokeOpacity:.8,strokeWeight:2,fillColor:"#2196F3",fillOpacity:.1,map:D,center:g,radius:x*1e3});We(t)}},[D,g,x,I]);const Et=()=>{q(t=>({...t,isActive:!0,mode:"draw"})),ve(!0),ne([]),y({open:!0,message:"Click on the map to start drawing your search area. Double-click or press Enter to finish.",severity:"success"})},Qe=()=>{b&&(b.setMap(null),we(null)),Se(!1),q({isActive:!1,mode:"view",currentPolygon:null}),ve(!1),ne([]),je.forEach(t=>{"setMap"in t&&typeof t.setMap=="function"?t.setMap(null):google.maps.event.removeListener(t)}),oe([]),N&&(N.setMap(null),be(null)),_(g,x)},Pt=()=>{b&&(q(t=>({...t,mode:"edit"})),b.setEditable(!0),y({open:!0,message:"Edit mode: Drag the corners to adjust your search area.",severity:"success"}))},Dt=()=>{b&&re(!0)},zt=t=>{ht(t.currentTarget),ke(!0)},X=()=>{I&&b?H(b):_(g,x)},Rt=async()=>{try{if(!navigator.geolocation){y({open:!0,message:"Geolocation is not supported by your browser. Please click on the map to set your search center.",severity:"error"});return}location.protocol!=="https:"&&location.hostname!=="localhost"&&location.hostname!=="127.0.0.1"&&console.warn("Geolocation may require HTTPS in production"),y({open:!0,message:"Getting your location...",severity:"success"});const t=await gs();if(t&&"lat"in t&&"lng"in t)console.log("Location obtained successfully:",t),S(t),m(15),_(t,x),y({open:!0,message:"Location found! Map centered on your position.",severity:"success"});else if(t&&"error"in t)y({open:!0,message:t.userMessage,severity:"error"});else if("permissions"in navigator)try{const s=await navigator.permissions.query({name:"geolocation"});console.log("Geolocation permission status:",s.state);let n="Could not get your location. ";switch(s.state){case"denied":n+="Location access is blocked. Please enable it in your browser settings and try again.";break;case"prompt":n+="Please allow location access when prompted and try again.";break;default:n+="Please try again or click on the map to set your search center manually."}y({open:!0,message:n,severity:"error"})}catch(s){console.warn("Could not check permission status:",s),y({open:!0,message:"Location access needed. Please allow location permissions and try again, or click on the map to set your search center manually.",severity:"error"})}else y({open:!0,message:"Location access needed. Please allow location permissions and try again, or click on the map to set your search center manually.",severity:"error"})}catch(t){console.error("Unexpected error in handleMyLocation:",t),y({open:!0,message:"Unexpected error accessing location. Please try clicking on the map manually.",severity:"error"})}},Ft=t=>{C(t),I||_(g,t)},Xe=o.useCallback(t=>{if(t.latLng&&!F.isActive&&!I){const s={lat:t.latLng.lat(),lng:t.latLng.lng()};S(s),_(s,x)}},[x,_,F.isActive,I]);o.useEffect(()=>{if(D){const t=D.addListener("click",Xe);return()=>google.maps.event.removeListener(t)}},[D,Xe]);const Gt=()=>v.map(t=>{const s=t.item;if(!s.locationData)return null;const n={lat:s.locationData.latitude,lng:s.locationData.longitude},a=t.type==="vacancy"?"https://maps.google.com/mapfiles/ms/icons/red-dot.png":"https://maps.google.com/mapfiles/ms/icons/blue-dot.png";return e.jsx(xs,{position:n,icon:a,title:s.title,onClick:()=>{console.log("MapSearch: Marker onClick called for item:",s.id,s.title),P(t)}},`${t.type}-${s.id}`)}),$t=()=>{if(console.log("renderSelectedItemDialog called, selectedResult:",d),!d)return null;const t=d.item;return console.log("Dialog will render for item:",t.id,t.title),e.jsxs(ge,{open:!!d,onClose:()=>P(null),maxWidth:"sm",fullWidth:!0,children:[e.jsx(me,{children:e.jsxs(h,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(c,{variant:"h6",children:t.title}),e.jsx(xe,{onClick:()=>P(null),size:"small",children:e.jsx(rt,{})})]})}),e.jsxs(he,{children:[e.jsxs(h,{mb:2,children:[e.jsx(R,{label:d.type==="vacancy"?"Team Vacancy":"Player Available",color:d.type==="vacancy"?"primary":"secondary",size:"small"}),d.distance&&e.jsx(R,{label:`${Te(d.distance)} away`,variant:"outlined",size:"small",sx:{ml:1}})]}),e.jsx(c,{variant:"body1",paragraph:!0,children:t.description}),e.jsxs(k,{container:!0,spacing:2,children:[e.jsxs(k,{item:!0,xs:6,children:[e.jsx(c,{variant:"subtitle2",color:"textSecondary",children:"League"}),e.jsx(c,{variant:"body2",children:"league"in t?t.league:t.preferredLeagues.join(", ")})]}),e.jsxs(k,{item:!0,xs:6,children:[e.jsx(c,{variant:"subtitle2",color:"textSecondary",children:"Age Group"}),e.jsx(c,{variant:"body2",children:t.ageGroup})]}),e.jsxs(k,{item:!0,xs:6,children:[e.jsx(c,{variant:"subtitle2",color:"textSecondary",children:"Position"}),e.jsx(c,{variant:"body2",children:"position"in t?t.position:t.positions?.join(", ")||"N/A"})]}),e.jsxs(k,{item:!0,xs:6,children:[e.jsx(c,{variant:"subtitle2",color:"textSecondary",children:"Location"}),e.jsx(c,{variant:"body2",children:t.location})]})]}),e.jsxs(h,{mt:2,children:[e.jsx(c,{variant:"subtitle2",color:"textSecondary",children:"Connect"}),e.jsxs(c,{variant:"body2",color:"text.secondary",children:["Use the messaging feature to connect with this ",d.type==="vacancy"?"team":"player"]}),e.jsx(f,{variant:"contained",color:"primary",fullWidth:!0,sx:{mt:1},startIcon:e.jsx(ss,{}),onClick:()=>{console.log("Sending message - Full item:",t),console.log("Selected result type:",d.type),console.log("Item ID:",t.id,"Type:",typeof t.id),P(null),p("/messages",{state:{recipientId:String(t.postedBy),recipientName:d.type==="vacancy"?t.title:`${t.firstName||"Player"} ${t.lastName||""}`.trim(),context:d.type==="vacancy"?`Regarding: ${t.title}`:`Regarding player availability in ${t.ageGroup}`,relatedVacancyId:d.type==="vacancy"?String(t.id):void 0,relatedPlayerAvailabilityId:d.type==="availability"?String(t.id):void 0,messageType:d.type==="vacancy"?"vacancy_interest":"player_inquiry"}})},children:"Send Message"})]})]}),e.jsxs(pe,{children:[e.jsx(f,{startIcon:e.jsx(as,{}),onClick:()=>{const s=new URLSearchParams;d.type==="vacancy"?(s.set("tab","0"),s.set("league","league"in t?t.league:""),s.set("ageGroup",t.ageGroup),s.set("position","position"in t?t.position:"")):(s.set("tab","1"),s.set("ageGroup",t.ageGroup),"preferredLeagues"in t&&t.preferredLeagues.length>0&&s.set("league",t.preferredLeagues[0]),"positions"in t&&t.positions&&t.positions.length>0&&s.set("position",t.positions[0])),s.set("location",t.location),s.set("highlightId",t.id),p(`/search?${s.toString()}`),P(null)},variant:"contained",children:"View Details"}),t.locationData&&e.jsx(f,{startIcon:e.jsx(ns,{}),onClick:()=>{const s=`https://www.google.com/maps/dir/?api=1&destination=${t.locationData.latitude},${t.locationData.longitude}`;window.open(s,"_blank")},children:"Get Directions"}),e.jsx(f,{onClick:()=>P(null),children:"Close"})]})]})};return e.jsx(cs,{children:e.jsxs(h,{children:[e.jsx(ee,{elevation:2,sx:{p:2,mb:2},children:e.jsx(k,{container:!0,spacing:2,alignItems:"center",children:e.jsx(k,{item:!0,xs:12,children:e.jsxs(h,{display:"flex",alignItems:"center",gap:2,flexWrap:"wrap",children:[e.jsx(f,{startIcon:e.jsx(Ot,{}),onClick:()=>vt(!ze),variant:ze?"contained":"outlined",size:"small",children:"Filters"}),e.jsx(B,{orientation:"vertical",flexItem:!0}),e.jsxs(te,{direction:"row",spacing:1,children:[e.jsx(f,{variant:V==="training"?"contained":"outlined",size:"small",onClick:()=>Ye("training"),children:"Training"}),e.jsx(f,{variant:V==="match"?"contained":"outlined",size:"small",onClick:()=>Ye("match"),children:"Match"})]}),e.jsx(B,{orientation:"vertical",flexItem:!0}),e.jsxs(te,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(f,{startIcon:e.jsx(Bt,{}),onClick:Et,variant:F.isActive?"contained":"outlined",size:"small",disabled:F.isActive,children:F.isActive?"Drawing...":"Draw Area"}),b&&e.jsxs(e.Fragment,{children:[e.jsx(f,{startIcon:e.jsx(Wt,{}),onClick:Pt,variant:F.mode==="edit"?"contained":"outlined",size:"small",color:"primary",children:"Edit"}),e.jsx(f,{startIcon:e.jsx(et,{}),onClick:Dt,variant:"outlined",size:"small",color:"success",children:"Save"}),e.jsx(f,{startIcon:e.jsx(Nt,{}),onClick:Qe,variant:"outlined",size:"small",color:"secondary",children:"Clear"})]}),U.length>0&&e.jsxs(f,{startIcon:e.jsx(Ut,{}),onClick:zt,variant:"outlined",size:"small",children:["Saved (",U.length,")"]})]}),e.jsx(Vt,{control:e.jsx(tt,{checked:I,disabled:!b,size:"small"}),label:"Use Drawn Area",disabled:!b}),e.jsx(B,{orientation:"vertical",flexItem:!0}),e.jsx(f,{startIcon:e.jsx(Ht,{}),onClick:Rt,variant:"outlined",size:w?"large":"small",disabled:I,sx:{minHeight:w?44:"auto",fontSize:w?"0.9rem":"0.875rem"},children:"My Location"}),i&&e.jsxs(e.Fragment,{children:[e.jsx(B,{orientation:"vertical",flexItem:!0}),e.jsx(f,{startIcon:e.jsx(Yt,{}),onClick:()=>Q(!0),variant:"outlined",size:w?"large":"small",color:"secondary",sx:{minHeight:w?44:"auto",fontSize:w?"0.9rem":"0.875rem"},children:w?`Alerts (${Z.filter(t=>t.isActive).length})`:`Email Alerts (${Z.filter(t=>t.isActive).length})`})]}),v.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(B,{orientation:"vertical",flexItem:!0}),e.jsx(f,{onClick:()=>Ue(!z),variant:z?"contained":"outlined",size:w?"large":"small",sx:{minHeight:w?44:"auto",fontSize:w?"0.9rem":"0.875rem"},children:z?"Exit Multi-Select":"Multi-Select"}),z&&e.jsxs(te,{direction:"row",spacing:1,children:[e.jsx(f,{onClick:wt,size:w?"large":"small",disabled:L.size===v.length,sx:{minHeight:w?44:"auto",fontSize:w?"0.9rem":"0.875rem"},children:"Select All"}),e.jsxs(f,{onClick:qe,size:w?"large":"small",disabled:L.size===0,sx:{minHeight:w?44:"auto",fontSize:w?"0.9rem":"0.875rem"},children:["Clear (",L.size,")"]}),e.jsxs(f,{onClick:()=>ie(!0),variant:"contained",size:w?"large":"small",disabled:L.size===0,startIcon:e.jsx(st,{}),sx:{minHeight:w?44:"auto",fontSize:w?"0.9rem":"0.875rem"},children:["Contact (",L.size,")"]})]})]})]})})})}),ze&&e.jsxs(ee,{elevation:2,sx:{p:2,mb:2},children:[e.jsx(c,{variant:"h6",gutterBottom:!0,children:"Search Filters"}),e.jsxs(k,{container:!0,spacing:2,children:[e.jsx(k,{item:!0,xs:12,sm:4,children:e.jsx(qt,{fullWidth:!0,size:"small",options:jt,value:M||null,onChange:(t,s)=>{Pe(s||""),setTimeout(X,100)},renderInput:t=>e.jsx(ue,{...t,label:"League",placeholder:"Type to search leagues..."}),filterOptions:(t,{inputValue:s})=>s?t.filter(n=>n.toLowerCase().includes(s.toLowerCase())):t,noOptionsText:"No leagues found"})}),e.jsx(k,{item:!0,xs:12,sm:4,children:e.jsxs(Jt,{fullWidth:!0,size:"small",children:[e.jsx(Kt,{children:"Age Group"}),e.jsxs(Zt,{value:E,label:"Age Group",onChange:t=>{De(t.target.value),setTimeout(X,100)},children:[e.jsx(se,{value:"",children:"All Age Groups"}),bt.map(t=>e.jsx(se,{value:t,children:t},t))]})]})}),e.jsx(k,{item:!0,xs:12,sm:4,children:e.jsx(f,{onClick:()=>{Pe(""),De(""),setTimeout(X,100)},variant:"outlined",size:"small",fullWidth:!0,children:"Clear Filters"})})]})]}),!I&&e.jsx(ee,{elevation:2,sx:{p:2,mb:2},children:e.jsxs(k,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(k,{item:!0,xs:12,md:4,children:e.jsxs(h,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(c,{variant:"body2",children:"Search Radius:"}),e.jsx(h,{sx:{width:150},children:e.jsx(at,{value:x,onChange:(t,s)=>Ft(s),min:1,max:100,valueLabelDisplay:"auto",valueLabelFormat:t=>`${t}km`})})]})}),e.jsx(k,{item:!0,xs:12,md:4,children:e.jsxs(h,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(c,{variant:"body2",children:"Map Zoom:"}),e.jsx(h,{sx:{width:150},children:e.jsx(at,{value:j,onChange:(t,s)=>m(s),min:6,max:16,valueLabelDisplay:"auto"})})]})}),e.jsx(k,{item:!0,xs:12,md:4,children:e.jsx(c,{variant:"body2",color:"textSecondary",children:F.isActive?"Click on the map to start drawing a search area. Double-click to finish.":F.mode==="edit"?"Edit mode: Drag the corners to adjust your search area":"Click on the map to search different areas or draw a custom search area"})})]})}),e.jsx(ee,{elevation:2,children:e.jsx(ds,{center:g,zoom:j,onMapLoad:Lt,style:{height:"500px",width:"100%"},children:Gt()})}),w&&e.jsxs(ee,{elevation:3,sx:{position:"fixed",bottom:le?0:-300,left:0,right:0,transition:"bottom 0.3s ease-in-out",zIndex:1e3,maxHeight:"60vh",overflow:"hidden"},children:[e.jsx(h,{sx:{p:1,textAlign:"center",borderBottom:1,borderColor:"divider",cursor:"pointer"},onClick:()=>Ie(!le),children:e.jsx(c,{variant:"body2",color:"text.secondary",children:le?"ðŸ“± Swipe down to hide":`ðŸ“± Swipe up to show ${v.length} results`})}),le&&e.jsx(h,{sx:{overflow:"auto",maxHeight:"calc(60vh - 48px)"},children:v.map((t,s)=>{const n=`${t.type}_${s}`,a=L.has(n);return e.jsx($e,{sx:{m:1,border:a?2:0,borderColor:"primary.main"},children:e.jsx(_e,{sx:{p:2},children:e.jsxs(h,{display:"flex",alignItems:"flex-start",gap:1,children:[z&&e.jsx(nt,{checked:a,onChange:()=>Fe(n),size:"large"}),e.jsxs(h,{flex:1,onClick:()=>!z&&P(t),children:[e.jsx(c,{variant:"h6",component:"h3",sx:{fontSize:"1rem"},children:t.item.title}),e.jsxs(h,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,children:[e.jsx(R,{label:t.type==="vacancy"?"Team":"Player",color:t.type==="vacancy"?"primary":"secondary",size:"small"}),t.distance&&t.distance>0&&e.jsx(c,{variant:"body2",color:"primary",children:Te(t.distance)})]}),e.jsx(c,{variant:"body2",color:"textSecondary",children:t.item.description.length>60?`${t.item.description.substring(0,60)}...`:t.item.description})]})]})})},n)})})]}),e.jsxs(h,{mt:2,children:[e.jsxs(h,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsxs(c,{variant:"h6",children:["Search Results (",v.length,")"]}),e.jsxs(h,{display:"flex",gap:1,flexWrap:"wrap",children:[M&&e.jsx(R,{label:`League: ${M}`,size:"small",onDelete:()=>{Pe(""),setTimeout(X,100)}}),E&&e.jsx(R,{label:`Age: ${E}`,size:"small",onDelete:()=>{De(""),setTimeout(X,100)}}),I&&e.jsx(R,{label:"Custom Area",size:"small",color:"primary"}),z&&L.size>0&&e.jsx(R,{label:`${L.size} Selected`,size:"small",color:"success",variant:"filled"})]})]}),e.jsx(k,{container:!0,spacing:2,children:v.map((t,s)=>{const n=`${t.type}_${s}`,a=L.has(n);return e.jsx(k,{item:!0,xs:12,md:6,children:e.jsx($e,{sx:{cursor:"pointer","&:hover":{elevation:4},border:a?2:0,borderColor:"primary.main",position:"relative"},onClick:()=>z?Fe(n):P(t),children:e.jsxs(_e,{children:[z&&e.jsx(h,{position:"absolute",top:8,right:8,children:e.jsx(nt,{checked:a,onChange:()=>Fe(n),onClick:u=>u.stopPropagation()})}),e.jsxs(h,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",sx:{pr:z?5:0},children:[e.jsx(c,{variant:"h6",component:"h3",children:t.item.title}),e.jsx(R,{label:t.type==="vacancy"?"Team":"Player",color:t.type==="vacancy"?"primary":"secondary",size:"small"})]}),e.jsx(c,{variant:"body2",color:"textSecondary",paragraph:!0,children:t.item.description.length>100?`${t.item.description.substring(0,100)}...`:t.item.description}),e.jsxs(h,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(c,{variant:"body2",children:["position"in t.item?t.item.position:t.item.positions?.join(", ")||"N/A"," â€¢ ",t.item.ageGroup]}),t.distance&&t.distance>0?e.jsx(c,{variant:"body2",color:"primary",children:Te(t.distance)}):I?e.jsx(c,{variant:"body2",color:"secondary",children:"In Area"}):null]})]})})},`${t.type}-${t.item.id}-${s}`)})})]}),$t(),e.jsxs(ge,{open:ut,onClose:()=>re(!1),children:[e.jsx(me,{children:"Save Search Region"}),e.jsx(he,{children:e.jsx(ue,{autoFocus:!0,margin:"dense",label:"Region Name",fullWidth:!0,variant:"outlined",value:K,onChange:t=>Ne(t.target.value),placeholder:"e.g., North London, City Center, etc."})}),e.jsxs(pe,{children:[e.jsx(f,{onClick:()=>re(!1),children:"Cancel"}),e.jsx(f,{onClick:At,variant:"contained",disabled:!K.trim(),children:"Save"})]})]}),e.jsxs(Qt,{anchorEl:mt,open:gt,onClose:()=>ke(!1),PaperProps:{style:{maxHeight:400,width:"300px"}},children:[e.jsx(se,{disabled:!0,children:e.jsx(c,{variant:"subtitle2",children:"Saved Search Regions"})}),e.jsx(B,{}),U.map(t=>e.jsxs(se,{dense:!0,children:[e.jsx(Xt,{primary:t.name,secondary:`Saved ${t.createdAt.toLocaleDateString()}`,onClick:()=>It(t),style:{cursor:"pointer"}}),e.jsx(es,{children:e.jsx(xe,{edge:"end",size:"small",onClick:s=>{s.stopPropagation(),Mt(t.id)},children:e.jsx(ot,{fontSize:"small"})})})]},t.id)),U.length===0&&e.jsx(se,{disabled:!0,children:e.jsx(c,{variant:"body2",color:"textSecondary",children:"No saved regions yet"})})]}),e.jsx(ts,{open:Le.open,autoHideDuration:4e3,onClose:()=>y(t=>({...t,open:!1})),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(ct,{onClose:()=>y(t=>({...t,open:!1})),severity:Le.severity,sx:{width:"100%"},children:Le.message})}),e.jsxs(ge,{open:yt,onClose:()=>Q(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(me,{children:e.jsxs(h,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(c,{variant:"h6",children:"Email Alerts"}),e.jsx(xe,{onClick:()=>Q(!1),size:"small",children:e.jsx(rt,{})})]})}),e.jsx(he,{children:e.jsxs(te,{spacing:3,children:[e.jsxs(h,{children:[e.jsx(c,{variant:"h6",gutterBottom:!0,children:"Create New Alert"}),e.jsx(c,{variant:"body2",color:"textSecondary",paragraph:!0,children:"Get notified when new matches are found for your search criteria."}),e.jsxs(k,{container:!0,spacing:2,children:[e.jsxs(k,{item:!0,xs:12,sm:6,children:[e.jsx(f,{startIcon:e.jsx(st,{}),onClick:()=>Ke("new_match"),variant:"outlined",fullWidth:!0,disabled:!i,children:"Alert for Current Search"}),e.jsxs(c,{variant:"caption",display:"block",sx:{mt:1},children:[I?"Custom area":`${x}km radius`,M&&` â€¢ ${M}`,E&&` â€¢ ${E}`]})]}),b&&e.jsxs(k,{item:!0,xs:12,sm:6,children:[e.jsx(f,{startIcon:e.jsx(et,{}),onClick:()=>Ke("saved_search"),variant:"outlined",fullWidth:!0,disabled:!i,children:"Alert for Saved Region"}),e.jsx(c,{variant:"caption",display:"block",sx:{mt:1},children:"Custom drawn area with current filters"})]})]})]}),e.jsx(B,{}),e.jsxs(h,{children:[e.jsxs(c,{variant:"h6",gutterBottom:!0,children:["Your Active Alerts (",Z.filter(t=>t.isActive).length,")"]}),Z.length===0?e.jsx(c,{variant:"body2",color:"textSecondary",children:"No email alerts created yet."}):e.jsx(te,{spacing:2,children:Z.map(t=>e.jsx($e,{variant:"outlined",children:e.jsx(_e,{children:e.jsxs(h,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",children:[e.jsxs(h,{flex:1,children:[e.jsxs(h,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(R,{label:t.alertType==="new_match"?"Search Alert":"Region Alert",size:"small",color:t.alertType==="new_match"?"primary":"secondary"}),e.jsx(R,{label:t.isActive?"Active":"Inactive",size:"small",color:t.isActive?"success":"default"})]}),e.jsx(c,{variant:"body2",color:"textSecondary",children:t.searchRegion?e.jsxs(e.Fragment,{children:["Custom region: ",t.searchRegion.name]}):e.jsxs(e.Fragment,{children:[t.filters?.radius?`${t.filters.radius}km radius`:"Location-based search",t.filters?.league&&` â€¢ ${t.filters.league}`,t.filters?.ageGroup&&` â€¢ ${t.filters.ageGroup}`]})}),e.jsxs(c,{variant:"caption",color:"textSecondary",children:["Created: ",new Date(t.createdAt).toLocaleDateString()]})]}),e.jsxs(h,{display:"flex",gap:1,children:[e.jsx(tt,{checked:t.isActive,onChange:s=>kt(t.id,s.target.checked),size:"small"}),e.jsx(xe,{onClick:()=>Ct(t.id),size:"small",color:"error",children:e.jsx(ot,{fontSize:"small"})})]})]})})},t.id))})]})]})}),e.jsx(pe,{children:e.jsx(f,{onClick:()=>Q(!1),children:"Close"})})]}),e.jsxs(ge,{open:pt,onClose:()=>ie(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsxs(me,{children:["Contact Multiple ",L.size>0&&Array.from(L).some(t=>t.startsWith("vacancy"))?"Teams":"Players"]}),e.jsxs(he,{children:[e.jsxs(c,{variant:"body2",color:"text.secondary",sx:{mb:2},children:["Send a message to ",L.size," selected ",L.size===1?"contact":"contacts"]}),e.jsx(ue,{fullWidth:!0,label:"Subject",value:$.subject,onChange:t=>Ve(s=>({...s,subject:t.target.value})),sx:{mb:2}}),e.jsx(ue,{fullWidth:!0,label:"Message",multiline:!0,rows:6,value:$.message,onChange:t=>Ve(s=>({...s,message:t.target.value})),placeholder:"Introduce yourself and explain your interest...",sx:{mb:2}}),e.jsxs(h,{sx:{p:2,bgcolor:"grey.50",borderRadius:1},children:[e.jsx(c,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Selected contacts:"}),Je().slice(0,3).map((t,s)=>e.jsxs(c,{variant:"body2",children:["â€¢ ",t.item.title," (",t.type==="vacancy"?"Team":"Player",")"]},s)),L.size>3&&e.jsxs(c,{variant:"body2",color:"text.secondary",children:["... and ",L.size-3," more"]})]})]}),e.jsxs(pe,{children:[e.jsx(f,{onClick:()=>ie(!1),children:"Cancel"}),e.jsxs(f,{onClick:St,variant:"contained",disabled:!$.subject.trim()||!$.message.trim(),children:["Send Messages (",L.size,")"]})]})]})]})})};export{cs as G,ws as M,ps as _,bs as g};
