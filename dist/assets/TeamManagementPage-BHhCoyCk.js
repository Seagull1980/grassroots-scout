import{j as e,B as n,T as r,s as l,af as w,n as H,G as k,C as J,a as P,d as v,b6 as D,al as K,a6 as f,a7 as y,a8 as b,a0 as x,a1 as F,a2 as B,a3 as L,i,a9 as T,as as Q,at as U,c0 as X,A as Z,l as _}from"./mui-vendor-C1HUv1lu.js";import{r as s}from"./react-vendor-BW_9WhSV.js";import{a as j}from"./admin-features-DSNbd77k.js";const se=()=>{const[G,E]=s.useState([]),[N,I]=s.useState(!0),[A,g]=s.useState(""),[$,d]=s.useState(!1),[W,h]=s.useState(!1),[o,m]=s.useState(null),[O,R]=s.useState([]),[t,c]=s.useState({teamName:"",clubName:"",ageGroup:"",league:"",teamGender:"Mixed"}),[u,C]=s.useState({email:"",role:"Assistant Coach"});s.useEffect(()=>{M()},[]);const M=async()=>{try{I(!0);const a=await j.get("/teams");E(a.data.teams)}catch(a){g("Failed to load teams"),console.error("Error loading teams:",a)}finally{I(!1)}},q=async()=>{try{await j.post("/teams",t),d(!1),c({teamName:"",clubName:"",ageGroup:"",league:"",teamGender:"Mixed"}),M()}catch(a){g(a.response?.data?.error||"Failed to create team")}},z=async()=>{if(o)try{await j.post(`/teams/${o.id}/invite`,u),h(!1),C({email:"",role:"Assistant Coach"}),S(o.id)}catch(a){g(a.response?.data?.error||"Failed to invite member")}},S=async a=>{try{const p=await j.get(`/teams/${a}`);R(p.data.team.members)}catch(p){console.error("Error loading team members:",p)}},V=a=>{m(a),S(a.id)},Y=a=>{switch(a){case"Head Coach":return"primary";case"Assistant Coach":return"secondary";default:return"default"}};return N?e.jsxs(n,{sx:{p:3},children:[e.jsx(r,{variant:"h4",gutterBottom:!0,children:"Team Management"}),e.jsx(r,{children:"Loading teams..."})]}):e.jsxs(n,{sx:{p:3},children:[e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(r,{variant:"h4",children:"Team Management"}),e.jsx(l,{variant:"contained",startIcon:e.jsx(w,{}),onClick:()=>d(!0),children:"Create Team"})]}),A&&e.jsx(H,{severity:"error",sx:{mb:3},children:A}),e.jsx(k,{container:!0,spacing:3,children:G.map(a=>e.jsx(k,{item:!0,xs:12,md:6,lg:4,children:e.jsxs(J,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(P,{sx:{flexGrow:1},children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:a.teamName}),a.clubName&&e.jsx(r,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:a.clubName}),e.jsxs(n,{sx:{mb:2},children:[e.jsx(v,{label:a.userRole,color:Y(a.userRole),size:"small",sx:{mr:1}}),e.jsx(v,{label:`${a.ageGroup} - ${a.league}`,variant:"outlined",size:"small"})]}),e.jsxs(r,{variant:"body2",color:"text.secondary",children:["Gender: ",a.teamGender]})]}),e.jsxs(n,{sx:{p:2,pt:0},children:[e.jsx(l,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(D,{}),onClick:()=>V(a),sx:{mb:1},children:"View Team"}),a.permissions.canInviteMembers&&e.jsx(l,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(K,{}),onClick:()=>{m(a),h(!0)},children:"Invite Coach"})]})]})},a.id))}),G.length===0&&!N&&e.jsxs(n,{sx:{textAlign:"center",py:6},children:[e.jsx(D,{sx:{fontSize:64,color:"text.secondary",mb:2}}),e.jsx(r,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No teams yet"}),e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Create your first team to start collaborating with other coaches"}),e.jsx(l,{variant:"contained",startIcon:e.jsx(w,{}),onClick:()=>d(!0),children:"Create Team"})]}),e.jsxs(f,{open:$,onClose:()=>d(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(y,{children:"Create New Team"}),e.jsxs(b,{children:[e.jsx(x,{fullWidth:!0,label:"Team Name",value:t.teamName,onChange:a=>c({...t,teamName:a.target.value}),sx:{mt:2},required:!0}),e.jsx(x,{fullWidth:!0,label:"Club Name (Optional)",value:t.clubName,onChange:a=>c({...t,clubName:a.target.value}),sx:{mt:2}}),e.jsx(x,{fullWidth:!0,label:"Age Group",value:t.ageGroup,onChange:a=>c({...t,ageGroup:a.target.value}),sx:{mt:2},required:!0}),e.jsx(x,{fullWidth:!0,label:"League",value:t.league,onChange:a=>c({...t,league:a.target.value}),sx:{mt:2},required:!0}),e.jsxs(F,{fullWidth:!0,sx:{mt:2},children:[e.jsx(B,{children:"Team Gender"}),e.jsxs(L,{value:t.teamGender,onChange:a=>c({...t,teamGender:a.target.value}),children:[e.jsx(i,{value:"Boys",children:"Boys"}),e.jsx(i,{value:"Girls",children:"Girls"}),e.jsx(i,{value:"Mixed",children:"Mixed"})]})]})]}),e.jsxs(T,{children:[e.jsx(l,{onClick:()=>d(!1),children:"Cancel"}),e.jsx(l,{onClick:q,variant:"contained",children:"Create Team"})]})]}),e.jsxs(f,{open:W,onClose:()=>h(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsxs(y,{children:["Invite Coach to ",o?.teamName]}),e.jsxs(b,{children:[e.jsx(x,{fullWidth:!0,label:"Email Address",type:"email",value:u.email,onChange:a=>C({...u,email:a.target.value}),sx:{mt:2},required:!0}),e.jsxs(F,{fullWidth:!0,sx:{mt:2},children:[e.jsx(B,{children:"Role"}),e.jsxs(L,{value:u.role,onChange:a=>C({...u,role:a.target.value}),children:[e.jsx(i,{value:"Assistant Coach",children:"Assistant Coach"}),e.jsx(i,{value:"Youth Coach",children:"Youth Coach"}),e.jsx(i,{value:"Goalkeeper Coach",children:"Goalkeeper Coach"}),e.jsx(i,{value:"Fitness Coach",children:"Fitness Coach"})]})]})]}),e.jsxs(T,{children:[e.jsx(l,{onClick:()=>h(!1),children:"Cancel"}),e.jsx(l,{onClick:z,variant:"contained",children:"Send Invitation"})]})]}),e.jsxs(f,{open:!!o&&!W,onClose:()=>m(null),maxWidth:"md",fullWidth:!0,children:[e.jsxs(y,{children:[o?.teamName," - Team Members"]}),e.jsx(b,{children:e.jsx(Q,{children:O.map(a=>e.jsxs(U,{children:[e.jsx(X,{children:e.jsxs(Z,{children:[a.firstName[0],a.lastName[0]]})}),e.jsx(_,{primary:`${a.firstName} ${a.lastName}`,secondary:e.jsxs(n,{children:[e.jsx(v,{label:a.role,size:"small",sx:{mr:1}}),e.jsxs(r,{variant:"caption",color:"text.secondary",children:["Joined ",new Date(a.joinedAt).toLocaleDateString()]})]})})]},a.id))})}),e.jsx(T,{children:e.jsx(l,{onClick:()=>m(null),children:"Close"})})]})]})};export{se as default};
