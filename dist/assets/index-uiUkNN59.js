const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MapsPage-BJmH4Df2.js","assets/mui-vendor-rZ0WLTig.js","assets/react-vendor-CRXLTmIH.js","assets/maps-features-rHVpEgjv.js","assets/maps-vendor-PjF4sKa1.js","assets/admin-features-d6LVy8Ft.js","assets/PerformanceAnalyticsPage-CFYdIe8C.js","assets/charts-vendor-B0AXBVgz.js","assets/analytics-features-CT0hzqEO.js","assets/EnhancedSearchPage-D3n5ldCI.js","assets/AdminPage-DKKjqL0i.js","assets/TeamProfilePage-C9_P2-ss.js","assets/TeamRosterPage-CbOaqGoQ.js","assets/team-features-lrg-PnxP.js","assets/messaging-features-dHWz0ZXd.js","assets/MatchCompletionsPage-qyrMP6g2.js","assets/MessagesPage-DWWztuwF.js","assets/SuccessStoriesPage-u5SIrQHZ.js","assets/EnhancedDashboardPage-DnZy7lrL.js","assets/AlertPreferencesPage-Bf2i6JTB.js","assets/RecommendationsPage-CXhp_HdB.js","assets/ChildPlayerAvailabilityPage-CIPKu0fq.js","assets/ChildrenManagementPage-yOR6xgrD.js","assets/TrainingInvitations-DIwDjm-l.js","assets/TrialManagement-M3CJhbeI.js"])))=>i.map(i=>d[i]);
var Sn=Object.defineProperty;var Tn=(t,r,a)=>r in t?Sn(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a;var Cr=(t,r,a)=>Tn(t,typeof r!="symbol"?r+"":r,a);import{a9 as lr,aa as je,j as e,B as d,a4 as Pr,bg as kn,D as Dn,af as cr,bh as Wt,bi as In,bj as _e,ac as dr,bk as An,b as Ur,bl as Wn,bm as Et,bn as Ln,f as _r,p as Gr,g as En,bf as Bt,o as Ft,bo as Rt,T as n,x as ct,y as ke,z as Ge,E as fe,am as Ee,d as q,bp as yt,bq as bt,a6 as Ze,br as Fn,bs as Rn,v as M,bt as Mn,I as he,A as $r,M as Xt,q as U,bu as wr,bv as Kt,ak as xe,Y as On,i as G,bw as Vr,az as Zt,be as er,bx as tr,ag as Nn,ah as Sr,by as Bn,b6 as Mt,ai as zn,h as ur,bz as Tr,X as hr,bA as xr,ae,G as i,C as de,a as ue,bB as vt,k as re,bC as Un,ab as Hr,aj as qr,bD as _n,a5 as Ke,bE as Gn,O as A,b2 as wt,bF as St,V as dt,bG as ut,F as X,t as K,u as J,a1 as $n,bH as Vn,bI as Yr,J as Fe,K as Re,N as Me,Q as Oe,au as zt,bJ as Ot,bK as Hn,w as ht,l as Ut,m as Le,bL as qn,a8 as it,al as Yn,bM as Pe,bN as we,bO as Se,bP as Te,av as Jn,aw as rr,bQ as Qn,bR as Xn,an as kr,bS as Jr,b8 as Kn,b9 as Zn,ba as ea,bb as Dr,bc as We,bd as ta,U as qe,W as Ye,ap as ra,ay as mr,bT as Ir,bU as na,aq as Qr,R as aa,bV as nr,bW as ar,bX as Ar,aG as Y,aI as Tt,aH as Ct,aJ as Xr,aK as Kr,aL as Je,aF as sa,aM as Zr,bY as ia,aY as c,b4 as en,bZ as Wr,b_ as Lr,b$ as oa,c0 as Er,c1 as nt,b7 as Pt,c2 as la,c3 as ca,c4 as da,c5 as ua,a7 as Fr,c6 as ha,c7 as xa,c8 as ma}from"./mui-vendor-rZ0WLTig.js";import{d as pa,u as Ne,f as tn,r as h,N as Rr,h as rn,L as at,b as ga,i as ja,B as fa,j as ya,k as Z}from"./react-vendor-CRXLTmIH.js";import{u as le,s as ba,d as st,c as nn,l as sr,v as va,p as Ca,a as ot,f as jt,h as Mr,i as ye,j as ir,A as Pa}from"./admin-features-d6LVy8Ft.js";import{g as wa,G as Sa}from"./maps-features-rHVpEgjv.js";import{L as an,A as sn,D as Ta,T as ka,s as Da,u as Ia,v as pr,a as Aa,b as gr,c as kt,d as on,e as Nt,f as Wa,g as La,h as Ea,i as Fa,j as _t,k as Lt,l as Ra,P as He,M as At,m as Vt,n as Ma,o as Oa,p as Na,q as Ba,r as jr,t as Qe,w as za,x as Ua,y as _a,V as Ga,z as $a,B as Va,C as Ha,E as lt,F as ln,G as cn,H as qa,I as Ya,J as Ht,K as Ja,N as Qa}from"./team-features-lrg-PnxP.js";import"./maps-vendor-PjF4sKa1.js";import"./messaging-features-dHWz0ZXd.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const x of l)if(x.type==="childList")for(const s of x.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function a(l){const x={};return l.integrity&&(x.integrity=l.integrity),l.referrerPolicy&&(x.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?x.credentials="include":l.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function o(l){if(l.ep)return;l.ep=!0;const x=a(l);fetch(l.href,x)}})();var or={},Or=pa;or.createRoot=Or.createRoot,or.hydrateRoot=Or.hydrateRoot;const dn=()=>{const t=lr(),r=je(t.breakpoints.down("sm")),a=je(t.breakpoints.down("md")),o=je(t.breakpoints.up("lg")),l=je(t.breakpoints.down("lg"));return{isMobile:r,isTablet:a,isDesktop:o,isSmallScreen:l,screenSize:{xs:je(t.breakpoints.only("xs")),sm:je(t.breakpoints.only("sm")),md:je(t.breakpoints.only("md")),lg:je(t.breakpoints.only("lg")),xl:je(t.breakpoints.only("xl"))},getResponsiveValue:x=>je(t.breakpoints.only("xl"))&&x.xl!==void 0?x.xl:je(t.breakpoints.only("lg"))&&x.lg!==void 0?x.lg:je(t.breakpoints.only("md"))&&x.md!==void 0?x.md:je(t.breakpoints.only("sm"))&&x.sm!==void 0?x.sm:je(t.breakpoints.only("xs"))&&x.xs!==void 0?x.xs:x.lg||x.md||x.sm||x.xs}},un=()=>{const{isMobile:t,isTablet:r}=dn();return{containerSpacing:t?1:r?2:3,sectionSpacing:t?2:r?3:4,cardSpacing:t?1:2,buttonSize:t?"large":"medium",iconSize:t?"medium":"large",formSpacing:t?1:2}},Xa=({size:t=40,text:r="Loading..."})=>e.jsxs(d,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",p:4,children:[e.jsx(Pr,{variant:"circular",width:t,height:t,sx:{mb:2}}),e.jsx(Pr,{variant:"text",width:120,children:r})]}),Ka=kn({palette:{primary:{main:"#1e3a8a",light:"#3b82f6",dark:"#1e40af",contrastText:"#FFFFFF"},secondary:{main:"#1f2937",light:"#374151",dark:"#111827",contrastText:"#FFFFFF"},background:{default:"#f8fafc",paper:"#FFFFFF"},text:{primary:"#0f172a",secondary:"#475569"},grey:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a"}},typography:{fontFamily:'"Inter", "Roboto", "Helvetica", "Arial", sans-serif',h1:{fontWeight:800,fontSize:"3.5rem",letterSpacing:"-0.02em",lineHeight:1.1},h2:{fontWeight:700,fontSize:"2.5rem",letterSpacing:"-0.01em",lineHeight:1.2},h3:{fontWeight:700,fontSize:"2rem",letterSpacing:"-0.01em",lineHeight:1.3},h4:{fontWeight:600,fontSize:"1.5rem",lineHeight:1.4},h5:{fontWeight:600,fontSize:"1.25rem",lineHeight:1.5},h6:{fontWeight:600,fontSize:"1rem",lineHeight:1.6},body1:{fontSize:"1rem",lineHeight:1.7},body2:{fontSize:"0.875rem",lineHeight:1.6}},shape:{borderRadius:12},components:{MuiButton:{styleOverrides:{root:{textTransform:"none",fontWeight:600,borderRadius:12,padding:"12px 24px",fontSize:"0.95rem",boxShadow:"none","&:hover":{boxShadow:"0 4px 12px rgba(0,0,0,0.15)",transform:"translateY(-1px)"},transition:"all 0.2s ease-in-out"},containedPrimary:{background:"linear-gradient(135deg, #1e3a8a 0%, #2563eb 100%)","&:hover":{background:"linear-gradient(135deg, #1e40af 0%, #1d4ed8 100%)"}},containedSecondary:{background:"linear-gradient(135deg, #1f2937 0%, #374151 100%)","&:hover":{background:"linear-gradient(135deg, #111827 0%, #1f2937 100%)"}}}},MuiCard:{styleOverrides:{root:{borderRadius:16,boxShadow:"0 1px 3px rgba(30,58,138,0.1)",border:"1px solid #e2e8f0","&:hover":{boxShadow:"0 8px 25px rgba(30,58,138,0.15)",transform:"translateY(-2px)"},transition:"all 0.3s ease-in-out"}}},MuiPaper:{styleOverrides:{root:{borderRadius:16,boxShadow:"0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06)"},elevation3:{boxShadow:"0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05)"}}},MuiTextField:{styleOverrides:{root:{"& .MuiOutlinedInput-root":{borderRadius:12,"&:hover":{"& .MuiOutlinedInput-notchedOutline":{borderColor:"#6366F1"}}}}}},MuiChip:{styleOverrides:{root:{borderRadius:8,fontWeight:500}}},MuiAppBar:{styleOverrides:{root:{background:"linear-gradient(135deg, #1E293B 0%, #334155 100%)",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)"}}}}}),Za=()=>{const t=Ne(),r=tn(),{user:a,logout:o,isImpersonating:l,stopImpersonation:x}=le(),[s,j]=h.useState(null),[u,w]=h.useState(!1),[v,P]=h.useState(null),k=g=>{j(g.currentTarget)},I=()=>{j(null)},m=g=>{P(g.currentTarget)},p=()=>{P(null)},F=()=>{w(!u)},b=()=>{o(),t("/"),I()},W=g=>r.pathname===g,f=a?[{path:"/dashboard",label:"Dashboard",icon:e.jsx(Dn,{})},{path:"/search",label:"Search",icon:e.jsx(cr,{})},{path:"/maps",label:"Maps",icon:e.jsx(Wt,{})},{path:"/messages",label:"Messages",icon:e.jsx(In,{})},...a?.role==="Admin"?[{path:"/admin",label:"Admin",icon:e.jsx(_e,{})}]:[]]:[],S=a?[{path:"/calendar",label:"Calendar",icon:e.jsx(dr,{})},...a?.role!=="Admin"?[{path:"/post-advert",label:"Post Advert",icon:e.jsx(An,{})}]:[],...a?.role==="Coach"?[{path:"/team-roster",label:"Team Roster",icon:e.jsx(Ur,{})},{path:"/team-profile",label:"Team Profile",icon:e.jsx(Wn,{})}]:[],...a?.role==="Parent/Guardian"?[{path:"/children",label:"Manage Children",icon:e.jsx(Et,{})},{path:"/child-player-availability",label:"Child Availability",icon:e.jsx(Ln,{})}]:[],...a&&(a.role==="Coach"||a.role==="Player")?[{path:"/training-invitations",label:"Training Invites",icon:e.jsx(_r,{})}]:[],...a?.role==="Coach"?[{path:"/trial-management",label:"Trial Management",icon:e.jsx(Gr,{})}]:[],{path:"/performance-analytics",label:"Performance Analytics",icon:e.jsx(En,{})},{path:"/match-completions",label:"Match Completions",icon:e.jsx(Bt,{})},{path:"/success-stories",label:"Success Stories",icon:e.jsx(Ft,{})},{path:"/about",label:"About Us",icon:e.jsx(Rt,{})}]:[{path:"/about",label:"About Us",icon:e.jsx(Rt,{})}],O=[...f,...S],R=e.jsxs(d,{sx:{width:250},role:"presentation",children:[e.jsxs(d,{sx:{p:2,textAlign:"center",borderBottom:"1px solid rgba(0,0,0,0.12)"},children:[e.jsx(d,{component:"img",src:"/logo.jpg",alt:"The Grassroots Hub Logo",sx:{height:40,width:40,borderRadius:"8px",objectFit:"cover",mb:1,mx:"auto",display:"block"}}),e.jsx(n,{variant:"h6",sx:{fontWeight:700},children:"The Grassroots Hub"}),e.jsx(n,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:"Connect. Play. Develop"})]}),e.jsxs(ct,{children:[O.map(g=>e.jsxs(ke,{button:!0,onClick:()=>{console.log("ðŸ” Mobile navigation click:",g.path),t(g.path),w(!1)},sx:{backgroundColor:W(g.path)?"rgba(0,0,0,0.04)":"transparent"},children:[e.jsx(Ge,{children:g.icon}),e.jsx(fe,{primary:g.label})]},g.path)),a?e.jsxs(e.Fragment,{children:[e.jsx(Ee,{sx:{my:1}}),(a.role==="Admin"||l)&&e.jsxs(e.Fragment,{children:[e.jsxs(d,{sx:{px:2,py:1},children:[e.jsx(n,{variant:"caption",color:"text.secondary",display:"block",gutterBottom:!0,children:"Admin Status"}),l?e.jsxs(e.Fragment,{children:[e.jsx(q,{label:`Testing as ${a.role}`,icon:e.jsx(yt,{}),color:"warning",size:"small",sx:{mb:1,display:"block"}}),e.jsxs(ke,{button:!0,onClick:()=>{x(),w(!1)},sx:{px:0,py:.5},children:[e.jsx(Ge,{sx:{minWidth:36},children:e.jsx(bt,{color:"error"})}),e.jsx(fe,{primary:"Return to Admin",primaryTypographyProps:{variant:"body2"}})]})]}):e.jsx(q,{label:"Admin Mode",icon:e.jsx(_e,{}),color:"primary",size:"small",sx:{mb:1,display:"block"}})]}),e.jsx(Ee,{sx:{my:1}})]}),e.jsxs(ke,{button:!0,onClick:()=>{t("/profile"),w(!1)},children:[e.jsx(Ge,{children:e.jsx(Ze,{})}),e.jsx(fe,{primary:"Profile"})]}),e.jsxs(ke,{button:!0,onClick:()=>{b(),w(!1)},children:[e.jsx(Ge,{children:"ðŸ‘‹"}),e.jsx(fe,{primary:"Logout"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ee,{sx:{my:1}}),e.jsxs(ke,{button:!0,onClick:()=>{t("/login"),w(!1)},children:[e.jsx(Ge,{children:e.jsx(Ze,{})}),e.jsx(fe,{primary:"Login"})]}),e.jsxs(ke,{button:!0,onClick:()=>{t("/register"),w(!1)},children:[e.jsx(Ge,{children:e.jsx(Ze,{})}),e.jsx(fe,{primary:"Register"})]})]})]})]});return e.jsxs(e.Fragment,{children:[e.jsx(Fn,{position:"static",sx:{mb:4,boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:e.jsxs(Rn,{sx:{py:1,minHeight:{xs:56,sm:64},px:{xs:1,sm:2}},children:[e.jsx(d,{sx:{display:"flex",alignItems:"center",mr:{xs:1,sm:2}},children:e.jsx(d,{component:"img",src:"/logo.jpg",alt:"The Grassroots Hub Logo",sx:{height:50,width:50,borderRadius:"8px",objectFit:"cover",border:"2px solid rgba(255,255,255,0.2)",cursor:"pointer"},onClick:()=>t("/")})}),e.jsxs(d,{sx:{flexGrow:1,cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"flex-start",minWidth:0,mr:{xs:1,sm:2}},onClick:()=>t("/"),children:[e.jsx(n,{variant:"h6",component:"div",sx:{fontWeight:700,fontSize:{xs:"0.9rem",sm:"1.1rem",md:"1.25rem"},lineHeight:1.2,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"The Grassroots Hub"}),e.jsx(n,{variant:"caption",component:"div",sx:{fontSize:{xs:"0.65rem",sm:"0.75rem",md:"0.8rem"},opacity:.8,fontStyle:"italic",display:{xs:"none",sm:"block"},whiteSpace:"nowrap"},children:"Connect. Play. Develop"})]}),l&&e.jsx(d,{sx:{mr:{xs:.5,sm:1},flexShrink:0},children:e.jsxs(M,{variant:"outlined",size:"small",color:"warning",onClick:x,sx:{color:"white",borderColor:"rgba(255,255,255,0.5)",fontSize:{xs:"0.75rem",sm:"0.875rem"},px:{xs:1,sm:1.5},"&:hover":{borderColor:"white",backgroundColor:"rgba(255,255,255,0.1)"}},children:[e.jsxs(d,{component:"span",sx:{display:{xs:"none",sm:"inline"}},children:["Impersonating ",a?.role," â€¢ Click to Stop"]}),e.jsx(d,{component:"span",sx:{display:{xs:"inline",sm:"none"}},children:"Stop"})]})}),e.jsx(d,{sx:{display:"flex",alignItems:"center",gap:{xs:.5,sm:1},flexShrink:0,maxWidth:{xs:"calc(100vw - 280px)",sm:"calc(100vw - 350px)",md:"none"}},children:a?e.jsxs(e.Fragment,{children:[e.jsxs(d,{sx:{display:{xs:"none",md:"flex"},gap:.5},children:[f.map(g=>e.jsx(M,{color:"inherit",onClick:()=>{console.log("ðŸ” Navigation click:",g.path),t(g.path)},sx:{fontWeight:W(g.path)?700:500,borderRadius:2,px:1.5,minWidth:"auto",fontSize:"0.875rem","&:hover":{backgroundColor:"rgba(255,255,255,0.1)"}},children:g.label},g.path)),S.length>0&&e.jsx(M,{color:"inherit",onClick:m,endIcon:e.jsx(Mn,{}),sx:{borderRadius:2,px:1.5,minWidth:"auto",fontSize:"0.875rem","&:hover":{backgroundColor:"rgba(255,255,255,0.1)"}},children:"More"})]}),e.jsxs(d,{sx:{display:{xs:"none",md:"block"},ml:1},children:[e.jsx(he,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:k,color:"inherit",children:e.jsxs($r,{sx:{width:32,height:32,background:"linear-gradient(135deg, #1e3a8a 0%, #2563eb 100%)",fontWeight:700,fontSize:"0.875rem",border:"1px solid rgba(255,255,255,0.3)",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",transition:"all 0.2s ease-in-out","&:hover":{transform:"scale(1.05)",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"}},children:[a.firstName[0],a.lastName[0]]})}),e.jsxs(Xt,{id:"menu-appbar",anchorEl:s,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:!!s,onClose:I,children:[e.jsx(U,{onClick:()=>{t("/profile"),I()},children:"Profile"}),e.jsx(U,{onClick:b,children:"Logout"})]})]}),e.jsx(Xt,{id:"more-menu",anchorEl:v,anchorOrigin:{vertical:"bottom",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:!!v,onClose:p,PaperProps:{sx:{minWidth:200,maxWidth:280}},children:S.map(g=>e.jsx(U,{onClick:()=>{t(g.path),p()},sx:{fontWeight:W(g.path)?600:400,backgroundColor:W(g.path)?"action.selected":"transparent"},children:e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[g.icon,g.label]})},g.path))}),e.jsx(he,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:F,sx:{display:{xs:"block",md:"none"}},children:e.jsx(wr,{})})]}):e.jsxs(e.Fragment,{children:[e.jsx(d,{sx:{display:{xs:"none",md:"flex"},gap:1,mr:2},children:e.jsx(M,{color:"inherit",onClick:()=>t("/about"),sx:{fontWeight:W("/about")?700:500,borderRadius:2,px:2,"&:hover":{backgroundColor:"rgba(255,255,255,0.1)"}},children:"About Us"})}),e.jsx(M,{color:"inherit",onClick:()=>t("/login"),sx:{fontWeight:W("/login")?700:500,borderRadius:2,px:3,"&:hover":{backgroundColor:"rgba(255,255,255,0.1)"}},children:"Login"}),e.jsx(M,{variant:"contained",onClick:()=>t("/register"),sx:{fontWeight:600,borderRadius:2,px:3,background:"linear-gradient(135deg, #6366F1 0%, #8B5CF6 100%)","&:hover":{background:"linear-gradient(135deg, #4F46E5 0%, #7C3AED 100%)"}},children:"Register"}),e.jsx(he,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:F,sx:{display:{xs:"block",md:"none"}},children:e.jsx(wr,{})})]})})]})}),e.jsx(Kt,{variant:"temporary",anchor:"right",open:u,onClose:F,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",md:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:250}},children:R})]})},ee=({children:t,requireAuth:r=!0})=>{const{user:a,isLoading:o}=le(),l=tn();return o?e.jsx(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px"},children:e.jsx(xe,{})}):r&&!a?e.jsx(Rr,{to:"/login",state:{from:l},replace:!0}):!r&&a&&(l.pathname==="/login"||l.pathname==="/register")?e.jsx(Rr,{to:"/dashboard",replace:!0}):e.jsx(e.Fragment,{children:t})},es=()=>{const{storageWarning:t}=le(),[r,a]=h.useState(!1),[o,l]=h.useState("localStorage");if(h.useEffect(()=>{const v=ba.getStorageType();l(v),(v==="fallback"||v==="sessionStorage")&&a(!0)},[t]),o==="localStorage"&&!t)return null;const x=()=>{a(!1)},s=()=>{switch(o){case"fallback":return"error";case"sessionStorage":return"warning";default:return"info"}},j=()=>{switch(o){case"fallback":return e.jsx(er,{});case"sessionStorage":return e.jsx(er,{});default:return e.jsx(Rt,{})}},u=()=>{switch(o){case"fallback":return"Storage Blocked";case"sessionStorage":return"Limited Storage";default:return"Storage Info"}},w=()=>t||"Using alternative storage method due to browser restrictions.";return e.jsx(On,{open:r,anchorOrigin:{vertical:"top",horizontal:"center"},sx:{mt:8},children:e.jsxs(G,{severity:s(),icon:j(),action:e.jsx(he,{color:"inherit",size:"small",onClick:x,"aria-label":"close",children:e.jsx(Zt,{fontSize:"small"})}),sx:{minWidth:320,maxWidth:600},children:[e.jsx(Vr,{children:u()}),e.jsx(n,{variant:"body2",children:w()}),o==="fallback"&&e.jsx(d,{sx:{mt:1},children:e.jsx(n,{variant:"caption",display:"block",children:"Tip: Try refreshing the page or disable tracking prevention for this site."})})]})})},ts=({position:t={bottom:80,right:16},mobileOnly:r=!0,useSpeedDial:a=!0,showOnLoginPage:o=!1})=>{const l=lr(),{user:x,impersonateUser:s,stopImpersonation:j,isImpersonating:u}=le(),[w,v]=h.useState(!1),[P,k]=h.useState(!1),I=je(l.breakpoints.down("md"));if(r&&!I||(!x||x.role!=="Admin"&&!u)&&!o)return null;const m=[{type:"Coach",label:"Coach",icon:e.jsx(tr,{}),description:"Test team management and player recruitment features",color:"primary"},{type:"Player",label:"Player",icon:e.jsx(Ze,{}),description:"Test player profile and team search features",color:"secondary"},{type:"Parent/Guardian",label:"Parent",icon:e.jsx(Et,{}),description:"Test parent features for managing children",color:"success"}],p=S=>{s(S),v(!1)},F=()=>{j(),v(!1)},W=(()=>{if(!u)return{label:"Admin",color:"warning"};const S=m.find(O=>O.type===x?.role);return S?{label:S.label,color:S.color}:{label:x?.role||"Unknown",color:"default"}})(),f=[{icon:e.jsx(tr,{}),name:"Test as Coach",onClick:()=>p("Coach"),disabled:u&&x?.role==="Coach"},{icon:e.jsx(Ze,{}),name:"Test as Player",onClick:()=>p("Player"),disabled:u&&x?.role==="Player"},{icon:e.jsx(Et,{}),name:"Test as Parent",onClick:()=>p("Parent/Guardian"),disabled:u&&x?.role==="Parent/Guardian"},...u?[{icon:e.jsx(bt,{}),name:"Return to Admin",onClick:F,disabled:!1}]:[]];return a&&I?e.jsxs(e.Fragment,{children:[e.jsxs(Nn,{ariaLabel:"Admin User Switcher",sx:{position:"fixed",...t,zIndex:1e3},icon:e.jsx(Mt,{color:"secondary",variant:"dot",invisible:!u,children:e.jsx(zn,{icon:u?e.jsx(yt,{}):e.jsx(_e,{}),openIcon:e.jsx(ur,{})})}),onClose:()=>k(!1),onOpen:()=>k(!0),open:P,direction:"up",FabProps:{color:u?"secondary":"primary",size:"medium"},children:[f.map(S=>e.jsx(Sr,{icon:S.icon,tooltipTitle:S.name,onClick:S.onClick,FabProps:{disabled:S.disabled,size:"small",color:S.disabled?"default":"primary"}},S.name)),e.jsx(Sr,{icon:e.jsx(Bn,{}),tooltipTitle:"More Options",onClick:()=>{k(!1),v(!0)},FabProps:{size:"small"}})]}),e.jsx(Kt,{anchor:"bottom",open:w,onClose:()=>v(!1),PaperProps:{sx:{borderTopLeftRadius:16,borderTopRightRadius:16,maxHeight:"85vh"}},children:e.jsxs(d,{sx:{p:3,minHeight:200},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(_e,{color:"primary",sx:{fontSize:28}}),e.jsxs(d,{children:[e.jsx(n,{variant:"h6",component:"h2",sx:{fontWeight:600},children:"Admin Testing Panel"}),e.jsx(n,{variant:"caption",color:"text.secondary",children:"Switch user types instantly"})]})]}),e.jsx(he,{onClick:()=>v(!1),size:"small",sx:{bgcolor:"grey.100","&:hover":{bgcolor:"grey.200"}},children:e.jsx(Zt,{})})]}),e.jsxs(d,{sx:{mb:3,p:2,bgcolor:"grey.50",borderRadius:2},children:[e.jsx(n,{variant:"body2",color:"text.secondary",gutterBottom:!0,sx:{fontWeight:500},children:"Current Testing Mode:"}),e.jsx(q,{label:`${W.label} View`,color:W.color,icon:u?e.jsx(yt,{}):e.jsx(_e,{}),sx:{mb:2,fontWeight:500},size:"medium"}),u&&e.jsx(G,{severity:"info",sx:{mt:1},children:e.jsxs(n,{variant:"body2",children:["You're testing as a ",e.jsx("strong",{children:x?.role}),". All features behave as if you're that user type."]})})]}),e.jsx(Ee,{sx:{my:2}}),e.jsx(n,{variant:"subtitle1",color:"text.primary",gutterBottom:!0,sx:{fontWeight:600,mb:2},children:"Switch User Type:"}),e.jsx(ct,{dense:!0,sx:{mb:2},children:m.map(S=>e.jsx(ke,{disablePadding:!0,sx:{mb:1},children:e.jsxs(Tr,{onClick:()=>p(S.type),disabled:u&&x?.role===S.type,sx:{borderRadius:2,p:2,bgcolor:u&&x?.role===S.type?"primary.50":"transparent",border:"1px solid",borderColor:u&&x?.role===S.type?"primary.200":"grey.200","&:hover":{bgcolor:"grey.50"}},children:[e.jsx(Ge,{sx:{minWidth:48},children:e.jsx(d,{sx:{p:1,borderRadius:1,bgcolor:`${S.color}.100`,color:`${S.color}.600`},children:S.icon})}),e.jsx(fe,{primary:e.jsx(n,{variant:"subtitle2",sx:{fontWeight:600},children:S.label}),secondary:e.jsx(n,{variant:"caption",color:"text.secondary",children:S.description})}),u&&x?.role===S.type&&e.jsx(q,{size:"small",label:"Active",color:S.color,sx:{fontWeight:500}})]})},S.type))}),e.jsx(Ee,{sx:{my:2}}),e.jsxs(d,{sx:{display:"flex",gap:1.5,flexDirection:"column"},children:[u&&e.jsx(M,{variant:"contained",color:"error",onClick:F,startIcon:e.jsx(bt,{}),fullWidth:!0,sx:{py:1.5,fontWeight:600},children:"Return to Admin Mode"}),e.jsx(M,{variant:"outlined",onClick:()=>v(!1),fullWidth:!0,sx:{py:1.5},children:"Close Panel"})]}),e.jsx(d,{sx:{mt:3,p:2,bgcolor:"info.50",borderRadius:2},children:e.jsx(n,{variant:"caption",color:"info.600",sx:{display:"block",textAlign:"center",fontWeight:500},children:"ðŸ’¡ Tip: Use the floating menu for quick user switching, or this panel for detailed testing options"})})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx(hr,{title:u?`Testing as ${x?.role}`:"Admin Testing Panel",placement:"left",children:e.jsx(Mt,{color:"secondary",variant:"dot",invisible:!u,children:e.jsx(xr,{color:u?"secondary":"primary","aria-label":"admin switcher",onClick:()=>v(!0),sx:{position:"fixed",...t,zIndex:1e3,bgcolor:u?"secondary.main":"primary.main","&:hover":{bgcolor:u?"secondary.dark":"primary.dark",transform:"scale(1.1)"},transition:"all 0.2s ease-in-out",boxShadow:3},size:"medium",children:u?e.jsx(yt,{}):e.jsx(_e,{})})})}),e.jsx(Kt,{anchor:"bottom",open:w,onClose:()=>v(!1),PaperProps:{sx:{borderTopLeftRadius:16,borderTopRightRadius:16,maxHeight:"85vh"}},children:e.jsxs(d,{sx:{p:3,minHeight:200},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(_e,{color:"primary",sx:{fontSize:28}}),e.jsxs(d,{children:[e.jsx(n,{variant:"h6",component:"h2",sx:{fontWeight:600},children:"Admin Testing Panel"}),e.jsx(n,{variant:"caption",color:"text.secondary",children:"Switch user types instantly"})]})]}),e.jsx(he,{onClick:()=>v(!1),size:"small",sx:{bgcolor:"grey.100","&:hover":{bgcolor:"grey.200"}},children:e.jsx(Zt,{})})]}),e.jsxs(d,{sx:{mb:3,p:2,bgcolor:"grey.50",borderRadius:2},children:[e.jsx(n,{variant:"body2",color:"text.secondary",gutterBottom:!0,sx:{fontWeight:500},children:"Current Testing Mode:"}),e.jsx(q,{label:`${W.label} View`,color:W.color,icon:u?e.jsx(yt,{}):e.jsx(_e,{}),sx:{mb:2,fontWeight:500},size:"medium"}),u&&e.jsx(G,{severity:"info",sx:{mt:1},children:e.jsxs(n,{variant:"body2",children:["You're testing as a ",e.jsx("strong",{children:x?.role}),". All features behave as if you're that user type."]})})]}),e.jsx(Ee,{sx:{my:2}}),e.jsx(n,{variant:"subtitle1",color:"text.primary",gutterBottom:!0,sx:{fontWeight:600,mb:2},children:"Switch User Type:"}),e.jsx(ct,{dense:!0,sx:{mb:2},children:m.map(S=>e.jsx(ke,{disablePadding:!0,sx:{mb:1},children:e.jsxs(Tr,{onClick:()=>p(S.type),disabled:u&&x?.role===S.type,sx:{borderRadius:2,p:2,bgcolor:u&&x?.role===S.type?"primary.50":"transparent",border:"1px solid",borderColor:u&&x?.role===S.type?"primary.200":"grey.200","&:hover":{bgcolor:"grey.50"}},children:[e.jsx(Ge,{sx:{minWidth:48},children:e.jsx(d,{sx:{p:1,borderRadius:1,bgcolor:`${S.color}.100`,color:`${S.color}.600`},children:S.icon})}),e.jsx(fe,{primary:e.jsx(n,{variant:"subtitle2",sx:{fontWeight:600},children:S.label}),secondary:e.jsx(n,{variant:"caption",color:"text.secondary",children:S.description})}),u&&x?.role===S.type&&e.jsx(q,{size:"small",label:"Active",color:S.color,sx:{fontWeight:500}})]})},S.type))}),e.jsx(Ee,{sx:{my:2}}),e.jsxs(d,{sx:{display:"flex",gap:1.5,flexDirection:"column"},children:[u&&e.jsx(M,{variant:"contained",color:"error",onClick:F,startIcon:e.jsx(bt,{}),fullWidth:!0,sx:{py:1.5,fontWeight:600},children:"Return to Admin Mode"}),e.jsx(M,{variant:"outlined",onClick:()=>v(!1),fullWidth:!0,sx:{py:1.5},children:"Close Panel"})]}),e.jsx(d,{sx:{mt:3,p:2,bgcolor:"info.50",borderRadius:2},children:e.jsx(n,{variant:"caption",color:"info.600",sx:{display:"block",textAlign:"center",fontWeight:500},children:"ðŸ’¡ Tip: Switch between user types to test different app experiences without logging out"})})]})})]})};class rs extends h.Component{constructor(){super(...arguments);Cr(this,"state",{hasError:!1})}static getDerivedStateFromError(a){return console.error("ðŸš¨ ErrorBoundary caught an error:",a),{hasError:!0,error:a}}componentDidCatch(a,o){console.error("ðŸš¨ ErrorBoundary - Uncaught error:",a,o),this.setState({error:a,errorInfo:o})}render(){return this.state.hasError?e.jsxs(d,{sx:{p:3,maxWidth:600,mx:"auto",mt:4},children:[e.jsxs(G,{severity:"error",sx:{mb:2},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Something went wrong"}),this.state.error&&e.jsxs(n,{variant:"body2",sx:{mb:1},children:[e.jsx("strong",{children:"Error:"})," ",this.state.error.message]}),this.state.errorInfo&&e.jsxs("details",{style:{whiteSpace:"pre-wrap",fontSize:"0.8rem"},children:[e.jsx("summary",{children:"Error Details"}),this.state.error&&this.state.error.stack,this.state.errorInfo.componentStack]})]}),e.jsx(M,{variant:"contained",onClick:()=>this.setState({hasError:!1,error:void 0,errorInfo:void 0}),children:"Try again"})]}):this.props.children}}const ns=()=>{const{user:t,isImpersonating:r,originalUser:a}=le();return h.useEffect(()=>{console.log("ðŸ” AuthDebugger - State Update:"),console.log("ðŸ‘¤ Current user:",t),console.log("ðŸ” Is impersonating:",r),console.log("ðŸ‘¤ Original user:",a),console.log("---")},[t,r,a]),null},as=()=>{const t=Ne(),{user:r}=le(),{isMobile:a}=dn(),{containerSpacing:o,sectionSpacing:l}=un(),x=[{icon:e.jsx(Un,{fontSize:"large",color:"primary"}),title:"For Coaches",description:"Post team vacancies and find talented players for your grassroots football team.",action:"Post Vacancy",path:"/post-advert"},{icon:e.jsx(Hr,{fontSize:"large",color:"primary"}),title:"For Players & Parents",description:"Find the perfect team that matches your playing style and aspirations.",action:"Find Teams",path:"/search"},{icon:e.jsx(cr,{fontSize:"large",color:"primary"}),title:"Smart Search",description:"Filter by league, age group, position, and location to find exactly what you need.",action:"Start Searching",path:"/search"},{icon:e.jsx(qr,{fontSize:"large",color:"primary"}),title:"Alert System",description:"Set up alerts and get notified when new opportunities match your criteria.",action:"Set Alerts",path:r?"/dashboard":"/register"}];return e.jsxs(ae,{maxWidth:"lg",children:[e.jsxs(d,{sx:{textAlign:"center",py:a?4:10,px:a?2:4,background:"linear-gradient(135deg, #FAFAFA 0%, #F5F5F5 100%)",borderRadius:4,mb:l},children:[e.jsx(d,{component:"img",src:"/logo.jpg",alt:"The Grassroots Hub Logo",sx:{height:120,width:120,borderRadius:"16px",objectFit:"cover",mb:3,mx:"auto",display:"block",border:"4px solid rgba(255,255,255,0.8)",boxShadow:"0 8px 32px rgba(0,0,0,0.1)"}}),e.jsx(n,{variant:"h1",component:"h1",gutterBottom:!0,sx:{background:"linear-gradient(135deg, #1e3a8a 0%, #2563eb 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",mb:2},children:"The Grassroots Hub"}),e.jsx(n,{variant:"h4",component:"h2",gutterBottom:!0,sx:{background:"linear-gradient(135deg, #1f2937 0%, #374151 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",fontWeight:600,mb:3,fontStyle:"italic"},children:"Connect. Play. Develop"}),e.jsx(n,{variant:"h5",component:"h3",gutterBottom:!0,color:"text.secondary",sx:{mb:6,maxWidth:"600px",mx:"auto"},children:"Connecting football players with grassroots teams across the community"}),e.jsx(d,{sx:{display:"flex",gap:3,justifyContent:"center",flexWrap:"wrap"},children:r?e.jsxs(e.Fragment,{children:[e.jsx(M,{variant:"contained",size:"large",onClick:()=>t("/dashboard"),sx:{px:6,py:2,fontSize:"1.1rem"},children:"Go to Dashboard"}),e.jsx(M,{variant:"outlined",size:"large",onClick:()=>t("/search"),sx:{px:6,py:2,fontSize:"1.1rem"},children:"Search Now"})]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{variant:"contained",size:"large",onClick:()=>t("/register"),sx:{px:6,py:2,fontSize:"1.1rem"},children:"Get Started"}),e.jsx(M,{variant:"outlined",size:"large",onClick:()=>t("/login"),sx:{px:6,py:2,fontSize:"1.1rem"},children:"Sign In"})]})})]}),e.jsxs(d,{sx:{py:8},children:[e.jsx(n,{variant:"h3",component:"h2",textAlign:"center",gutterBottom:!0,sx:{mb:8,fontWeight:700},children:"How It Works"}),e.jsx(i,{container:!0,spacing:o,children:x.map((s,j)=>e.jsx(i,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(de,{sx:{height:"100%",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #FFFFFF 0%, #F8FAFC 100%)",border:"2px solid transparent",backgroundClip:"padding-box","&:hover":{borderColor:"primary.main",transform:"translateY(-4px)"}},children:[e.jsxs(ue,{sx:{flexGrow:1,textAlign:"center",p:4},children:[e.jsx(d,{sx:{mb:3,p:2,borderRadius:"50%",background:"linear-gradient(135deg, #1e3a8a 0%, #2563eb 100%)",display:"inline-flex",color:"white"},children:s.icon}),e.jsx(n,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontWeight:600},children:s.title}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{lineHeight:1.6},children:s.description})]}),e.jsx(vt,{sx:{justifyContent:"center",pb:3},children:e.jsx(M,{size:"medium",onClick:()=>t(s.path),variant:"contained",sx:{borderRadius:3},children:s.action})})]})},j))})]}),e.jsxs(re,{sx:{p:6,textAlign:"center",background:"linear-gradient(135deg, #0f172a 0%, #1e293b 100%)",color:"white",mb:8,borderRadius:4},children:[e.jsx(n,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:4},children:"Join Our Growing Community"}),e.jsxs(i,{container:!0,spacing:o,sx:{mt:2},children:[e.jsxs(i,{item:!0,xs:12,sm:4,children:[e.jsx(n,{variant:"h2",component:"div",sx:{fontWeight:800,background:"linear-gradient(135deg, #1e3a8a 0%, #2563eb 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"500+"}),e.jsx(n,{variant:"h6",sx:{mt:1},children:"Active Teams"})]}),e.jsxs(i,{item:!0,xs:12,sm:4,children:[e.jsx(n,{variant:"h2",component:"div",sx:{fontWeight:800,background:"linear-gradient(135deg, #1e3a8a 0%, #2563eb 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"1,200+"}),e.jsx(n,{variant:"h6",sx:{mt:1},children:"Registered Players"})]}),e.jsxs(i,{item:!0,xs:12,sm:4,children:[e.jsx(n,{variant:"h2",component:"div",sx:{fontWeight:800,background:"linear-gradient(135deg, #1e3a8a 0%, #2563eb 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"300+"}),e.jsx(n,{variant:"h6",sx:{mt:1},children:"Successful Matches"})]})]})]}),!r&&e.jsxs(d,{sx:{textAlign:"center",py:6},children:[e.jsx(n,{variant:"h4",component:"h2",gutterBottom:!0,children:"Ready to Get Started?"}),e.jsx(n,{variant:"h6",color:"text.secondary",sx:{mb:4},children:"Join The Grassroots Hub today and connect with your local football community"}),e.jsx(M,{variant:"contained",size:"large",onClick:()=>t("/register"),sx:{px:6,py:2},children:"Sign Up Now"})]})]})},ss=()=>{const[t,r]=h.useState(st);h.useEffect(()=>{a()},[]);const a=async()=>{try{const o=localStorage.getItem("aboutContent");if(o){const l=JSON.parse(o);r(l)}}catch(o){console.error("Failed to load about content:",o),r(st)}};return e.jsxs(ae,{maxWidth:"lg",sx:{py:4},children:[e.jsxs(d,{sx:{textAlign:"center",mb:6},children:[e.jsx(n,{variant:"h2",component:"h1",gutterBottom:!0,sx:{fontWeight:"bold",color:"primary.main"},children:t.title}),e.jsx(n,{variant:"h5",color:"textSecondary",sx:{maxWidth:800,mx:"auto"},children:t.subtitle})]}),e.jsx(re,{elevation:3,sx:{p:4,mb:6,borderRadius:3},children:e.jsxs(i,{container:!0,spacing:4,alignItems:"center",children:[e.jsxs(i,{item:!0,xs:12,md:4,sx:{textAlign:"center"},children:[e.jsx($r,{sx:{width:150,height:150,mx:"auto",mb:2,bgcolor:"primary.main",fontSize:"3rem"},children:"CG"}),e.jsx(n,{variant:"h4",gutterBottom:!0,children:t.founderName}),e.jsx(n,{variant:"subtitle1",color:"textSecondary",children:t.founderTitle})]}),e.jsxs(i,{item:!0,xs:12,md:8,children:[e.jsx(n,{variant:"h4",gutterBottom:!0,sx:{color:"primary.main"},children:"My Story"}),e.jsx(n,{variant:"body1",paragraph:!0,sx:{fontSize:"1.1rem",lineHeight:1.8},children:t.personalStory.paragraph1}),e.jsx(n,{variant:"body1",paragraph:!0,sx:{fontSize:"1.1rem",lineHeight:1.8},children:t.personalStory.paragraph2}),e.jsx(n,{variant:"body1",paragraph:!0,sx:{fontSize:"1.1rem",lineHeight:1.8},children:t.personalStory.paragraph3})]})]})}),e.jsxs(i,{container:!0,spacing:4,sx:{mb:6},children:[e.jsx(i,{item:!0,xs:12,md:6,children:e.jsx(de,{sx:{height:"100%",borderRadius:3},elevation:2,children:e.jsxs(ue,{sx:{p:4},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(Ft,{sx:{fontSize:40,color:"primary.main",mr:2}}),e.jsx(n,{variant:"h4",sx:{color:"primary.main"},children:"Our Mission"})]}),e.jsx(n,{variant:"body1",sx:{fontSize:"1.1rem",lineHeight:1.8},children:t.mission})]})})}),e.jsx(i,{item:!0,xs:12,md:6,children:e.jsx(de,{sx:{height:"100%",borderRadius:3},elevation:2,children:e.jsxs(ue,{sx:{p:4},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(_n,{sx:{fontSize:40,color:"primary.main",mr:2}}),e.jsx(n,{variant:"h4",sx:{color:"primary.main"},children:"Our Vision"})]}),e.jsx(n,{variant:"body1",sx:{fontSize:"1.1rem",lineHeight:1.8},children:t.vision})]})})})]}),e.jsxs(re,{elevation:2,sx:{p:4,mb:6,borderRadius:3,bgcolor:"grey.50"},children:[e.jsx(n,{variant:"h4",gutterBottom:!0,sx:{textAlign:"center",color:"primary.main",mb:4},children:"What Makes The Grassroots Hub Different"}),e.jsxs(i,{container:!0,spacing:4,children:[e.jsx(i,{item:!0,xs:12,md:4,children:e.jsxs(d,{sx:{textAlign:"center"},children:[e.jsx(Ke,{sx:{fontSize:60,color:"primary.main",mb:2}}),e.jsx(n,{variant:"h6",gutterBottom:!0,children:t.differentiators.footballPeople.title}),e.jsx(n,{variant:"body2",color:"textSecondary",children:t.differentiators.footballPeople.description})]})}),e.jsx(i,{item:!0,xs:12,md:4,children:e.jsxs(d,{sx:{textAlign:"center"},children:[e.jsx(Gn,{sx:{fontSize:60,color:"primary.main",mb:2}}),e.jsx(n,{variant:"h6",gutterBottom:!0,children:t.differentiators.modernTechnology.title}),e.jsx(n,{variant:"body2",color:"textSecondary",children:t.differentiators.modernTechnology.description})]})}),e.jsx(i,{item:!0,xs:12,md:4,children:e.jsxs(d,{sx:{textAlign:"center"},children:[e.jsx(Ur,{sx:{fontSize:60,color:"primary.main",mb:2}}),e.jsx(n,{variant:"h6",gutterBottom:!0,children:t.differentiators.communityFocused.title}),e.jsx(n,{variant:"body2",color:"textSecondary",children:t.differentiators.communityFocused.description})]})})]})]}),e.jsx(de,{elevation:3,sx:{borderRadius:3},children:e.jsxs(ue,{sx:{p:4},children:[e.jsx(n,{variant:"h4",gutterBottom:!0,sx:{color:"primary.main",textAlign:"center",mb:3},children:"A Personal Message"}),e.jsx(Ee,{sx:{mb:3,width:"60%",mx:"auto"}}),e.jsxs(n,{variant:"body1",sx:{fontSize:"1.1rem",lineHeight:1.8,fontStyle:"italic",textAlign:"center"},children:['"',t.personalMessage,'"']}),e.jsx(d,{sx:{textAlign:"center",mt:3},children:e.jsxs(n,{variant:"h6",sx:{color:"primary.main"},children:["- ",t.founderName,", Founder"]})})]})}),e.jsxs(d,{sx:{textAlign:"center",mt:6,p:4,bgcolor:"primary.main",color:"white",borderRadius:3},children:[e.jsx(n,{variant:"h4",gutterBottom:!0,children:t.callToAction.title}),e.jsx(n,{variant:"body1",sx:{fontSize:"1.1rem",mb:3,opacity:.9},children:t.callToAction.description}),e.jsx(n,{variant:"h6",sx:{fontWeight:"bold"},children:t.callToAction.footer})]})]})},is=({compact:t=!1,showTitle:r=!0,title:a="Quick Test Modes",showForTesting:o=!1})=>{const{user:l,impersonateUser:x,stopImpersonation:s,isImpersonating:j}=le();if(!o&&(!l||l.role!=="Admin"&&!j))return null;const u=[{type:"Coach",label:"Coach",icon:e.jsx(tr,{}),color:"#6366F1",description:"Team management"},{type:"Player",label:"Player",icon:e.jsx(Ze,{}),color:"#8B5CF6",description:"Player profile"},{type:"Parent/Guardian",label:"Parent",icon:e.jsx(Et,{}),color:"#64748B",description:"Child management"}],w=P=>{console.log("ðŸ”„ QuickUserSwitcher: handleUserTypeSwitch called with:",P),console.log("ðŸ‘¤ Current user in QuickUserSwitcher:",l),console.log("ðŸ” Is impersonating in QuickUserSwitcher:",j);try{x(P),console.log("âœ… QuickUserSwitcher: impersonateUser called successfully")}catch(k){console.error("âŒ QuickUserSwitcher: Error calling impersonateUser:",k)}},v=()=>{console.log("ðŸ”„ QuickUserSwitcher: handleStopImpersonation called");try{s(),console.log("âœ… QuickUserSwitcher: stopImpersonation called successfully")}catch(P){console.error("âŒ QuickUserSwitcher: Error calling stopImpersonation:",P)}};return e.jsxs(re,{elevation:2,sx:{p:{xs:2,sm:3},mt:2,borderRadius:2,background:"linear-gradient(135deg, rgba(99, 102, 241, 0.05) 0%, rgba(139, 92, 246, 0.05) 100%)"},children:[r&&e.jsxs(d,{sx:{mb:2,textAlign:"center"},children:[e.jsxs(n,{variant:"h6",color:"primary",sx:{fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e.jsx(_e,{}),a]}),e.jsx(n,{variant:"caption",color:"text.secondary",children:j?`Currently testing as ${l?.role}`:"Switch user types for testing"})]}),j&&e.jsx(d,{sx:{mb:2,textAlign:"center"},children:e.jsx(q,{label:`Testing as ${l?.role}`,color:"secondary",size:"small",sx:{fontWeight:500}})}),e.jsx(i,{container:!0,spacing:t?1:2,children:u.map(P=>e.jsx(i,{item:!0,xs:t?4:12,sm:t?4:6,md:4,children:e.jsx(M,{variant:j&&l?.role===P.type?"contained":"outlined",fullWidth:!0,onClick:()=>w(P.type),disabled:j&&l?.role===P.type,startIcon:P.icon,sx:{py:t?1:1.5,px:1,borderColor:P.color,color:j&&l?.role===P.type?"white":P.color,bgcolor:j&&l?.role===P.type?P.color:"transparent","&:hover":{bgcolor:j&&l?.role===P.type?P.color:`${P.color}10`,borderColor:P.color},"&:disabled":{bgcolor:P.color,color:"white"},flexDirection:t?"column":"row",gap:t?.5:1,minHeight:t?80:48},children:e.jsxs(d,{sx:{display:"flex",flexDirection:t?"column":"row",alignItems:"center",gap:t?.5:1},children:[e.jsx(n,{variant:t?"caption":"button",sx:{fontWeight:600},children:P.label}),!t&&e.jsx(n,{variant:"caption",color:"inherit",sx:{opacity:.8},children:P.description})]})})},P.type))}),j&&e.jsx(d,{sx:{mt:2,textAlign:"center"},children:e.jsx(M,{variant:"contained",color:"error",onClick:v,startIcon:e.jsx(bt,{}),size:"small",sx:{fontWeight:600},children:"Return to Admin"})}),o&&e.jsx(n,{variant:"caption",color:"text.secondary",sx:{mt:2,display:"block",textAlign:"center",fontStyle:"italic"},children:"ðŸ’¡ Admin feature: Test the app as different user types"})]})},os=()=>{const t=Ne(),{login:r,isLoading:a}=le(),[o,l]=h.useState({email:"",password:""}),[x,s]=h.useState(""),[j,u]=h.useState(!1),w=P=>{l({...o,[P.target.name]:P.target.value}),s("")},v=async P=>{if(P.preventDefault(),s(""),!o.email||!o.password){s("Please fill in all fields");return}try{await r(o.email,o.password)?t("/dashboard"):s("Invalid email or password")}catch(k){k.requiresVerification?(s("Please verify your email before logging in. Check your email for a verification link."),setTimeout(()=>{t("/email-verification-pending")},2e3)):s("Invalid email or password")}};return e.jsx(ae,{component:"main",maxWidth:"sm",children:e.jsxs(d,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mt:8},children:[e.jsxs(re,{elevation:3,sx:{p:4,width:"100%"},children:[e.jsx(n,{component:"h1",variant:"h4",align:"center",gutterBottom:!0,children:"Sign In"}),e.jsx(n,{variant:"body1",align:"center",color:"text.secondary",sx:{mb:3},children:"Welcome back to The Grassroots Hub"}),x&&e.jsx(G,{severity:"error",sx:{mb:2},children:x}),e.jsxs(d,{component:"form",onSubmit:v,sx:{mt:1},children:[e.jsx(A,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:o.email,onChange:w}),e.jsx(A,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:j?"text":"password",id:"password",autoComplete:"current-password",value:o.password,onChange:w,InputProps:{endAdornment:e.jsx(wt,{position:"end",children:e.jsx(he,{"aria-label":"toggle password visibility",onClick:()=>u(!j),edge:"end",children:j?e.jsx(St,{}):e.jsx(dt,{})})})}}),e.jsx(M,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2,py:1.5},disabled:a,children:a?e.jsx(xe,{size:24}):"Sign In"}),e.jsx(d,{textAlign:"center",sx:{mb:2},children:e.jsx(ut,{component:"button",variant:"body2",onClick:()=>t("/forgot-password"),type:"button",children:"Forgot your password?"})}),e.jsx(d,{textAlign:"center",children:e.jsx(ut,{component:"button",variant:"body2",onClick:()=>t("/register"),type:"button",children:"Don't have an account? Sign Up"})})]})]}),e.jsx(is,{compact:!0,showTitle:!0,title:"Admin Testing Panel",showForTesting:!0})]})})},ls=()=>{const t=Ne(),{register:r,isLoading:a}=le(),[o,l]=h.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",role:"",dateOfBirth:""}),[x,s]=h.useState(""),[j,u]=h.useState(!1),[w,v]=h.useState(!1),[P,k]=h.useState(""),I=b=>{const W=new Date,f=new Date(b);let S=W.getFullYear()-f.getFullYear();const O=W.getMonth()-f.getMonth();return(O<0||O===0&&W.getDate()<f.getDate())&&S--,S},m=b=>{const{name:W,value:f}=b.target;if(l({...o,[W]:f}),s(""),k(""),W==="dateOfBirth"&&o.role==="Player"&&f){const S=I(f);S<16&&k(`Players under 16 (age ${S}) must be registered by a parent or guardian. Please select "Parent/Guardian" as your role instead.`)}},p=b=>{const W=b.target.value;if(l({...o,role:W}),s(""),k(""),W==="Player"&&o.dateOfBirth){const f=I(o.dateOfBirth);f<16&&k(`Players under 16 (age ${f}) must be registered by a parent or guardian. Please select "Parent/Guardian" as your role instead.`)}},F=async b=>{if(b.preventDefault(),s(""),!o.firstName||!o.lastName||!o.email||!o.password||!o.role){s("Please fill in all fields");return}if(o.role==="Player"&&!o.dateOfBirth){s("Date of birth is required for player registration");return}if(o.password!==o.confirmPassword){s("Passwords do not match");return}if(o.password.length<6){s("Password must be at least 6 characters long");return}if(o.role==="Player"&&o.dateOfBirth){const f=I(o.dateOfBirth);if(f<16){s(`Players under 16 (age ${f}) must be registered by a parent or guardian. Please select "Parent/Guardian" as your role.`);return}}const W={firstName:o.firstName,lastName:o.lastName,email:o.email,role:o.role,password:o.password};o.role==="Player"&&o.dateOfBirth&&(W.dateOfBirth=o.dateOfBirth);try{await r(W)?t("/email-verification-pending"):s("Registration failed. Please try again.")}catch(f){f.response?.data?.ageRestriction?s(f.response.data.error):s(f.response?.data?.error||"Registration failed. Please try again.")}};return e.jsx(ae,{component:"main",maxWidth:"sm",children:e.jsx(d,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mt:8},children:e.jsxs(re,{elevation:3,sx:{p:4,width:"100%"},children:[e.jsx(n,{component:"h1",variant:"h4",align:"center",gutterBottom:!0,children:"Create Account"}),e.jsx(n,{variant:"body1",align:"center",color:"text.secondary",sx:{mb:3},children:"Join The Grassroots Hub community"}),x&&e.jsx(G,{severity:"error",sx:{mb:2},children:x}),e.jsxs(d,{component:"form",onSubmit:F,sx:{mt:1},children:[e.jsxs(d,{sx:{display:"flex",gap:2},children:[e.jsx(A,{margin:"normal",required:!0,fullWidth:!0,id:"firstName",label:"First Name",name:"firstName",autoComplete:"given-name",autoFocus:!0,value:o.firstName,onChange:m}),e.jsx(A,{margin:"normal",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"family-name",value:o.lastName,onChange:m})]}),e.jsx(A,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:o.email,onChange:m}),e.jsxs(X,{fullWidth:!0,margin:"normal",required:!0,children:[e.jsx(K,{id:"role-label",children:"I am a"}),e.jsxs(J,{labelId:"role-label",id:"role",value:o.role,label:"I am a",onChange:p,children:[e.jsx(U,{value:"Coach",children:"Coach"}),e.jsx(U,{value:"Player",children:"Player"}),e.jsx(U,{value:"Parent/Guardian",children:"Parent/Guardian"})]})]}),o.role==="Player"&&e.jsxs(e.Fragment,{children:[e.jsx(A,{margin:"normal",required:!0,fullWidth:!0,name:"dateOfBirth",label:"Date of Birth",type:"date",id:"dateOfBirth",value:o.dateOfBirth,onChange:m,InputLabelProps:{shrink:!0},inputProps:{max:new Date().toISOString().split("T")[0]}}),P&&e.jsx(G,{severity:"warning",sx:{mt:1},children:P})]}),e.jsx(A,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:j?"text":"password",id:"password",autoComplete:"new-password",value:o.password,onChange:m,InputProps:{endAdornment:e.jsx(wt,{position:"end",children:e.jsx(he,{"aria-label":"toggle password visibility",onClick:()=>u(!j),edge:"end",children:j?e.jsx(St,{}):e.jsx(dt,{})})})}}),e.jsx(A,{margin:"normal",required:!0,fullWidth:!0,name:"confirmPassword",label:"Confirm Password",type:w?"text":"password",id:"confirmPassword",value:o.confirmPassword,onChange:m,InputProps:{endAdornment:e.jsx(wt,{position:"end",children:e.jsx(he,{"aria-label":"toggle confirm password visibility",onClick:()=>v(!w),edge:"end",children:w?e.jsx(St,{}):e.jsx(dt,{})})})}}),e.jsx(M,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2,py:1.5},disabled:a,children:a?e.jsx(xe,{size:24}):"Create Account"}),e.jsx(d,{textAlign:"center",children:e.jsx(ut,{component:"button",variant:"body2",onClick:()=>t("/login"),type:"button",children:"Already have an account? Sign In"})})]})]})})})},cs=()=>{const t=Ne(),[r,a]=h.useState(!1),[o,l]=h.useState(""),[x,s]=h.useState(""),j=async()=>{a(!0),l(""),s("");const w=localStorage.getItem("pendingVerificationEmail");if(!w){s("Email address not found. Please try registering again."),a(!1);return}try{await nn.resendVerification({email:w}),l("Verification email sent successfully! Please check your email.")}catch(v){s(v.response?.data?.error||"Failed to resend verification email")}finally{a(!1)}},u=()=>{localStorage.removeItem("pendingVerificationEmail"),t("/login")};return e.jsx(ae,{component:"main",maxWidth:"sm",children:e.jsx(d,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsx(re,{elevation:3,sx:{padding:4,width:"100%"},children:e.jsxs(d,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(n,{component:"h1",variant:"h4",sx:{mb:2,color:"primary.main"},children:"Verify Your Email"}),e.jsx(n,{variant:"body1",sx:{mb:3,textAlign:"center"},children:"We've sent a verification email to your email address. Please check your email and click the verification link to activate your account."}),e.jsx(G,{severity:"info",sx:{mb:3,width:"100%"},children:e.jsxs(n,{variant:"body2",children:[e.jsx("strong",{children:"Important:"})," You must verify your email before you can log in to your account. If you don't see the email, please check your spam/junk folder."]})}),o&&e.jsx(G,{severity:"success",sx:{mb:2,width:"100%"},children:o}),x&&e.jsx(G,{severity:"error",sx:{mb:2,width:"100%"},children:x}),e.jsxs(d,{sx:{display:"flex",flexDirection:"column",gap:2,width:"100%"},children:[e.jsx(M,{variant:"outlined",onClick:j,disabled:r,sx:{py:1.5},children:r?e.jsx(xe,{size:24}):"Resend Verification Email"}),e.jsx(M,{variant:"contained",onClick:u,sx:{py:1.5},children:"Back to Login"})]}),e.jsxs(n,{variant:"body2",sx:{mt:3,textAlign:"center",color:"text.secondary"},children:["Already verified? ",e.jsx(M,{onClick:()=>t("/login"),variant:"text",children:"Login here"})]})]})})})})},ds=()=>{const{token:t}=rn(),r=Ne(),[a,o]=h.useState(!0),[l,x]=h.useState(!1),[s,j]=h.useState("");h.useEffect(()=>{(async()=>{if(!t){j("Invalid verification link"),o(!1);return}try{(await nn.verifyEmail(t)).verified?(x(!0),localStorage.removeItem("pendingVerificationEmail")):j("Verification failed")}catch(P){P.response?.data?.expired?j("Verification link has expired. Please request a new verification email."):j(P.response?.data?.error||"Verification failed")}finally{o(!1)}})()},[t]);const u=()=>{r("/login")},w=()=>{r("/email-verification-pending")};return e.jsx(ae,{component:"main",maxWidth:"sm",children:e.jsx(d,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsx(re,{elevation:3,sx:{padding:4,width:"100%"},children:e.jsx(d,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:a?e.jsxs(e.Fragment,{children:[e.jsx(xe,{size:60,sx:{mb:3}}),e.jsx(n,{component:"h1",variant:"h5",sx:{mb:2},children:"Verifying Your Email..."}),e.jsx(n,{variant:"body1",sx:{textAlign:"center"},children:"Please wait while we verify your email address."})]}):l?e.jsxs(e.Fragment,{children:[e.jsx(n,{component:"h1",variant:"h4",sx:{mb:2,color:"success.main"},children:"Email Verified!"}),e.jsx(G,{severity:"success",sx:{mb:3,width:"100%"},children:e.jsx(n,{variant:"body1",children:"Your email has been successfully verified. You can now log in to your account."})}),e.jsx(M,{variant:"contained",onClick:u,sx:{py:1.5,width:"100%"},children:"Continue to Login"})]}):e.jsxs(e.Fragment,{children:[e.jsx(n,{component:"h1",variant:"h4",sx:{mb:2,color:"error.main"},children:"Verification Failed"}),e.jsx(G,{severity:"error",sx:{mb:3,width:"100%"},children:s}),e.jsxs(d,{sx:{display:"flex",flexDirection:"column",gap:2,width:"100%"},children:[s.includes("expired")&&e.jsx(M,{variant:"contained",onClick:w,sx:{py:1.5},children:"Request New Verification Email"}),e.jsx(M,{variant:"outlined",onClick:u,sx:{py:1.5},children:"Back to Login"})]})]})})})})})},us=()=>{const[t,r]=h.useState(""),[a,o]=h.useState(!1),[l,x]=h.useState(""),[s,j]=h.useState(""),[u,w]=h.useState(!1),v=Ne(),P=async k=>{k.preventDefault(),o(!0),j(""),x("");try{const I=await fetch("/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})}),m=await I.json();I.ok?(x(m.message),w(!0)):j(m.error||"An error occurred. Please try again.")}catch(I){console.error("Forgot password error:",I),j("Network error. Please check your connection and try again.")}finally{o(!1)}};return u?e.jsx(ae,{maxWidth:"sm",children:e.jsx(d,{sx:{mt:8,mb:4},children:e.jsxs(re,{elevation:3,sx:{p:4,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx($n,{sx:{fontSize:48,color:"primary.main",mb:2}}),e.jsx(n,{component:"h1",variant:"h4",align:"center",gutterBottom:!0,children:"Check Your Email"}),e.jsx(n,{variant:"body1",align:"center",sx:{mb:3,color:"text.secondary"},children:l}),e.jsx(n,{variant:"body2",align:"center",sx:{mb:3},children:"Didn't receive the email? Check your spam folder or try again with a different email address."}),e.jsxs(d,{sx:{display:"flex",gap:2,flexDirection:{xs:"column",sm:"row"}},children:[e.jsx(M,{variant:"outlined",onClick:()=>{w(!1),r(""),x(""),j("")},sx:{minWidth:120},children:"Try Again"}),e.jsx(M,{variant:"contained",component:at,to:"/login",sx:{minWidth:120},children:"Back to Login"})]})]})})}):e.jsx(ae,{maxWidth:"sm",children:e.jsx(d,{sx:{mt:8,mb:4},children:e.jsxs(re,{elevation:3,sx:{p:4,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(d,{sx:{alignSelf:"flex-start",mb:2},children:e.jsx(M,{startIcon:e.jsx(Vn,{}),onClick:()=>v("/login"),variant:"text",sx:{color:"text.secondary"},children:"Back to Login"})}),e.jsx(n,{component:"h1",variant:"h4",align:"center",gutterBottom:!0,children:"Forgot Password"}),e.jsx(n,{variant:"body1",align:"center",sx:{mb:3,color:"text.secondary"},children:"Enter your email address and we'll send you a link to reset your password."}),s&&e.jsx(G,{severity:"error",sx:{width:"100%",mb:2},children:s}),e.jsxs(d,{component:"form",onSubmit:P,sx:{width:"100%"},children:[e.jsx(A,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,type:"email",value:t,onChange:k=>r(k.target.value),disabled:a,sx:{mb:3}}),e.jsx(M,{type:"submit",fullWidth:!0,variant:"contained",disabled:a||!t.trim(),sx:{mb:3,py:1.5},children:a?e.jsx(xe,{size:24,sx:{color:"white"}}):"Send Reset Link"}),e.jsx(d,{sx:{textAlign:"center"},children:e.jsxs(n,{variant:"body2",children:["Remember your password?"," ",e.jsx(ut,{component:at,to:"/login",underline:"hover",children:"Sign in here"})]})})]})]})})})},hs=()=>{const{token:t}=rn(),r=Ne(),[a,o]=h.useState(""),[l,x]=h.useState(""),[s,j]=h.useState(!1),[u,w]=h.useState(!1),[v,P]=h.useState(!1),[k,I]=h.useState(!0),[m,p]=h.useState(""),[F,b]=h.useState(""),[W,f]=h.useState(!1),[S,O]=h.useState(""),[R,g]=h.useState(!1);h.useEffect(()=>{if(!t){b("Invalid reset link"),I(!1);return}N()},[t]);const N=async()=>{try{const C=await fetch(`/api/auth/validate-reset-token/${t}`),_=await C.json();C.ok&&_.valid?(f(!0),O(_.userEmail)):(b(_.error||"Invalid or expired reset link"),f(!1))}catch(C){console.error("Token validation error:",C),b("Network error. Please check your connection and try again."),f(!1)}finally{I(!1)}},V=async C=>{if(C.preventDefault(),a!==l){b("Passwords do not match");return}if(a.length<6){b("Password must be at least 6 characters long");return}P(!0),b(""),p("");try{const _=await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,password:a})}),B=await _.json();_.ok?(p(B.message),g(!0),setTimeout(()=>{r("/login")},3e3)):b(B.error||"An error occurred. Please try again.")}catch(_){console.error("Reset password error:",_),b("Network error. Please check your connection and try again.")}finally{P(!1)}},T=(C=>C.length<6?{text:"Too short",color:"error.main"}:C.length<8?{text:"Weak",color:"warning.main"}:/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(C)?{text:"Strong",color:"success.main"}:{text:"Medium",color:"info.main"})(a);return k?e.jsx(ae,{maxWidth:"sm",children:e.jsx(d,{sx:{mt:8,mb:4,display:"flex",justifyContent:"center",alignItems:"center",minHeight:200},children:e.jsx(xe,{size:60})})}):W?R?e.jsx(ae,{maxWidth:"sm",children:e.jsx(d,{sx:{mt:8,mb:4},children:e.jsxs(re,{elevation:3,sx:{p:4,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(Bt,{sx:{fontSize:48,color:"success.main",mb:2}}),e.jsx(n,{component:"h1",variant:"h4",align:"center",gutterBottom:!0,children:"Password Reset Successful"}),e.jsx(n,{variant:"body1",align:"center",sx:{mb:3,color:"text.secondary"},children:m}),e.jsx(n,{variant:"body2",align:"center",sx:{mb:3},children:"You will be redirected to the login page in a few seconds..."}),e.jsx(M,{variant:"contained",component:at,to:"/login",sx:{minWidth:120},children:"Login Now"})]})})}):e.jsx(ae,{maxWidth:"sm",children:e.jsx(d,{sx:{mt:8,mb:4},children:e.jsxs(re,{elevation:3,sx:{p:4,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(n,{component:"h1",variant:"h4",align:"center",gutterBottom:!0,children:"Reset Password"}),e.jsx(n,{variant:"body1",align:"center",sx:{mb:1,color:"text.secondary"},children:"Enter your new password for:"}),e.jsx(n,{variant:"body2",align:"center",sx:{mb:3,fontWeight:"medium"},children:S}),F&&e.jsx(G,{severity:"error",sx:{width:"100%",mb:2},children:F}),e.jsxs(d,{component:"form",onSubmit:V,sx:{width:"100%"},children:[e.jsx(A,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"New Password",type:s?"text":"password",id:"password",autoComplete:"new-password",value:a,onChange:C=>o(C.target.value),disabled:v,InputProps:{endAdornment:e.jsx(wt,{position:"end",children:e.jsx(he,{"aria-label":"toggle password visibility",onClick:()=>j(!s),edge:"end",children:s?e.jsx(St,{}):e.jsx(dt,{})})})},helperText:a?e.jsxs(d,{component:"span",sx:{color:T.color},children:["Password strength: ",T.text]}):"Password must be at least 6 characters long"}),e.jsx(A,{margin:"normal",required:!0,fullWidth:!0,name:"confirmPassword",label:"Confirm New Password",type:u?"text":"password",id:"confirmPassword",autoComplete:"new-password",value:l,onChange:C=>x(C.target.value),disabled:v,error:l!==""&&a!==l,helperText:l!==""&&a!==l?"Passwords do not match":"",InputProps:{endAdornment:e.jsx(wt,{position:"end",children:e.jsx(he,{"aria-label":"toggle password visibility",onClick:()=>w(!u),edge:"end",children:u?e.jsx(St,{}):e.jsx(dt,{})})})},sx:{mb:3}}),e.jsx(M,{type:"submit",fullWidth:!0,variant:"contained",disabled:v||!a.trim()||!l.trim()||a!==l||a.length<6,sx:{mb:3,py:1.5},children:v?e.jsx(xe,{size:24,sx:{color:"white"}}):"Reset Password"}),e.jsx(d,{sx:{textAlign:"center"},children:e.jsxs(n,{variant:"body2",children:["Remember your password?"," ",e.jsx(ut,{component:at,to:"/login",underline:"hover",children:"Sign in here"})]})})]})]})})}):e.jsx(ae,{maxWidth:"sm",children:e.jsx(d,{sx:{mt:8,mb:4},children:e.jsxs(re,{elevation:3,sx:{p:4,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(Yr,{sx:{fontSize:48,color:"error.main",mb:2}}),e.jsx(n,{component:"h1",variant:"h4",align:"center",gutterBottom:!0,children:"Invalid Reset Link"}),e.jsx(n,{variant:"body1",align:"center",sx:{mb:3,color:"text.secondary"},children:F||"This password reset link is invalid or has expired."}),e.jsxs(d,{sx:{display:"flex",gap:2,flexDirection:{xs:"column",sm:"row"}},children:[e.jsx(M,{variant:"outlined",component:at,to:"/forgot-password",sx:{minWidth:120},children:"Request New Link"}),e.jsx(M,{variant:"contained",component:at,to:"/login",sx:{minWidth:120},children:"Back to Login"})]})]})})})},xs=()=>{console.log("ðŸ” DashboardPage rendering...");const{user:t,logout:r,isImpersonating:a}=le();console.log("ðŸ” DashboardPage user:",t),console.log("ðŸ” DashboardPage isImpersonating:",a);const o=()=>{window.location.href="/admin"};return t?e.jsxs(ae,{maxWidth:"lg",sx:{mt:3,mb:3},children:[e.jsx(n,{variant:"h3",gutterBottom:!0,children:"Dashboard"}),e.jsxs(G,{severity:"info",sx:{mb:3},children:["Welcome back, ",t.firstName," ",t.lastName,"!",a&&e.jsxs("span",{style:{marginLeft:"10px",backgroundColor:"#ff9800",padding:"4px 8px",borderRadius:"4px",color:"white"},children:["IMPERSONATING ",t.role]})]}),e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{item:!0,xs:12,md:6,children:e.jsxs(re,{sx:{p:3},children:[e.jsx(n,{variant:"h5",gutterBottom:!0,children:"User Information"}),e.jsxs(n,{children:[e.jsx("strong",{children:"Name:"})," ",t.firstName," ",t.lastName]}),e.jsxs(n,{children:[e.jsx("strong",{children:"Email:"})," ",t.email]}),e.jsxs(n,{children:[e.jsx("strong",{children:"Role:"})," ",t.role]})]})}),e.jsx(i,{item:!0,xs:12,md:6,children:e.jsxs(re,{sx:{p:3},children:[e.jsx(n,{variant:"h5",gutterBottom:!0,children:"Quick Actions"}),e.jsxs(d,{sx:{display:"flex",flexDirection:"column",gap:2},children:[t.role==="Admin"&&e.jsx(M,{variant:"contained",color:"primary",onClick:o,fullWidth:!0,children:"Access Admin Panel"}),t.role==="Coach"&&e.jsx(M,{variant:"contained",color:"primary",onClick:()=>window.location.href="/team-profile",fullWidth:!0,children:"Manage Team Profile"}),e.jsx(M,{variant:"outlined",onClick:()=>window.location.href="/profile",fullWidth:!0,children:"View Profile"}),e.jsx(M,{variant:"outlined",onClick:()=>window.location.href="/search",fullWidth:!0,children:"Search Teams/Players"}),e.jsx(M,{variant:"text",color:"error",onClick:r,fullWidth:!0,children:"Logout"})]})]})})]})]}):e.jsx(ae,{maxWidth:"lg",sx:{mt:3},children:e.jsx(G,{severity:"error",children:"User not authenticated. Please log in."})})},ms=({onChange:t,value:r="",fullWidth:a=!1,label:o,placeholder:l="Start typing an address..."})=>{const x=h.useRef(null),s=h.useRef(null),j=h.useRef(null),u=h.useRef();h.useEffect(()=>{const k=setTimeout(()=>{if(window.google?.maps?.places?.PlaceAutocompleteElement)try{const I=new window.google.maps.places.PlaceAutocompleteElement({componentRestrictions:{country:"gb"},types:["establishment","geocode"]});return I.setAttribute("placeholder",l),r&&I.setAttribute("value",r),Object.assign(I.style,{width:a?"100%":"auto",height:"56px",border:"1px solid rgba(0, 0, 0, 0.23)",borderRadius:"4px",padding:"16.5px 14px",fontSize:"16px",fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',outline:"none",transition:"border-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",backgroundColor:"white"}),I.addEventListener("focus",()=>{I.style.borderColor="#1976d2",I.style.borderWidth="2px"}),I.addEventListener("blur",()=>{I.style.borderColor="rgba(0, 0, 0, 0.23)",I.style.borderWidth="1px"}),I.addEventListener("gmp-placeselect",m=>{const p=m.detail.place;if(p?.geometry?.location){const F={address:p.formattedAddress||p.displayName||p.name||"",latitude:p.geometry.location.lat(),longitude:p.geometry.location.lng(),placeId:p.id||p.place_id};t(F)}}),I.addEventListener("input",m=>{const p=m.target.value;(!p||p.trim()==="")&&t(null)}),s.current=I,x.current&&x.current.appendChild(I),()=>{if(x.current&&s.current)try{x.current.removeChild(s.current)}catch{}}}catch{}if(j.current&&window.google?.maps?.places?.Autocomplete){u.current=new google.maps.places.Autocomplete(j.current,{types:["establishment","geocode"],componentRestrictions:{country:"gb"},fields:["place_id","formatted_address","geometry"]});const I=async()=>{const m=u.current?.getPlace();if(m?.geometry?.location){const p={address:m.formatted_address||"",latitude:m.geometry.location.lat(),longitude:m.geometry.location.lng(),placeId:m.place_id};t(p)}};return u.current.addListener("place_changed",I),()=>{u.current&&google.maps.event.clearInstanceListeners(u.current)}}},100);return()=>clearTimeout(k)},[t,l,a,r]);const w=async k=>{k.target.value===""&&t(null)},v=async k=>{const I=k.target.value;if(I&&!u.current?.getPlace()){const m=await wa(I);m&&t(m)}};return window.google?.maps?.places?.PlaceAutocompleteElement&&s.current?e.jsxs(d,{sx:{position:"relative",width:a?"100%":"auto"},children:[o&&e.jsx(d,{component:"label",sx:{color:"rgba(0, 0, 0, 0.6)",fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontWeight:400,fontSize:"12px",lineHeight:1.4375,letterSpacing:"0.00938em",position:"absolute",top:"-9px",left:"14px",background:"white",padding:"0 4px",zIndex:1},children:o}),e.jsx("div",{ref:x,style:{width:"100%"}})]}):e.jsx(A,{inputRef:j,value:r,onChange:w,onBlur:v,placeholder:l,label:o,fullWidth:a})},ps=["Midlands","Yorkshire","North West","North East","South East","South West","Eastern","London","Wales","Scotland","Northern Ireland","National"],gs=["Under 6","Under 7","Under 8","Under 9","Under 10","Under 11","Under 12","Under 13","Under 14","Under 15","Under 16","Under 17","Under 18","Under 21","Junior","Youth","Senior","Adult","Veterans","Women's","Mixed"],hn=({open:t,onClose:r,onSuccess:a})=>{const{user:o}=le(),[l,x]=h.useState({name:"",region:"",ageGroup:"",url:"",description:"",contactName:o?`${o.firstName} ${o.lastName}`.trim():"",contactEmail:o?.email||"",contactPhone:"",justification:""}),[s,j]=h.useState(!1),[u,w]=h.useState(""),[v,P]=h.useState(""),k=p=>F=>{const b=F.target.value;x(W=>({...W,[p]:b}))},I=async()=>{try{if(j(!0),w(""),P(""),!l.name.trim()){w("League name is required");return}if(!l.justification.trim()){w("Please provide a justification for why this league should be added");return}const p=localStorage.getItem("token"),F=await fetch("/api/league-requests",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`},body:JSON.stringify(l)}),b=await F.json();if(F.ok){P(`League request submitted successfully! You can now use "${l.name}" in your adverts while it's being reviewed. The league will show as "Under Review" until approved by an administrator.`);const W={name:"",region:"",ageGroup:"",url:"",description:"",contactName:o?`${o.firstName} ${o.lastName}`.trim():"",contactEmail:o?.email||"",contactPhone:"",justification:""};a?.(),setTimeout(()=>{x(W),r()},3e3)}else w(b.error||"Failed to submit league request")}catch(p){console.error("Error submitting league request:",p),w("Network error. Please try again.")}finally{j(!1)}},m=()=>{s||(w(""),P(""),r())};return e.jsxs(Fe,{open:t,onClose:m,maxWidth:"md",fullWidth:!0,children:[e.jsxs(Re,{children:[e.jsx(n,{variant:"h5",component:"div",children:"Request New League"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Can't find your league? Submit a request and we'll review it for inclusion."})]}),e.jsx(Me,{children:e.jsxs(d,{sx:{mt:2},children:[u&&e.jsx(G,{severity:"error",sx:{mb:2},children:u}),v&&e.jsx(G,{severity:"success",sx:{mb:2},children:v}),e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{item:!0,xs:12,children:e.jsx(n,{variant:"h6",gutterBottom:!0,children:"League Information"})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(A,{label:"League Name *",fullWidth:!0,value:l.name,onChange:k("name"),disabled:s,placeholder:"e.g., Tamworth Junior Football League"})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsxs(X,{fullWidth:!0,children:[e.jsx(K,{children:"Region"}),e.jsxs(J,{value:l.region,onChange:k("region"),disabled:s,label:"Region",children:[e.jsx(U,{value:"",children:e.jsx("em",{children:"Select Region"})}),ps.map(p=>e.jsx(U,{value:p,children:p},p))]})]})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsxs(X,{fullWidth:!0,children:[e.jsx(K,{children:"Age Group"}),e.jsxs(J,{value:l.ageGroup,onChange:k("ageGroup"),disabled:s,label:"Age Group",children:[e.jsx(U,{value:"",children:e.jsx("em",{children:"Select Age Group"})}),gs.map(p=>e.jsx(U,{value:p,children:p},p))]})]})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(A,{label:"League Website (Optional)",fullWidth:!0,value:l.url,onChange:k("url"),disabled:s,placeholder:"https://example.com/league",type:"url"})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(A,{label:"League Description (Optional)",fullWidth:!0,multiline:!0,rows:3,value:l.description,onChange:k("description"),disabled:s,placeholder:"Brief description of the league, its history, and what makes it unique..."})}),e.jsxs(i,{item:!0,xs:12,children:[e.jsx(n,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"Contact Information"}),e.jsx(n,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"This information helps us verify the league and may be used for follow-up questions."})]}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(A,{label:"Your Name",fullWidth:!0,value:l.contactName,onChange:k("contactName"),disabled:s})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(A,{label:"Your Email",fullWidth:!0,value:l.contactEmail,onChange:k("contactEmail"),disabled:s,type:"email"})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(A,{label:"Phone Number (Optional)",fullWidth:!0,value:l.contactPhone,onChange:k("contactPhone"),disabled:s,placeholder:"+44 7700 900000"})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(n,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"Why should this league be added? *"})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(A,{label:"Justification *",fullWidth:!0,multiline:!0,rows:4,value:l.justification,onChange:k("justification"),disabled:s,placeholder:"Please explain why this league should be added to our system. Include information about the league's size, reputation, geographical area served, and how it would benefit our users..."})})]})]})}),e.jsxs(Oe,{sx:{px:3,pb:3},children:[e.jsx(M,{onClick:m,disabled:s,children:"Cancel"}),e.jsx(M,{onClick:I,variant:"contained",disabled:s||!l.name.trim()||!l.justification.trim(),startIcon:s?e.jsx(xe,{size:16}):null,children:s?"Submitting...":"Submit Request"})]})]})},js=()=>{const t=Ne(),{user:r,isLoading:a}=le(),[o,l]=h.useState(!1),[x,s]=h.useState(""),[j,u]=h.useState([]),[w,v]=h.useState(!1),[P,k]=h.useState(!1),[I,m]=h.useState({title:"",description:"",league:"",ageGroup:"",position:"",positions:[],location:"",contactInfo:""}),[p,F]=h.useState(null);ga.useEffect(()=>{!a&&!r&&t("/login")},[r,a,t]);const b=T=>{m({...I,[T.target.name]:T.target.value}),s("")},W=T=>{m({...I,[T.target.name]:T.target.value}),s("")},f=T=>{const C=T.target.value;m({...I,positions:typeof C=="string"?C.split(","):C}),s("")};h.useEffect(()=>{(async()=>{try{v(!0);const C=await sr.getForSearch(!0);u(Array.isArray(C)?C:[])}catch(C){console.error("Error fetching leagues:",C),u([{id:1,name:"Premier League",region:"National",ageGroup:"Senior"},{id:2,name:"Championship",region:"National",ageGroup:"Senior"},{id:3,name:"Local League",region:"Local",ageGroup:"Youth"}])}finally{v(!1)}})()},[]);const S=async T=>{T.preventDefault(),s("");const C=r?.role==="Coach",_=C?I.position:I.positions.length>0;if(!I.title||!I.description||!I.league||!I.ageGroup||!_){s("Please fill in all required fields");return}try{if(C){const B={...I,locationData:p};await va.create(B)}else{const B={title:I.title,description:I.description,preferredLeagues:[I.league],ageGroup:I.ageGroup,positions:I.positions,location:I.location,contactInfo:I.contactInfo,locationData:p||void 0};await Ca.create(B)}l(!0),m({title:"",description:"",league:"",ageGroup:"",position:"",positions:[],location:"",contactInfo:""}),F(null),setTimeout(()=>{t("/dashboard")},2e3)}catch(B){console.error("Failed to post advert:",B),s("Failed to post advert. Please try again.")}};if(a)return e.jsx(ae,{maxWidth:"md",children:e.jsx(d,{display:"flex",justifyContent:"center",alignItems:"center",height:"400px",children:e.jsx(xe,{})})});if(!r)return null;const O=r.role==="Coach",R=O?"Post Team Vacancy":"Post Player Availability",g=O?"e.g. Striker Wanted - U16 League Team":"e.g. Experienced Midfielder Available",N=O?"Describe the position, team expectations, training schedule, etc.":"Describe your playing experience, availability, goals, etc.",V=["Under 6","Under 7","Under 8","Under 9","Under 10","Under 11","Under 12","Under 13","Under 14","Under 15","Under 16","Under 17","Under 18","Under 19","Under 20","Under 21","Adult (18+)","Veterans (35+)"],H=["Goalkeeper","Right Back","Left Back","Centre Back","Defensive Midfielder","Central Midfielder","Attacking Midfielder","Right Winger","Left Winger","Striker","Any Position"];return e.jsxs(ae,{maxWidth:"md",children:[e.jsxs(d,{sx:{mb:4},children:[e.jsx(n,{variant:"h3",component:"h1",gutterBottom:!0,children:R}),e.jsx(n,{variant:"h6",color:"text.secondary",children:O?"Let players know about opportunities in your team":"Let coaches know you're available and looking for a team"})]}),e.jsxs(re,{elevation:3,sx:{p:4},children:[o&&e.jsx(G,{severity:"success",sx:{mb:3},children:"Your advert has been posted successfully! Redirecting to dashboard..."}),x&&e.jsx(G,{severity:"error",sx:{mb:3},children:x}),e.jsx(d,{component:"form",onSubmit:S,children:e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{item:!0,xs:12,children:e.jsx(A,{fullWidth:!0,required:!0,label:"Title",name:"title",value:I.title,onChange:b,placeholder:g})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(A,{fullWidth:!0,required:!0,multiline:!0,rows:4,label:"Description",name:"description",value:I.description,onChange:b,placeholder:N})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(zt,{fullWidth:!0,options:[...j,{id:-1,name:"+ Request New League",region:"",ageGroup:"",isPending:!1}],getOptionLabel:T=>typeof T=="string"?T:T.name||"",value:j.find(T=>T.name===I.league)||null,onChange:(T,C)=>{typeof C=="object"&&C?.id===-1?k(!0):typeof C=="object"&&C?.name?m(_=>({..._,league:C.name})):typeof C=="string"&&m(_=>({..._,league:C}))},freeSolo:!0,onInputChange:(T,C,_)=>{_==="input"&&m(B=>({...B,league:C}))},loading:w,renderInput:T=>e.jsx(A,{...T,label:"League *",placeholder:"Type to search leagues...",required:!0,InputProps:{...T.InputProps,endAdornment:e.jsxs(e.Fragment,{children:[w?e.jsx(xe,{color:"inherit",size:20}):null,T.InputProps.endAdornment]})}}),renderOption:(T,C)=>{if(C.id===-1){const{key:te,...L}=T;return e.jsx(d,{component:"li",...L,sx:{borderTop:"1px solid #e0e0e0",backgroundColor:"#f5f5f5",fontStyle:"italic",color:"primary.main"},children:e.jsx(n,{variant:"body2",color:"primary",children:C.name})},te)}const{key:_,...B}=T;return e.jsx(d,{component:"li",...B,children:e.jsxs(d,{sx:{display:"flex",flexDirection:"column",minWidth:0,flex:1},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(n,{variant:"body2",noWrap:!0,sx:{flex:1},children:C.name}),C.isPending&&e.jsx(q,{label:"Under Review",size:"small",color:"warning",variant:"outlined",sx:{fontSize:"0.7rem",height:"20px"}})]}),C.isPending&&e.jsx(n,{variant:"caption",color:"text.secondary",noWrap:!0,children:"Awaiting Admin Approval"})]})},_)},noOptionsText:w?"Loading leagues...":"No leagues found",filterOptions:(T,{inputValue:C})=>T.filter(B=>B.id===-1||!C?!0:B.name.toLowerCase().includes(C.toLowerCase())||B.region&&B.region.toLowerCase().includes(C.toLowerCase())||B.ageGroup&&B.ageGroup.toLowerCase().includes(C.toLowerCase()))})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsxs(X,{fullWidth:!0,required:!0,children:[e.jsx(K,{children:"Age Group"}),e.jsx(J,{name:"ageGroup",value:I.ageGroup,label:"Age Group",onChange:W,children:V.map(T=>e.jsx(U,{value:T,children:T},T))})]})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsxs(X,{fullWidth:!0,required:!0,children:[e.jsx(K,{children:O?"Position":"Preferred Positions"}),O?e.jsx(J,{name:"position",value:I.position,label:"Position",onChange:W,children:H.map(T=>e.jsx(U,{value:T,children:T},T))}):e.jsxs(e.Fragment,{children:[e.jsx(J,{multiple:!0,value:I.positions,label:"Preferred Positions",onChange:f,input:e.jsx(Ot,{label:"Preferred Positions"}),renderValue:T=>e.jsx(d,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:T.map((C,_)=>e.jsx(q,{label:`${_+1}. ${C}`,size:"small",color:_===0?"primary":"default"},C))}),children:H.map(T=>e.jsx(U,{value:T,children:T},T))}),e.jsx(Hn,{children:"Select positions in order of preference (1st choice will be highlighted)"})]})]})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(Sa,{children:e.jsx(ms,{fullWidth:!0,label:"Location",value:I.location,onChange:T=>{F(T),m(C=>({...C,location:T?.address||""}))},placeholder:"Start typing an address..."})})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(A,{fullWidth:!0,label:"Contact Information",name:"contactInfo",value:I.contactInfo,onChange:b,placeholder:"Email or phone number for interested parties",helperText:"This will be visible to users who view your advert"})}),e.jsx(i,{item:!0,xs:12,children:e.jsxs(d,{sx:{display:"flex",gap:2,justifyContent:"flex-end"},children:[e.jsx(M,{variant:"outlined",onClick:()=>t("/dashboard"),children:"Cancel"}),e.jsx(M,{type:"submit",variant:"contained",size:"large",children:"Post Advert"})]})})]})})]}),e.jsx(hn,{open:P,onClose:()=>k(!1),onSuccess:()=>{(async()=>{try{v(!0);const C=await sr.getForSearch(!0);u(Array.isArray(C)?C:[])}catch(C){console.error("Error fetching leagues:",C)}finally{v(!1)}})()}})]})},fs=(t,r)=>{const[a,o]=h.useState(t);return h.useEffect(()=>{const l=setTimeout(()=>{o(t)},r);return()=>{clearTimeout(l)}},[t,r]),a},ys=({vacancyId:t,availabilityId:r,childAvailabilityId:a,prefilledData:o,onSuccess:l})=>{const{user:x}=le(),[s,j]=h.useState(!1),[u,w]=h.useState(!1),[v,P]=h.useState(""),[k,I]=h.useState(""),[m,p]=h.useState({matchType:x?.role==="Parent/Guardian"?"child_to_team":"player_to_team",playerName:"",teamName:"",position:"",ageGroup:"",league:"",startDate:"",vacancyId:t,availabilityId:r,childAvailabilityId:a,...o}),F=async()=>{if(x)try{w(!0),P("");const S=localStorage.getItem("token"),O=await fetch("/api/match-completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S}`},body:JSON.stringify(m)});if(O.ok)I("Match completion created successfully!"),j(!1),l&&l(),p({matchType:x?.role==="Parent/Guardian"?"child_to_team":"player_to_team",playerName:"",teamName:"",position:"",ageGroup:"",league:"",startDate:"",vacancyId:t,availabilityId:r,childAvailabilityId:a,...o});else{const R=await O.json();P(R.error||"Failed to create match completion")}}catch{P("Network error occurred")}finally{w(!1)}},b=["Goalkeeper","Defender","Midfielder","Forward","Centre-Back","Full-Back","Wing-Back","Defensive Midfielder","Central Midfielder","Attacking Midfielder","Winger","Striker"],W=["Under 6","Under 7","Under 8","Under 9","Under 10","Under 11","Under 12","Under 13","Under 14","Under 15","Under 16","Under 17","Under 18","Under 21","Adult (18+)","Veterans (35+)"],f=["Premier League Youth","Championship Youth","League One Youth","National League Youth","County League","District League","Local Sunday League","School Football League","Academy League"];return x?e.jsxs(e.Fragment,{children:[e.jsx(hr,{title:"Report a successful match",children:e.jsx(xr,{color:"success","aria-label":"report match",onClick:()=>j(!0),sx:{position:"fixed",bottom:16,right:16,zIndex:1e3},children:e.jsx(Bt,{})})}),k&&e.jsx(G,{severity:"success",sx:{position:"fixed",top:16,right:16,zIndex:1001,maxWidth:400},onClose:()=>I(""),children:k}),e.jsxs(Fe,{open:s,onClose:()=>j(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(Re,{children:"Report Successful Match"}),e.jsxs(Me,{children:[v&&e.jsx(G,{severity:"error",sx:{mb:2},onClose:()=>P(""),children:v}),e.jsxs(d,{sx:{display:"flex",flexDirection:"column",gap:2,mt:1},children:[e.jsx(A,{label:"Player Name",value:m.playerName,onChange:S=>p({...m,playerName:S.target.value}),fullWidth:!0,required:!0,placeholder:"Enter the player's name"}),e.jsx(A,{label:"Team Name",value:m.teamName,onChange:S=>p({...m,teamName:S.target.value}),fullWidth:!0,required:!0,placeholder:"Enter the team name"}),e.jsxs(A,{select:!0,label:"Position",value:m.position,onChange:S=>p({...m,position:S.target.value}),fullWidth:!0,required:!0,SelectProps:{native:!0},children:[e.jsx("option",{value:"",children:"Select Position"}),b.map(S=>e.jsx("option",{value:S,children:S},S))]}),e.jsxs(A,{select:!0,label:"Age Group",value:m.ageGroup,onChange:S=>p({...m,ageGroup:S.target.value}),fullWidth:!0,required:!0,SelectProps:{native:!0},children:[e.jsx("option",{value:"",children:"Select Age Group"}),W.map(S=>e.jsx("option",{value:S,children:S},S))]}),e.jsx(zt,{fullWidth:!0,options:f,value:m.league||null,onChange:(S,O)=>p({...m,league:O||""}),renderInput:S=>e.jsx(A,{...S,label:"League *",placeholder:"Type to search leagues...",required:!0}),filterOptions:(S,{inputValue:O})=>O?S.filter(R=>R.toLowerCase().includes(O.toLowerCase())):S,noOptionsText:"No leagues found"}),e.jsx(A,{label:"Start Date",type:"date",value:m.startDate,onChange:S=>p({...m,startDate:S.target.value}),fullWidth:!0,InputLabelProps:{shrink:!0},helperText:"When did the player join the team?"})]})]}),e.jsxs(Oe,{children:[e.jsx(M,{onClick:()=>j(!1),disabled:u,children:"Cancel"}),e.jsx(M,{onClick:F,variant:"contained",disabled:u||!m.playerName||!m.teamName||!m.position||!m.ageGroup||!m.league,children:u?"Creating...":"Report Match"})]})]})]}):null},bs=({open:t,onClose:r,playerId:a,playerName:o,onSuccess:l})=>{const[x,s]=h.useState({teamName:"",trainingLocation:"",trainingDate:new Date,trainingTime:new Date,message:"",expiresInDays:7}),[j,u]=h.useState(!1),[w,v]=h.useState(""),P=()=>{j||(s({teamName:"",trainingLocation:"",trainingDate:new Date,trainingTime:new Date,message:"",expiresInDays:7}),v(""),r())},k=async()=>{try{u(!0),v("");const m=x.trainingDate.toISOString().split("T")[0],p=x.trainingTime.toTimeString().split(" ")[0].substring(0,5);(await ot.post("/training-invitations",{playerId:a,teamName:x.teamName,trainingLocation:x.trainingLocation,trainingDate:m,trainingTime:p,message:x.message||void 0,expiresInDays:x.expiresInDays})).data.success&&(l&&l(),P(),alert(`Training invitation sent to ${o} successfully!`))}catch(m){console.error("Error sending training invitation:",m);const p=m.response?.data?.error||"Failed to send training invitation";v(p)}finally{u(!1)}},I=()=>x.teamName.trim()&&x.trainingLocation.trim()&&x.trainingDate&&x.trainingTime;return e.jsx(an,{dateAdapter:sn,children:e.jsxs(Fe,{open:t,onClose:P,maxWidth:"sm",fullWidth:!0,disableEscapeKeyDown:j,children:[e.jsxs(Re,{children:["Send Training Invitation to ",o]}),e.jsxs(Me,{children:[w&&e.jsx(G,{severity:"error",sx:{mb:2},children:w}),e.jsxs(i,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(i,{item:!0,xs:12,children:e.jsx(A,{fullWidth:!0,label:"Team Name",value:x.teamName,onChange:m=>s(p=>({...p,teamName:m.target.value})),required:!0,disabled:j,helperText:"The name of your team"})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(A,{fullWidth:!0,label:"Training Location",value:x.trainingLocation,onChange:m=>s(p=>({...p,trainingLocation:m.target.value})),required:!0,disabled:j,helperText:"Where the training session will take place"})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(Ta,{label:"Training Date",value:x.trainingDate,onChange:m=>{m&&s(p=>({...p,trainingDate:m}))},disabled:j,minDate:new Date,sx:{width:"100%"}})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(ka,{label:"Training Time",value:x.trainingTime,onChange:m=>{m&&s(p=>({...p,trainingTime:m}))},disabled:j,sx:{width:"100%"}})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(A,{fullWidth:!0,label:"Expires In (Days)",type:"number",value:x.expiresInDays,onChange:m=>{const p=parseInt(m.target.value);p>=1&&p<=30&&s(F=>({...F,expiresInDays:p}))},inputProps:{min:1,max:30},disabled:j,helperText:"How many days the player has to respond (1-30 days)"})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(A,{fullWidth:!0,label:"Personal Message (Optional)",multiline:!0,rows:3,value:x.message,onChange:m=>s(p=>({...p,message:m.target.value})),disabled:j,helperText:"Add a personal message to encourage the player to join",inputProps:{maxLength:500}})})]})]}),e.jsxs(Oe,{sx:{p:3},children:[e.jsx(M,{onClick:P,disabled:j,children:"Cancel"}),e.jsx(M,{onClick:k,variant:"contained",disabled:!I()||j,startIcon:j?e.jsx(xe,{size:16}):null,children:j?"Sending...":"Send Invitation"})]})]})})},vs=({open:t,onClose:r,player:a,onSuccess:o})=>{const[l,x]=h.useState([]),[s,j]=h.useState(""),[u,w]=h.useState(!1),[v,P]=h.useState(!1),[k,I]=h.useState(""),[m,p]=h.useState(""),[F,b]=h.useState(""),[W,f]=h.useState("");h.useEffect(()=>{t&&(S(),a?(p(`${a.firstName} ${a.lastName}`),b(a.age?.toString()||""),f(a.position||"")):(p(""),b(""),f("")))},[t,a]);const S=async()=>{try{P(!0);const g=await ot.get("/trial-lists");if(g.data.success){const N=g.data.trialLists.filter(V=>V.status==="active");x(N)}}catch(g){console.error("Error fetching trial lists:",g),I("Failed to load trial lists")}finally{P(!1)}},O=async()=>{if(!s||!m.trim()){I("Please select a trial list and enter player name");return}try{w(!0),I("");const g={playerId:a?.playerId||0,playerName:m.trim(),playerAge:F?parseInt(F):void 0,playerPosition:W||void 0};(await ot.post(`/trial-lists/${s}/players`,g)).data.success&&(o?.(),r(),j(""))}catch(g){console.error("Error adding player to trial:",g);const N=g.response?.data?.error||"Failed to add player to trial";I(N)}finally{w(!1)}},R=()=>{j(""),I(""),p(""),b(""),f(""),r()};return e.jsxs(Fe,{open:t,onClose:R,maxWidth:"sm",fullWidth:!0,children:[e.jsx(Re,{children:e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Gr,{}),e.jsx(n,{variant:"h6",children:"Quick Add to Trial List"})]})}),e.jsxs(Me,{children:[k&&e.jsx(G,{severity:"error",sx:{mb:2},children:k}),e.jsxs(i,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(i,{item:!0,xs:12,children:e.jsx(A,{fullWidth:!0,label:"Player Name",value:m,onChange:g=>p(g.target.value),required:!0,disabled:!!a})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(A,{fullWidth:!0,label:"Age (Optional)",type:"number",value:F,onChange:g=>b(g.target.value),inputProps:{min:5,max:50}})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(A,{fullWidth:!0,label:"Position (Optional)",value:W,onChange:g=>f(g.target.value)})}),e.jsxs(i,{item:!0,xs:12,children:[e.jsx(Ee,{sx:{my:2}}),e.jsx(n,{variant:"subtitle1",gutterBottom:!0,children:"Select Trial List"})]}),e.jsx(i,{item:!0,xs:12,children:e.jsxs(X,{fullWidth:!0,disabled:v,children:[e.jsx(K,{children:"Trial List"}),e.jsx(J,{value:s,onChange:g=>j(g.target.value),label:"Trial List",children:v?e.jsxs(U,{disabled:!0,children:[e.jsx(xe,{size:20,sx:{mr:1}}),"Loading trial lists..."]}):l.length===0?e.jsx(U,{disabled:!0,children:"No active trial lists found"}):l.map(g=>e.jsx(U,{value:g.id.toString(),children:e.jsxs(d,{children:[e.jsx(n,{variant:"body1",children:g.title}),e.jsxs(n,{variant:"body2",color:"text.secondary",children:[g.playerCount," players",g.maxPlayers?` / ${g.maxPlayers}`:"",g.trialDate&&` â€¢ ${new Date(g.trialDate).toLocaleDateString()}`]})]})},g.id))})]})})]}),l.length===0&&!v&&e.jsxs(d,{sx:{mt:2,p:2,bgcolor:"grey.100",borderRadius:1},children:[e.jsx(n,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"No active trial lists found. Create a trial list first to add players."}),e.jsx(M,{variant:"outlined",size:"small",onClick:()=>window.open("/trial-management","_blank"),sx:{mt:1},children:"Create Trial List"})]})]}),e.jsxs(Oe,{children:[e.jsx(M,{onClick:R,children:"Cancel"}),e.jsx(M,{onClick:O,variant:"contained",disabled:u||!s||!m.trim(),startIcon:u?e.jsx(xe,{size:16}):e.jsx(ht,{}),children:u?"Adding...":"Add to Trial"})]})]})};function Nr(t){const{children:r,value:a,index:o,...l}=t;return e.jsx("div",{role:"tabpanel",hidden:a!==o,id:`search-tabpanel-${o}`,"aria-labelledby":`search-tab-${o}`,...l,children:a===o&&e.jsx(d,{sx:{pt:3},children:r})})}const Cs=()=>{const[t]=ja(),r=Ne(),{user:a}=le(),{cardSpacing:o}=un(),[l,x]=h.useState(0),[s,j]=h.useState({league:"",ageGroup:"",position:"",location:"",search:"",teamGender:"",experienceLevel:"",travelDistance:25,trainingFrequency:"",availability:[],coachingLicense:""});h.useEffect(()=>{const y=t.get("tab");t.get("id"),y==="vacancies"?x(0):y==="availability"&&x(1)},[t]);const[u,w]=h.useState(!1),[v,P]=h.useState(1),[k,I]=h.useState([]),[m,p]=h.useState([]),[F,b]=h.useState(!1),[W,f]=h.useState(null),[S,O]=h.useState([]),[R,g]=h.useState(!1),[N,V]=h.useState(!1),[H,T]=h.useState(null),[C,_]=h.useState(""),[B,te]=h.useState(!1),[L,D]=h.useState(!1),[z,ce]=h.useState(null),[Be,ze]=h.useState(!1),[$e,et]=h.useState(null),[xt,Ie]=h.useState(!1),De=fs(s.search,300),mt=["Beginner","Intermediate","Advanced","Professional"],pt=["1x per week","2x per week","3x per week","4+ per week","Flexible"],tt=["Weekdays","Weekends","Evenings","Mornings","Afternoons"],gt=["UEFA C","UEFA B","UEFA A","UEFA Pro","FA Level 1","FA Level 2","FA Level 3"],E=(y,$)=>{x($),P(1)},ie=y=>{j({...s,[y.target.name]:y.target.value}),P(1)},ne=y=>{j({...s,[y.target.name]:y.target.value}),P(1)},oe=(y,$)=>{j({...s,[y]:$}),P(1)},se=(y,$)=>{j({...s,[y]:$}),P(1)},ve=y=>{T(y),V(!0)},Ae=()=>{V(!1),T(null),_(""),te(!1)},Ve=async()=>{if(!(!H||!C.trim()))try{te(!0),(await ot.post("/messages",{recipientId:H.postedBy,subject:`Interest in ${H.title}`,message:C.trim(),relatedVacancyId:H.id,messageType:"vacancy_interest"})).data.success&&(alert("Your message has been sent successfully! The coach will receive your interest and can respond through the platform."),Ae())}catch(y){console.error("Error sending message:",y),alert("There was an error sending your message. Please try again.")}finally{te(!1)}},Dt=y=>{ce({id:y.userId,name:y.playerName}),D(!0)},Gt=()=>{D(!1),ce(null)},$t=()=>{j({league:"",ageGroup:"",position:"",location:"",search:"",teamGender:"",experienceLevel:"",travelDistance:25,trainingFrequency:"",availability:[],coachingLicense:""}),P(1)},yn=async()=>{try{b(!0),f(null);const y={league:s.league||void 0,ageGroup:s.ageGroup||void 0,position:s.position||void 0,location:s.location||void 0,search:s.search||void 0,teamGender:s.teamGender||void 0,experienceLevel:s.experienceLevel||void 0,travelDistance:s.travelDistance||void 0,trainingFrequency:s.trainingFrequency||void 0,availability:s.availability?.length>0?s.availability.join(","):void 0,coachingLicense:s.coachingLicense||void 0,centerLat:void 0,centerLng:void 0},$=Object.fromEntries(Object.entries(y).filter(([rt,Q])=>Q!==void 0&&Q!=="")),Ce=await ot.get("/vacancies",{params:$}),me=Ce.data.vacancies||Ce.data;I(me)}catch(y){console.error("Error fetching vacancies:",y),f("Failed to load team vacancies")}finally{b(!1)}},fr=async()=>{try{g(!0);const y=await sr.getForSearch();Array.isArray(y)?O(y):y&&typeof y=="object"&&"leagues"in y?O(y.leagues||[]):(console.warn("Unexpected response format from leagues API:",y),O([]))}catch(y){console.error("Error fetching leagues:",y),O([{id:1,name:"Premier League",region:"National",ageGroup:"Senior"},{id:2,name:"Championship",region:"National",ageGroup:"Senior"},{id:3,name:"Local League",region:"Local",ageGroup:"Youth"}])}finally{g(!1)}},yr=async()=>{try{b(!0),f(null);const y={league:s.league||void 0,ageGroup:s.ageGroup||void 0,position:s.position||void 0,location:s.location||void 0,search:s.search||void 0,preferredTeamGender:s.teamGender||void 0,experienceLevel:s.experienceLevel||void 0,travelDistance:s.travelDistance||void 0,trainingFrequency:s.trainingFrequency||void 0,availability:s.availability?.length>0?s.availability.join(","):void 0,centerLat:void 0,centerLng:void 0},$=Object.fromEntries(Object.entries(y).filter(([Q,It])=>It!==void 0&&It!=="")),Ce=await ot.get("/player-availability",{params:$}),me=Ce.data.players||Ce.data,rt=Array.isArray(me)?me.map(Q=>({id:Q.id,playerId:Q.id,userId:Q.userId||Q.id,playerName:`${Q.firstName||""} ${Q.lastName||""}`.trim()||"Unknown Player",firstName:Q.firstName||"",lastName:Q.lastName||"",age:typeof Q.age=="number"?Q.age:0,position:Array.isArray(Q.positions)?Q.positions.join(", "):Q.position||"Any Position",positions:Array.isArray(Q.positions)?Q.positions:[Q.position||"Any Position"],location:Q.location||"",experience:Q.experience||"Unknown",description:Q.description||Q.title||"",title:Q.title||`${Q.firstName||""} ${Q.lastName||""}`.trim()||"Player Available"})):[];p(rt)}catch(y){console.error("Error fetching player availability:",y),p([{id:1,playerId:1,userId:1,playerName:"James Wilson",firstName:"James",lastName:"Wilson",age:17,position:"Central Midfielder",positions:["Central Midfielder"],location:"London, UK",experience:"8 years",title:"Looking for competitive team",description:"Experienced central midfielder with excellent passing and vision."},{id:2,playerId:2,userId:2,playerName:"Alex Thompson",firstName:"Alex",lastName:"Thompson",age:15,position:"Striker",positions:["Striker"],location:"Leeds, UK",experience:"3 years",title:"Seeking striker position",description:"Fast and aggressive striker seeking opportunities in competitive league."}])}finally{b(!1)}};h.useEffect(()=>{fr(),yr()},[]),h.useEffect(()=>{yn(),yr()},[s.league,s.ageGroup,s.position,s.location,s.search,s.teamGender,s.experienceLevel,s.travelDistance,s.trainingFrequency,s.availability,s.coachingLicense]);const bn=["Under 6","Under 7","Under 8","Under 9","Under 10","Under 11","Under 12","Under 13","Under 14","Under 15","Under 16","Under 17","Under 18","Under 19","Under 20","Under 21","Senior","Veterans"],vn=["Boys","Girls","Mixed"],Cn=["Goalkeeper","Right Back","Left Back","Centre Back","Defensive Midfielder","Central Midfielder","Attacking Midfielder","Right Winger","Left Winger","Striker","Any Position"],br=(k||[]).filter(y=>{const $=!De||y.title.toLowerCase().includes(De.toLowerCase())||y.description.toLowerCase().includes(De.toLowerCase())||y.location.toLowerCase().includes(De.toLowerCase()),Ce=!s.league||y.league===s.league,me=!s.ageGroup||y.ageGroup===s.ageGroup,rt=!s.position||y.position===s.position,Q=!s.teamGender||y.teamGender===s.teamGender,It=!s.location||y.location.toLowerCase().includes(s.location.toLowerCase());return $&&Ce&&me&&rt&&Q&&It}),vr=(m||[]).filter(y=>{const $=!De||y.playerName.toLowerCase().includes(De.toLowerCase())||y.description.toLowerCase().includes(De.toLowerCase())||y.location.toLowerCase().includes(De.toLowerCase()),Ce=!s.position||y.position===s.position,me=!s.location||y.location.toLowerCase().includes(s.location.toLowerCase());return $&&Ce&&me}),Pn=l===0?br:vr,wn=l===0?"Team Vacancies":"Player Availability";return e.jsxs(ae,{maxWidth:"lg",children:[e.jsx(d,{sx:{mb:4},children:e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[e.jsxs(d,{children:[e.jsx(n,{variant:"h3",component:"h1",gutterBottom:!0,children:"Search & Browse"}),e.jsx(n,{variant:"h6",color:"text.secondary",children:"Find the perfect match for your football journey"})]}),e.jsx(M,{variant:"outlined",startIcon:e.jsx(Wt,{}),onClick:()=>r("/maps"),sx:{mt:1},children:"Map Search"})]})}),e.jsx(d,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:e.jsxs(Ut,{value:l,onChange:E,"aria-label":"search tabs",children:[e.jsx(Le,{label:"Team Vacancies",icon:e.jsx(Ke,{}),iconPosition:"start",id:"search-tab-0","aria-controls":"search-tabpanel-0"}),e.jsx(Le,{label:"Player Availability",icon:e.jsx(Hr,{}),iconPosition:"start",id:"search-tab-1","aria-controls":"search-tabpanel-1"})]})}),e.jsxs(re,{elevation:2,sx:{p:3,mb:4},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Search Filters"}),e.jsxs(i,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(i,{item:!0,xs:12,md:6,children:e.jsx(A,{fullWidth:!0,name:"search",label:"Search",value:s.search,onChange:ie,placeholder:`Search ${wn.toLowerCase()}...`,InputProps:{startAdornment:e.jsx(cr,{sx:{mr:1,color:"text.secondary"}})}})}),e.jsxs(i,{item:!0,xs:12,sm:6,md:3,children:[e.jsx(zt,{fullWidth:!0,options:Array.isArray(S)?[...S,{id:-1,name:"+ Request New League",region:"",ageGroup:"",url:"",hits:0}]:[],getOptionLabel:y=>typeof y=="string"?y:y.name||"",value:S.find(y=>y.name===s.league)||null,onChange:(y,$)=>{typeof $=="object"&&$?.id===-1?Ie(!0):typeof $=="object"&&$?.name?(j({...s,league:$.name}),P(1)):typeof $=="string"&&(j({...s,league:$}),P(1))},onInputChange:(y,$,Ce)=>{Ce==="input"&&j({...s,league:$})},freeSolo:!0,selectOnFocus:!0,clearOnBlur:!1,handleHomeEndKeys:!0,loading:R,renderInput:y=>e.jsx(A,{...y,label:"League",placeholder:"Type to search leagues...",InputProps:{...y.InputProps,endAdornment:e.jsxs(e.Fragment,{children:[R?e.jsx(xe,{color:"inherit",size:20}):null,y.InputProps.endAdornment]})}}),renderOption:(y,$)=>{if($.id===-1){const{key:rt,...Q}=y;return e.jsx(d,{component:"li",...Q,sx:{borderTop:"1px solid #e0e0e0",backgroundColor:"#f5f5f5",fontStyle:"italic",color:"primary.main"},children:e.jsx(d,{sx:{display:"flex",alignItems:"center",py:1},children:e.jsx(n,{variant:"body2",color:"primary",children:$.name})})},rt)}const{key:Ce,...me}=y;return e.jsx(d,{component:"li",...me,children:e.jsxs(d,{sx:{display:"flex",flexDirection:"column",minWidth:0,flex:1},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(n,{variant:"body2",noWrap:!0,sx:{flex:1},children:$.name}),$.isPending&&e.jsx(q,{label:"Under Review",size:"small",color:"warning",variant:"outlined",sx:{fontSize:"0.7rem",height:"20px"}})]}),$.isPending&&e.jsx(n,{variant:"caption",color:"text.secondary",noWrap:!0,children:"Awaiting Admin Approval"})]})},Ce)},noOptionsText:R?"Loading leagues...":"No leagues found",filterOptions:(y,{inputValue:$})=>y.filter(me=>me.id===-1||!$?!0:me.name.toLowerCase().includes($.toLowerCase())||me.region&&me.region.toLowerCase().includes($.toLowerCase())||me.ageGroup&&me.ageGroup.toLowerCase().includes($.toLowerCase()))}),s.league&&e.jsx(d,{sx:{mt:1},children:(()=>{const y=S.find($=>$.name===s.league);return y?.url?e.jsxs(ut,{href:y.url,target:"_blank",rel:"noopener noreferrer",sx:{display:"flex",alignItems:"center",gap:.5,fontSize:"0.875rem",textDecoration:"none","&:hover":{textDecoration:"underline"}},children:[e.jsx(qn,{sx:{fontSize:14}}),"Visit League Page"]}):null})()})]}),e.jsx(i,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(X,{fullWidth:!0,children:[e.jsx(K,{children:"Age Group"}),e.jsxs(J,{name:"ageGroup",value:s.ageGroup,label:"Age Group",onChange:ne,children:[e.jsx(U,{value:"",children:"All Ages"}),bn.map(y=>e.jsx(U,{value:y,children:y},y))]})]})}),e.jsx(i,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(X,{fullWidth:!0,children:[e.jsx(K,{children:"Position"}),e.jsxs(J,{name:"position",value:s.position,label:"Position",onChange:ne,children:[e.jsx(U,{value:"",children:"All Positions"}),Cn.map(y=>e.jsx(U,{value:y,children:y},y))]})]})}),l===0&&e.jsx(i,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(X,{fullWidth:!0,children:[e.jsx(K,{children:"Team Type"}),e.jsxs(J,{name:"teamGender",value:s.teamGender,label:"Team Type",onChange:ne,children:[e.jsx(U,{value:"",children:"All Teams"}),vn.map(y=>e.jsxs(U,{value:y,children:[y," Team"]},y))]})]})}),e.jsx(i,{item:!0,xs:12,sm:6,md:3,children:e.jsx(A,{fullWidth:!0,name:"location",label:"Location",value:s.location,onChange:ie,placeholder:"Enter location",InputProps:{startAdornment:e.jsx(it,{sx:{mr:1,color:"text.secondary"}})}})}),e.jsx(i,{item:!0,xs:12,sm:6,md:3,children:e.jsx(M,{fullWidth:!0,variant:"outlined",onClick:$t,sx:{height:"56px"},children:"Clear Filters"})}),e.jsx(i,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(M,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(Yn,{}),onClick:()=>w(!u),sx:{height:"56px"},children:[u?"Hide":"Show"," Advanced"]})})]}),u&&e.jsxs(Pe,{expanded:!0,sx:{mt:3,mb:0},children:[e.jsx(we,{expandIcon:e.jsx(Se,{}),children:e.jsx(n,{variant:"h6",children:"Advanced Filters"})}),e.jsx(Te,{children:e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(X,{fullWidth:!0,children:[e.jsx(K,{children:"Experience Level"}),e.jsxs(J,{name:"experienceLevel",value:s.experienceLevel,label:"Experience Level",onChange:ne,children:[e.jsx(U,{value:"",children:"Any Level"}),mt.map(y=>e.jsx(U,{value:y,children:y},y))]})]})}),e.jsx(i,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(d,{sx:{px:1},children:[e.jsxs(n,{variant:"body2",gutterBottom:!0,children:["Max Travel Distance: ",s.travelDistance," km"]}),e.jsx(Jn,{value:s.travelDistance,onChange:(y,$)=>se("travelDistance",$),valueLabelDisplay:"auto",step:5,marks:!0,min:5,max:100,valueLabelFormat:y=>`${y} km`})]})}),e.jsx(i,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(X,{fullWidth:!0,children:[e.jsx(K,{children:"Training Frequency"}),e.jsxs(J,{name:"trainingFrequency",value:s.trainingFrequency,label:"Training Frequency",onChange:ne,children:[e.jsx(U,{value:"",children:"Any Frequency"}),pt.map(y=>e.jsx(U,{value:y,children:y},y))]})]})}),e.jsx(i,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(X,{fullWidth:!0,children:[e.jsx(K,{children:"Availability"}),e.jsx(J,{multiple:!0,value:s.availability,onChange:y=>oe("availability",y.target.value),input:e.jsx(Ot,{label:"Availability"}),renderValue:y=>e.jsx(d,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:y.map($=>e.jsx(q,{label:$,size:"small"},$))}),children:tt.map(y=>e.jsxs(U,{value:y,children:[e.jsx(rr,{checked:s.availability.indexOf(y)>-1}),e.jsx(fe,{primary:y})]},y))})]})}),l===0&&e.jsx(i,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(X,{fullWidth:!0,children:[e.jsx(K,{children:"Coaching License"}),e.jsxs(J,{name:"coachingLicense",value:s.coachingLicense,label:"Coaching License",onChange:ne,children:[e.jsx(U,{value:"",children:"Any License"}),gt.map(y=>e.jsx(U,{value:y,children:y},y))]})]})}),e.jsx(i,{item:!0,xs:12,children:e.jsxs(d,{sx:{mt:2},children:[e.jsx(n,{variant:"body2",gutterBottom:!0,children:"Quick Presets:"}),e.jsxs(d,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[e.jsx(q,{label:"Nearby (5km)",onClick:()=>se("travelDistance",5),variant:s.travelDistance===5?"filled":"outlined"}),e.jsx(q,{label:"Weekends Only",onClick:()=>oe("availability",["Weekends"]),variant:s.availability.includes("Weekends")?"filled":"outlined"}),e.jsx(q,{label:"Beginner Friendly",onClick:()=>ne({target:{name:"experienceLevel",value:"Beginner"}}),variant:s.experienceLevel==="Beginner"?"filled":"outlined"}),e.jsx(q,{label:"Professional Level",onClick:()=>ne({target:{name:"experienceLevel",value:"Professional"}}),variant:s.experienceLevel==="Professional"?"filled":"outlined"})]})]})})]})})]})]}),e.jsx(re,{elevation:1,sx:{p:2,mb:3,backgroundColor:"primary.50",border:"1px solid",borderColor:"primary.200"},children:e.jsxs(d,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Wt,{color:"primary"}),e.jsxs(d,{children:[e.jsx(n,{variant:"subtitle1",color:"primary.main",sx:{fontWeight:600},children:"Try Map Search for Location-Based Results"}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"Use our interactive map to search by area, draw custom regions, and see results with precise locations"})]})]}),e.jsx(M,{variant:"contained",startIcon:e.jsx(Wt,{}),onClick:()=>r("/maps"),sx:{minWidth:120},children:"Open Maps"})]})}),W&&e.jsx(G,{severity:"error",sx:{mb:3},children:W}),e.jsx(Nr,{value:l,index:0,children:e.jsxs(d,{sx:{mb:3},children:[e.jsxs(n,{variant:"h5",gutterBottom:!0,children:["Team Vacancies (",F?"...":br.length,")"]}),e.jsx(n,{variant:"body1",color:"text.secondary",children:"Browse available positions in football teams"})]})}),e.jsx(Nr,{value:l,index:1,children:e.jsxs(d,{sx:{mb:3},children:[e.jsxs(n,{variant:"h5",gutterBottom:!0,children:["Available Players (",vr.length,")"]}),e.jsx(n,{variant:"body1",color:"text.secondary",children:"Browse players looking for teams"})]})}),F?e.jsx(d,{sx:{display:"flex",justifyContent:"center",my:4},children:e.jsx(xe,{})}):e.jsxs(e.Fragment,{children:[e.jsx(i,{container:!0,spacing:o,children:(Pn||[]).map(y=>e.jsx(i,{item:!0,xs:12,md:6,children:e.jsxs(de,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsx(ue,{sx:{flexGrow:1},children:l===0?e.jsxs(e.Fragment,{children:[e.jsx(n,{variant:"h6",component:"h3",gutterBottom:!0,children:y.title}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:y.description}),e.jsxs(d,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2},children:[e.jsx(q,{label:y.league,size:"small",color:"primary"}),e.jsx(q,{label:y.ageGroup,size:"small",color:"secondary"}),e.jsx(q,{label:y.position,size:"small"})]}),e.jsxs(d,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(it,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),e.jsx(n,{variant:"body2",color:"text.secondary",children:y.location})]}),e.jsxs(n,{variant:"body2",color:"text.secondary",children:["Posted by ",y.firstName," ",y.lastName," â€¢ ",new Date(y.createdAt).toLocaleDateString()]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(n,{variant:"h6",component:"h3",gutterBottom:!0,children:[y.playerName," - ",y.position]}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:y.description}),e.jsxs(d,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2},children:[e.jsx(q,{label:`Age ${y.age}`,size:"small",color:"primary"}),e.jsx(q,{label:y.position,size:"small",color:"secondary"}),e.jsx(q,{label:`${y.experience} experience`,size:"small"})]}),e.jsxs(d,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(it,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),e.jsx(n,{variant:"body2",color:"text.secondary",children:y.location})]})]})}),e.jsxs(vt,{children:[e.jsx(M,{size:"small",variant:"contained",onClick:()=>{l===0?ve(y):a?.role==="Coach"?Dt(y):alert("Only coaches can send training invitations to players.")},children:l===0?"Express Interest":a?.role==="Coach"?"Send Training Invite":"Contact Player"}),l===1&&a?.role==="Coach"&&e.jsx(M,{size:"small",variant:"outlined",onClick:()=>{et(y),ze(!0)},children:"Add to Trial"}),e.jsx(M,{size:"small",variant:"outlined",children:"Save"})]})]})},y.id))}),e.jsx(d,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(Qn,{count:3,page:v,onChange:(y,$)=>P($),color:"primary"})})]}),e.jsxs(Fe,{open:N,onClose:Ae,maxWidth:"md",fullWidth:!0,children:[e.jsxs(Re,{children:["Express Interest - ",H?.title]}),e.jsx(Me,{children:H&&e.jsxs(d,{sx:{pt:2},children:[e.jsxs(n,{variant:"h6",gutterBottom:!0,children:["Team: ",H.title]}),e.jsxs(n,{variant:"body1",gutterBottom:!0,children:[e.jsx("strong",{children:"Position:"})," ",H.position]}),e.jsxs(n,{variant:"body1",gutterBottom:!0,children:[e.jsx("strong",{children:"League:"})," ",H.league]}),e.jsxs(n,{variant:"body1",gutterBottom:!0,children:[e.jsx("strong",{children:"Age Group:"})," ",H.ageGroup]}),e.jsxs(n,{variant:"body1",gutterBottom:!0,children:[e.jsx("strong",{children:"Location:"})," ",H.location]}),e.jsxs(n,{variant:"body1",gutterBottom:!0,children:[e.jsx("strong",{children:"Coach:"})," ",H.firstName," ",H.lastName]}),e.jsxs(d,{sx:{mt:3,p:2,backgroundColor:"grey.50",borderRadius:1},children:[e.jsx(n,{variant:"body1",gutterBottom:!0,children:e.jsx("strong",{children:"About the Position:"})}),e.jsx(n,{variant:"body2",children:H.description})]}),e.jsxs(d,{sx:{mt:3},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Send a Message to the Coach"}),e.jsx(n,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"All communication happens safely within our platform. The coach will receive your message and can respond through their dashboard."}),e.jsx(A,{fullWidth:!0,multiline:!0,rows:4,placeholder:"Tell the coach about yourself and why you're interested in this position...",value:C,onChange:y=>_(y.target.value),sx:{mt:2},disabled:B}),e.jsx(d,{sx:{mt:2,p:1,backgroundColor:"info.50",borderRadius:1,border:1,borderColor:"info.200"},children:e.jsx(n,{variant:"caption",color:"info.main",children:"ðŸ’¡ Tip: Mention your experience, availability, and what you hope to achieve with the team."})})]})]})}),e.jsxs(Oe,{children:[e.jsx(M,{onClick:Ae,disabled:B,children:"Cancel"}),e.jsx(M,{variant:"contained",onClick:Ve,disabled:B||!C.trim(),children:B?"Sending...":"Send Message"})]})]}),z&&e.jsx(bs,{open:L,onClose:Gt,playerId:z.id,playerName:z.name,onSuccess:()=>{}}),e.jsx(vs,{open:Be,onClose:()=>{ze(!1),et(null)},player:$e,onSuccess:()=>{}}),e.jsx(hn,{open:xt,onClose:()=>Ie(!1),onSuccess:()=>{fr()}}),e.jsx(ys,{})]})},Ps=()=>{const[t,r]=h.useState([]),[a,o]=h.useState(null),[l,x]=h.useState([]),[s,j]=h.useState([]),[u,w]=h.useState(!0),[v,P]=h.useState(!1),[k,I]=h.useState(null),[m,p]=h.useState(null),[F,b]=h.useState(null),[W,f]=h.useState({teamName:"",league:"",ageGroup:"",position:"",season:"",startDate:"",endDate:"",isCurrentTeam:!1,achievements:"",matchesPlayed:"",goalsScored:"",notes:""}),S=["Goalkeeper","Centre-back","Left-back","Right-back","Defensive Midfielder","Central Midfielder","Attacking Midfielder","Left Wing","Right Wing","Striker","Centre Forward"],O=["Under 6","Under 7","Under 8","Under 9","Under 10","Under 11","Under 12","Under 13","Under 14","Under 15","Under 16","Under 17","Under 18","Under 19","Under 20","Under 21","Senior","Veterans"],R=["Premier League Youth","Championship Youth","League One Youth","County League","Regional League","Local League","Sunday League","Community Football League","Youth Development League","School Football League"];h.useEffect(()=>{g()},[]);const g=async()=>{try{w(!0);const[L,D]=await Promise.all([jt.getHistory(),fetch("http://localhost:3002/api/playing-history/stats",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(z=>z.json())]);r(L.history),D.success&&(o(D.stats),x(D.positions),j(D.leagues))}catch(L){console.error("Error loading playing history:",L),p("Failed to load playing history")}finally{w(!1)}},N=()=>{f({teamName:"",league:"",ageGroup:"",position:"",season:"",startDate:"",endDate:"",isCurrentTeam:!1,achievements:"",matchesPlayed:"",goalsScored:"",notes:""}),I(null)},V=L=>{L?(I(L),f({teamName:L.teamName,league:L.league,ageGroup:L.ageGroup,position:L.position,season:L.season,startDate:L.startDate.split("T")[0],endDate:L.endDate?L.endDate.split("T")[0]:"",isCurrentTeam:L.isCurrentTeam,achievements:L.achievements||"",matchesPlayed:L.matchesPlayed?.toString()||"",goalsScored:L.goalsScored?.toString()||"",notes:L.notes||""})):N(),P(!0)},H=()=>{P(!1),N()},T=async()=>{try{const L={...W,matchesPlayed:W.matchesPlayed?parseInt(W.matchesPlayed):void 0,goalsScored:W.goalsScored?parseInt(W.goalsScored):void 0,endDate:W.endDate||void 0};k?(await jt.update(k.id,L),b("Playing history updated successfully!")):(await jt.create(L),b("Playing history added successfully!")),H(),g()}catch(L){console.error("Error saving playing history:",L),p("Failed to save playing history")}},C=async L=>{if(window.confirm("Are you sure you want to delete this playing history entry?"))try{await jt.delete(L),b("Playing history deleted successfully!"),g()}catch(D){console.error("Error deleting playing history:",D),p("Failed to delete playing history")}},_=async(L,D)=>{try{await jt.updateCurrentStatus(L,D),b("Current team status updated!"),g()}catch(z){console.error("Error updating current team status:",z),p("Failed to update current team status")}},B=L=>new Date(L).toLocaleDateString("en-GB",{year:"numeric",month:"short",day:"numeric"}),te=()=>{const L=new Date,D=L.getFullYear();return L.getMonth()>=7?`${D}/${D+1}`:`${D-1}/${D}`};return u?e.jsx(d,{display:"flex",justifyContent:"center",alignItems:"center",height:"400px",children:e.jsx("div",{children:"Loading playing history..."})}):e.jsxs(d,{children:[m&&e.jsx(G,{severity:"error",sx:{mb:2},onClose:()=>p(null),children:m}),F&&e.jsx(G,{severity:"success",sx:{mb:2},onClose:()=>b(null),children:F}),a&&e.jsxs(Pe,{defaultExpanded:!0,sx:{mb:3},children:[e.jsx(we,{expandIcon:e.jsx(Se,{}),children:e.jsxs(d,{display:"flex",alignItems:"center",children:[e.jsx(Xn,{sx:{mr:1}}),e.jsx(n,{variant:"h6",children:"Playing Statistics"})]})}),e.jsxs(Te,{children:[e.jsxs(i,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(i,{item:!0,xs:6,sm:3,children:e.jsx(de,{children:e.jsxs(ue,{sx:{textAlign:"center",py:2},children:[e.jsx(n,{variant:"h4",color:"primary",children:a.totalTeams}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"Total Teams"})]})})}),e.jsx(i,{item:!0,xs:6,sm:3,children:e.jsx(de,{children:e.jsxs(ue,{sx:{textAlign:"center",py:2},children:[e.jsx(n,{variant:"h4",color:"secondary",children:a.currentTeams}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"Current Teams"})]})})}),e.jsx(i,{item:!0,xs:6,sm:3,children:e.jsx(de,{children:e.jsxs(ue,{sx:{textAlign:"center",py:2},children:[e.jsx(n,{variant:"h4",color:"success.main",children:a.totalMatches}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"Total Matches"})]})})}),e.jsx(i,{item:!0,xs:6,sm:3,children:e.jsx(de,{children:e.jsxs(ue,{sx:{textAlign:"center",py:2},children:[e.jsx(n,{variant:"h4",color:"warning.main",children:a.totalGoals}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"Total Goals"})]})})})]}),e.jsxs(i,{container:!0,spacing:3,children:[e.jsxs(i,{item:!0,xs:12,md:6,children:[e.jsxs(n,{variant:"h6",gutterBottom:!0,children:[e.jsx(Ke,{sx:{mr:1,verticalAlign:"middle"}}),"Most Played Positions"]}),e.jsx(kr,{spacing:1,children:l.slice(0,3).map(L=>e.jsxs(d,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx(n,{variant:"body2",children:L.position}),e.jsx(Mt,{badgeContent:L.count,color:"primary",children:e.jsx(Ke,{color:"action"})})]},L.position))})]}),e.jsxs(i,{item:!0,xs:12,md:6,children:[e.jsxs(n,{variant:"h6",gutterBottom:!0,children:[e.jsx(Ft,{sx:{mr:1,verticalAlign:"middle"}}),"Leagues Played"]}),e.jsx(kr,{spacing:1,children:s.slice(0,3).map(L=>e.jsxs(d,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx(n,{variant:"body2",children:L.league}),e.jsx(Mt,{badgeContent:L.count,color:"secondary",children:e.jsx(Ft,{color:"action"})})]},L.league))})]})]})]})]}),e.jsxs(re,{sx:{p:3},children:[e.jsxs(d,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsxs(n,{variant:"h5",children:[e.jsx(Jr,{sx:{mr:1,verticalAlign:"middle"}}),"Playing History"]}),e.jsx(M,{variant:"contained",startIcon:e.jsx(ht,{}),onClick:()=>V(),children:"Add Team History"})]}),t.length===0?e.jsxs(d,{textAlign:"center",py:6,children:[e.jsx(Ke,{sx:{fontSize:64,color:"text.secondary",mb:2}}),e.jsx(n,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No playing history yet"}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Add your football teams and track your playing career"}),e.jsx(M,{variant:"contained",startIcon:e.jsx(ht,{}),onClick:()=>V(),children:"Add Your First Team"})]}):e.jsx(Kn,{children:e.jsxs(Zn,{children:[e.jsx(ea,{children:e.jsxs(Dr,{children:[e.jsx(We,{children:"Team & League"}),e.jsx(We,{children:"Position"}),e.jsx(We,{children:"Season & Duration"}),e.jsx(We,{children:"Performance"}),e.jsx(We,{align:"center",children:"Current"}),e.jsx(We,{align:"right",children:"Actions"})]})}),e.jsx(ta,{children:t.map(L=>e.jsxs(Dr,{children:[e.jsx(We,{children:e.jsxs(d,{children:[e.jsx(n,{variant:"body1",fontWeight:500,children:L.teamName}),e.jsxs(n,{variant:"body2",color:"text.secondary",children:[L.league," â€¢ ",L.ageGroup]})]})}),e.jsx(We,{children:e.jsx(q,{label:L.position,size:"small",color:"primary",icon:e.jsx(Ke,{})})}),e.jsx(We,{children:e.jsxs(d,{children:[e.jsx(n,{variant:"body2",fontWeight:500,children:L.season}),e.jsxs(n,{variant:"caption",color:"text.secondary",children:[B(L.startDate),L.endDate&&` - ${B(L.endDate)}`]})]})}),e.jsx(We,{children:e.jsxs(d,{children:[L.matchesPlayed&&e.jsxs(n,{variant:"caption",display:"block",children:["ðŸƒ ",L.matchesPlayed," matches"]}),L.goalsScored&&e.jsxs(n,{variant:"caption",display:"block",children:["âš½ ",L.goalsScored," goals"]}),L.achievements&&e.jsx(hr,{title:L.achievements,children:e.jsx(q,{label:"ðŸ† Achievements",size:"small",variant:"outlined"})})]})}),e.jsx(We,{align:"center",children:e.jsx(qe,{control:e.jsx(Ye,{checked:L.isCurrentTeam,onChange:D=>_(L.id,D.target.checked),size:"small"}),label:""})}),e.jsxs(We,{align:"right",children:[e.jsx(he,{size:"small",onClick:()=>V(L),children:e.jsx(ra,{})}),e.jsx(he,{size:"small",color:"error",onClick:()=>C(L.id),children:e.jsx(mr,{})})]})]},L.id))})]})})]}),e.jsxs(Fe,{open:v,onClose:H,maxWidth:"md",fullWidth:!0,children:[e.jsx(Re,{children:k?"Edit Playing History":"Add Playing History"}),e.jsx(Me,{children:e.jsxs(i,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(A,{fullWidth:!0,label:"Team Name",value:W.teamName,onChange:L=>f({...W,teamName:L.target.value}),placeholder:"e.g., Manchester United Youth FC"})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(zt,{fullWidth:!0,options:R,value:W.league||null,onChange:(L,D)=>f({...W,league:D||""}),renderInput:L=>e.jsx(A,{...L,label:"League",placeholder:"Type to search leagues..."}),filterOptions:(L,{inputValue:D})=>D?L.filter(z=>z.toLowerCase().includes(D.toLowerCase())):L,noOptionsText:"No leagues found"})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsxs(X,{fullWidth:!0,children:[e.jsx(K,{children:"Age Group"}),e.jsx(J,{value:W.ageGroup,label:"Age Group",onChange:L=>f({...W,ageGroup:L.target.value}),children:O.map(L=>e.jsx(U,{value:L,children:L},L))})]})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsxs(X,{fullWidth:!0,children:[e.jsx(K,{children:"Position"}),e.jsx(J,{value:W.position,label:"Position",onChange:L=>f({...W,position:L.target.value}),children:S.map(L=>e.jsx(U,{value:L,children:L},L))})]})}),e.jsx(i,{item:!0,xs:12,sm:4,children:e.jsx(A,{fullWidth:!0,label:"Season",value:W.season,onChange:L=>f({...W,season:L.target.value}),placeholder:te(),helperText:"e.g., 2024/25"})}),e.jsx(i,{item:!0,xs:12,sm:4,children:e.jsx(A,{fullWidth:!0,type:"date",label:"Start Date",value:W.startDate,onChange:L=>f({...W,startDate:L.target.value}),InputLabelProps:{shrink:!0}})}),e.jsx(i,{item:!0,xs:12,sm:4,children:e.jsx(A,{fullWidth:!0,type:"date",label:"End Date (Optional)",value:W.endDate,onChange:L=>f({...W,endDate:L.target.value}),InputLabelProps:{shrink:!0},helperText:"Leave empty if still playing"})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(qe,{control:e.jsx(Ye,{checked:W.isCurrentTeam,onChange:L=>f({...W,isCurrentTeam:L.target.checked})}),label:"This is my current team"})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(A,{fullWidth:!0,type:"number",label:"Matches Played (Optional)",value:W.matchesPlayed,onChange:L=>f({...W,matchesPlayed:L.target.value})})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(A,{fullWidth:!0,type:"number",label:"Goals Scored (Optional)",value:W.goalsScored,onChange:L=>f({...W,goalsScored:L.target.value})})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(A,{fullWidth:!0,multiline:!0,rows:2,label:"Achievements (Optional)",value:W.achievements,onChange:L=>f({...W,achievements:L.target.value}),placeholder:"e.g., League Winners, Cup Finalists, Top Scorer"})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(A,{fullWidth:!0,multiline:!0,rows:3,label:"Notes (Optional)",value:W.notes,onChange:L=>f({...W,notes:L.target.value}),placeholder:"Additional notes about your time at this team..."})})]})}),e.jsxs(Oe,{children:[e.jsx(M,{onClick:H,children:"Cancel"}),e.jsx(M,{onClick:T,variant:"contained",disabled:!W.teamName||!W.league||!W.position||!W.season||!W.startDate,children:k?"Update":"Add"})]})]})]})};function ft(t){const{children:r,value:a,index:o,...l}=t;return e.jsx("div",{role:"tabpanel",hidden:a!==o,id:`profile-tabpanel-${o}`,"aria-labelledby":`profile-tab-${o}`,...l,children:a===o&&e.jsx(d,{sx:{p:3},children:r})})}const ws=()=>{const t=Ne(),{user:r}=le(),[a,o]=h.useState(0),[l,x]=h.useState(!0),[s,j]=h.useState(!1),[u,w]=h.useState(!1),[v,P]=h.useState(""),[k,I]=h.useState(null),[m,p]=h.useState({phone:"",dateOfBirth:"",location:"",bio:"",position:"",preferredFoot:void 0,height:void 0,weight:void 0,experienceLevel:void 0,availability:[],coachingLicense:"",yearsExperience:void 0,specializations:[],trainingLocation:"",matchLocation:"",trainingDays:[],ageGroupsCoached:[],teamName:"",currentAgeGroup:"",trainingTime:"",matchDay:"",emergencyContact:"",emergencyPhone:"",medicalInfo:""}),F=["Goalkeeper","Centre-back","Left-back","Right-back","Defensive Midfielder","Central Midfielder","Attacking Midfielder","Left Wing","Right Wing","Striker","Centre Forward"],b=["Beginner","Intermediate","Advanced","Professional"],W=["Monday Morning","Monday Evening","Tuesday Morning","Tuesday Evening","Wednesday Morning","Wednesday Evening","Thursday Morning","Thursday Evening","Friday Morning","Friday Evening","Saturday Morning","Saturday Evening","Sunday Morning","Sunday Evening"],f=["Youth Development","Technical Skills","Tactical Awareness","Physical Conditioning","Goalkeeping","Set Pieces","Mental Coaching","Injury Prevention"],S=["Under 6","Under 7","Under 8","Under 9","Under 10","Under 11","Under 12","Under 13","Under 14","Under 15","Under 16","Under 17","Under 18","Under 21","Senior","Veterans"],O=["Saturday","Sunday","Midweek"];h.useEffect(()=>{if(!r){t("/login");return}R()},[r,t]);const R=async()=>{try{x(!0);const T=await Mr.get();I(T.profile);const C=T.profile;p({phone:C.phone||"",dateOfBirth:C.dateOfBirth||"",location:C.location||"",bio:C.bio||"",position:C.position||"",preferredFoot:C.preferredFoot,height:C.height,weight:C.weight,experienceLevel:C.experienceLevel,availability:C.availability||[],coachingLicense:C.coachingLicense||"",yearsExperience:C.yearsExperience,specializations:C.specializations||[],trainingLocation:C.trainingLocation||"",matchLocation:C.matchLocation||"",trainingDays:C.trainingDays||[],ageGroupsCoached:C.ageGroupsCoached||[],teamName:C.teamName||"",currentAgeGroup:C.currentAgeGroup||"",trainingTime:C.trainingTime||"",matchDay:C.matchDay||"",emergencyContact:C.emergencyContact||"",emergencyPhone:C.emergencyPhone||"",medicalInfo:C.medicalInfo||""})}catch(T){console.error("Error loading profile:",T),P("Failed to load profile data")}finally{x(!1)}},g=T=>C=>{const _=C.target.value;p(B=>({...B,[T]:T==="height"||T==="weight"||T==="yearsExperience"?_===""?void 0:parseInt(_):_}))},N=T=>C=>{p(_=>({..._,[T]:C.target.value}))},V=T=>C=>{const _=C.target.value;p(B=>({...B,[T]:typeof _=="string"?_.split(","):_}))},H=async()=>{try{j(!0),P(""),await Mr.update(m),w(!0),setTimeout(()=>w(!1),3e3),await R()}catch(T){console.error("Error saving profile:",T),P(`Failed to save profile: ${T.response?.data?.error||T.message}`)}finally{j(!1)}};return l?e.jsx(ae,{children:e.jsx(d,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:e.jsx(xe,{})})}):e.jsxs(ae,{maxWidth:"lg",sx:{mt:4,mb:4},children:[e.jsx(n,{variant:"h4",gutterBottom:!0,children:"My Profile"}),!k?.isProfileComplete&&e.jsxs(G,{severity:"info",sx:{mb:3},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Welcome to The Grassroots Hub! ðŸŽ‰"}),e.jsxs(n,{variant:"body1",children:["Complete your profile to get started. This helps us connect you with the right ",r?.role==="Coach"?"players":"teams"," and opportunities."]})]}),u&&e.jsx(G,{severity:"success",sx:{mb:2},children:"Profile updated successfully!"}),v&&e.jsx(G,{severity:"error",sx:{mb:2},children:v}),e.jsxs(re,{sx:{width:"100%"},children:[e.jsx(d,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(Ut,{value:a,onChange:(T,C)=>o(C),children:[e.jsx(Le,{icon:e.jsx(Ze,{}),label:"Basic Information"}),r?.role==="Player"&&e.jsx(Le,{icon:e.jsx(Ir,{}),label:"Player Details"}),r?.role==="Coach"&&e.jsx(Le,{icon:e.jsx(Ir,{}),label:"Team Details"}),r?.role==="Player"&&e.jsx(Le,{icon:e.jsx(Jr,{}),label:"Playing History"}),e.jsx(Le,{icon:e.jsx(na,{}),label:"Contact & Emergency"})]})}),e.jsxs(ft,{value:a,index:0,children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Basic Information"}),e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(A,{fullWidth:!0,label:"First Name",value:r?.firstName||"",disabled:!0,helperText:"Contact support to change your name"})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(A,{fullWidth:!0,label:"Last Name",value:r?.lastName||"",disabled:!0,helperText:"Contact support to change your name"})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(A,{fullWidth:!0,label:"Email",value:r?.email||"",disabled:!0,helperText:"Contact support to change your email"})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(A,{fullWidth:!0,label:"Phone Number",value:m.phone,onChange:g("phone"),placeholder:"+44 7XXX XXXXXX"})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(A,{fullWidth:!0,label:"Date of Birth",type:"date",value:m.dateOfBirth,onChange:g("dateOfBirth"),InputLabelProps:{shrink:!0}})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(A,{fullWidth:!0,label:"Location",value:m.location,onChange:g("location"),placeholder:"City, County"})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(A,{fullWidth:!0,multiline:!0,rows:4,label:"Bio",value:m.bio,onChange:g("bio"),placeholder:"Tell us about yourself...",helperText:`${m.bio?.length||0}/500 characters`,inputProps:{maxLength:500}})})]})]}),r?.role==="Player"&&e.jsxs(ft,{value:a,index:1,children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Player Details"}),e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsxs(X,{fullWidth:!0,children:[e.jsx(K,{children:"Position"}),e.jsx(J,{value:m.position||"",onChange:N("position"),label:"Position",children:F.map(T=>e.jsx(U,{value:T,children:T},T))})]})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsxs(X,{fullWidth:!0,children:[e.jsx(K,{children:"Preferred Foot"}),e.jsxs(J,{value:m.preferredFoot||"",onChange:N("preferredFoot"),label:"Preferred Foot",children:[e.jsx(U,{value:"Left",children:"Left"}),e.jsx(U,{value:"Right",children:"Right"}),e.jsx(U,{value:"Both",children:"Both"})]})]})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(A,{fullWidth:!0,label:"Height (cm)",type:"number",value:m.height||"",onChange:g("height"),inputProps:{min:100,max:250}})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(A,{fullWidth:!0,label:"Weight (kg)",type:"number",value:m.weight||"",onChange:g("weight"),inputProps:{min:30,max:200}})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsxs(X,{fullWidth:!0,children:[e.jsx(K,{children:"Experience Level"}),e.jsx(J,{value:m.experienceLevel||"",onChange:N("experienceLevel"),label:"Experience Level",children:b.map(T=>e.jsx(U,{value:T,children:T},T))})]})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsxs(X,{fullWidth:!0,children:[e.jsx(K,{children:"Availability"}),e.jsx(J,{multiple:!0,value:m.availability||[],onChange:V("availability"),input:e.jsx(Ot,{label:"Availability"}),renderValue:T=>e.jsx(d,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:T.map(C=>e.jsx(q,{label:C,size:"small"},C))}),children:W.map(T=>e.jsxs(U,{value:T,children:[e.jsx(rr,{checked:(m.availability||[]).indexOf(T)>-1}),e.jsx(fe,{primary:T})]},T))})]})})]})]}),r?.role==="Coach"&&e.jsxs(ft,{value:a,index:1,children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Team Details"}),e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(A,{fullWidth:!0,label:"Team Name",value:m.teamName,onChange:g("teamName"),placeholder:"e.g., Manchester United FC Youth"})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsxs(X,{fullWidth:!0,children:[e.jsx(K,{children:"Current Age Group"}),e.jsx(J,{value:m.currentAgeGroup||"",onChange:N("currentAgeGroup"),label:"Current Age Group",children:S.map(T=>e.jsx(U,{value:T,children:T},T))})]})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(A,{fullWidth:!0,label:"Training Location",value:m.trainingLocation,onChange:g("trainingLocation"),placeholder:"Training ground, facility name"})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(A,{fullWidth:!0,label:"Training Time",value:m.trainingTime,onChange:g("trainingTime"),placeholder:"e.g., Tuesday 6:30 PM, Saturday 10:00 AM"})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsxs(X,{fullWidth:!0,children:[e.jsx(K,{children:"Match Day"}),e.jsx(J,{value:m.matchDay||"",onChange:N("matchDay"),label:"Match Day",children:O.map(T=>e.jsx(U,{value:T,children:T},T))})]})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(A,{fullWidth:!0,label:"Home Match Location",value:m.matchLocation,onChange:g("matchLocation"),placeholder:"Home ground, stadium name"})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(A,{fullWidth:!0,label:"Coaching License",value:m.coachingLicense,onChange:g("coachingLicense"),placeholder:"UEFA A, FA Level 2, etc."})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(A,{fullWidth:!0,label:"Years of Experience",type:"number",value:m.yearsExperience||"",onChange:g("yearsExperience"),inputProps:{min:0,max:50}})}),e.jsx(i,{item:!0,xs:12,children:e.jsxs(X,{fullWidth:!0,children:[e.jsx(K,{children:"Specializations"}),e.jsx(J,{multiple:!0,value:m.specializations||[],onChange:V("specializations"),input:e.jsx(Ot,{label:"Specializations"}),renderValue:T=>e.jsx(d,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:T.map(C=>e.jsx(q,{label:C,size:"small"},C))}),children:f.map(T=>e.jsxs(U,{value:T,children:[e.jsx(rr,{checked:(m.specializations||[]).indexOf(T)>-1}),e.jsx(fe,{primary:T})]},T))})]})})]})]}),r?.role==="Player"&&e.jsx(ft,{value:a,index:2,children:e.jsx(Ps,{})}),e.jsxs(ft,{value:a,index:r?.role==="Player"?3:r?.role==="Coach"?2:1,children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Contact & Emergency Information"}),e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(A,{fullWidth:!0,label:"Emergency Contact Name",value:m.emergencyContact,onChange:g("emergencyContact"),placeholder:"Full name of emergency contact"})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(A,{fullWidth:!0,label:"Emergency Contact Phone",value:m.emergencyPhone,onChange:g("emergencyPhone"),placeholder:"+44 7XXX XXXXXX"})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(A,{fullWidth:!0,multiline:!0,rows:3,label:"Medical Information",value:m.medicalInfo,onChange:g("medicalInfo"),placeholder:"Any medical conditions, allergies, or important health information...",helperText:"This information will be kept confidential and used only for safety purposes"})})]})]}),e.jsx(d,{sx:{p:3,borderTop:1,borderColor:"divider"},children:e.jsxs(d,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(d,{children:k?.isProfileComplete?e.jsx(q,{label:"Profile Complete",color:"success",variant:"outlined"}):e.jsx(q,{label:"Profile Incomplete",color:"warning",variant:"outlined"})}),e.jsx(M,{variant:"contained",startIcon:s?e.jsx(xe,{size:20}):e.jsx(Qr,{}),onClick:H,disabled:s,size:"large",children:s?"Saving...":"Save Profile"})]})})]}),!k?.isProfileComplete&&e.jsxs(G,{severity:"info",sx:{mt:3},children:[e.jsx(n,{variant:"subtitle1",gutterBottom:!0,children:"Complete your profile to get the most out of The Grassroots Hub!"}),e.jsxs(n,{variant:"body2",children:["A complete profile helps ",r?.role==="Coach"?"players find you":"coaches discover your talents"," and increases your chances of finding the perfect match."]})]})]})},Ss=()=>{const{user:t}=le(),[r,a]=h.useState(st),[o,l]=h.useState(st),[x,s]=h.useState(!1),[j,u]=h.useState(""),[w,v]=h.useState(""),[P,k]=h.useState(!1);h.useEffect(()=>{I()},[]),h.useEffect(()=>{const b=JSON.stringify(r)!==JSON.stringify(o);k(b)},[r,o]);const I=async()=>{try{s(!0);const b=localStorage.getItem("aboutContent");if(b){const W=JSON.parse(b);a(W),l(W)}else a(st),l(st)}catch{v("Failed to load about content")}finally{s(!1)}},m=async()=>{try{s(!0),v("");const b={...r,lastUpdated:new Date().toISOString(),updatedBy:t?.firstName+" "+t?.lastName||"Admin"};localStorage.setItem("aboutContent",JSON.stringify(b)),a(b),l(b),u("About content updated successfully!"),setTimeout(()=>u(""),3e3)}catch{v("Failed to save about content")}finally{s(!1)}},p=()=>{a(o),v(""),u("")},F=(b,W)=>{a(f=>{const S={...f},O=b.split(".");return O.length===1?S[O[0]]=W:O.length===2?S[O[0]][O[1]]=W:O.length===3&&(S[O[0]][O[1]][O[2]]=W),S})};return t?.role!=="Admin"?e.jsx(ae,{maxWidth:"md",sx:{py:4},children:e.jsx(G,{severity:"error",children:"Access denied. Only administrators can manage the About page content."})}):e.jsxs(ae,{maxWidth:"lg",sx:{py:4},children:[e.jsxs(d,{sx:{mb:4},children:[e.jsx(n,{variant:"h4",gutterBottom:!0,sx:{color:"primary.main"},children:"Manage About Page Content"}),e.jsx(n,{variant:"body1",color:"textSecondary",sx:{mb:2},children:"Update the content displayed on the About Us page. Changes will be reflected immediately."}),r.lastUpdated&&e.jsx(q,{icon:e.jsx(Rt,{}),label:`Last updated: ${new Date(r.lastUpdated).toLocaleDateString("en-GB")} by ${r.updatedBy}`,variant:"outlined",size:"small",sx:{mb:2}})]}),w&&e.jsx(G,{severity:"error",sx:{mb:3},children:w}),j&&e.jsx(G,{severity:"success",sx:{mb:3},children:j}),e.jsxs(re,{elevation:2,sx:{p:3,mb:4},children:[e.jsxs(d,{sx:{display:"flex",gap:2,mb:3},children:[e.jsx(M,{variant:"contained",startIcon:e.jsx(Qr,{}),onClick:m,disabled:x||!P,children:x?"Saving...":"Save Changes"}),e.jsx(M,{variant:"outlined",startIcon:e.jsx(aa,{}),onClick:p,disabled:x||!P,children:"Reset Changes"})]}),P&&e.jsx(G,{severity:"info",sx:{mb:3},children:"You have unsaved changes. Remember to save your updates."}),e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{item:!0,xs:12,children:e.jsxs(Pe,{defaultExpanded:!0,children:[e.jsx(we,{expandIcon:e.jsx(Se,{}),children:e.jsx(n,{variant:"h6",children:"Header Section"})}),e.jsx(Te,{children:e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:12,children:e.jsx(A,{fullWidth:!0,label:"Page Title",value:r.title,onChange:b=>F("title",b.target.value),variant:"outlined"})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(A,{fullWidth:!0,label:"Subtitle",value:r.subtitle,onChange:b=>F("subtitle",b.target.value),variant:"outlined"})})]})})]})}),e.jsx(i,{item:!0,xs:12,children:e.jsxs(Pe,{children:[e.jsx(we,{expandIcon:e.jsx(Se,{}),children:e.jsx(n,{variant:"h6",children:"Founder Information"})}),e.jsx(Te,{children:e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:12,md:6,children:e.jsx(A,{fullWidth:!0,label:"Founder Name",value:r.founderName,onChange:b=>F("founderName",b.target.value),variant:"outlined"})}),e.jsx(i,{item:!0,xs:12,md:6,children:e.jsx(A,{fullWidth:!0,label:"Founder Title",value:r.founderTitle,onChange:b=>F("founderTitle",b.target.value),variant:"outlined"})})]})})]})}),e.jsx(i,{item:!0,xs:12,children:e.jsxs(Pe,{children:[e.jsx(we,{expandIcon:e.jsx(Se,{}),children:e.jsx(n,{variant:"h6",children:"Personal Story"})}),e.jsx(Te,{children:e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:12,children:e.jsx(A,{fullWidth:!0,multiline:!0,rows:4,label:"Paragraph 1",value:r.personalStory.paragraph1,onChange:b=>F("personalStory.paragraph1",b.target.value),variant:"outlined"})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(A,{fullWidth:!0,multiline:!0,rows:4,label:"Paragraph 2",value:r.personalStory.paragraph2,onChange:b=>F("personalStory.paragraph2",b.target.value),variant:"outlined"})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(A,{fullWidth:!0,multiline:!0,rows:4,label:"Paragraph 3",value:r.personalStory.paragraph3,onChange:b=>F("personalStory.paragraph3",b.target.value),variant:"outlined"})})]})})]})}),e.jsx(i,{item:!0,xs:12,children:e.jsxs(Pe,{children:[e.jsx(we,{expandIcon:e.jsx(Se,{}),children:e.jsx(n,{variant:"h6",children:"Mission & Vision"})}),e.jsx(Te,{children:e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:12,children:e.jsx(A,{fullWidth:!0,multiline:!0,rows:3,label:"Mission Statement",value:r.mission,onChange:b=>F("mission",b.target.value),variant:"outlined"})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(A,{fullWidth:!0,multiline:!0,rows:3,label:"Vision Statement",value:r.vision,onChange:b=>F("vision",b.target.value),variant:"outlined"})})]})})]})}),e.jsx(i,{item:!0,xs:12,children:e.jsxs(Pe,{children:[e.jsx(we,{expandIcon:e.jsx(Se,{}),children:e.jsx(n,{variant:"h6",children:"What Makes Us Different"})}),e.jsx(Te,{children:e.jsxs(i,{container:!0,spacing:2,children:[e.jsxs(i,{item:!0,xs:12,md:4,children:[e.jsx(A,{fullWidth:!0,label:"Football People - Title",value:r.differentiators.footballPeople.title,onChange:b=>F("differentiators.footballPeople.title",b.target.value),variant:"outlined",sx:{mb:2}}),e.jsx(A,{fullWidth:!0,multiline:!0,rows:3,label:"Football People - Description",value:r.differentiators.footballPeople.description,onChange:b=>F("differentiators.footballPeople.description",b.target.value),variant:"outlined"})]}),e.jsxs(i,{item:!0,xs:12,md:4,children:[e.jsx(A,{fullWidth:!0,label:"Modern Technology - Title",value:r.differentiators.modernTechnology.title,onChange:b=>F("differentiators.modernTechnology.title",b.target.value),variant:"outlined",sx:{mb:2}}),e.jsx(A,{fullWidth:!0,multiline:!0,rows:3,label:"Modern Technology - Description",value:r.differentiators.modernTechnology.description,onChange:b=>F("differentiators.modernTechnology.description",b.target.value),variant:"outlined"})]}),e.jsxs(i,{item:!0,xs:12,md:4,children:[e.jsx(A,{fullWidth:!0,label:"Community Focused - Title",value:r.differentiators.communityFocused.title,onChange:b=>F("differentiators.communityFocused.title",b.target.value),variant:"outlined",sx:{mb:2}}),e.jsx(A,{fullWidth:!0,multiline:!0,rows:3,label:"Community Focused - Description",value:r.differentiators.communityFocused.description,onChange:b=>F("differentiators.communityFocused.description",b.target.value),variant:"outlined"})]})]})})]})}),e.jsx(i,{item:!0,xs:12,children:e.jsxs(Pe,{children:[e.jsx(we,{expandIcon:e.jsx(Se,{}),children:e.jsx(n,{variant:"h6",children:"Personal Message"})}),e.jsx(Te,{children:e.jsx(A,{fullWidth:!0,multiline:!0,rows:6,label:"Personal Message Quote",value:r.personalMessage,onChange:b=>F("personalMessage",b.target.value),variant:"outlined",helperText:"This appears as a quote from the founder"})})]})}),e.jsx(i,{item:!0,xs:12,children:e.jsxs(Pe,{children:[e.jsx(we,{expandIcon:e.jsx(Se,{}),children:e.jsx(n,{variant:"h6",children:"Call to Action"})}),e.jsx(Te,{children:e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:12,children:e.jsx(A,{fullWidth:!0,label:"Call to Action Title",value:r.callToAction.title,onChange:b=>F("callToAction.title",b.target.value),variant:"outlined"})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(A,{fullWidth:!0,multiline:!0,rows:3,label:"Call to Action Description",value:r.callToAction.description,onChange:b=>F("callToAction.description",b.target.value),variant:"outlined"})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(A,{fullWidth:!0,label:"Call to Action Footer",value:r.callToAction.footer,onChange:b=>F("callToAction.footer",b.target.value),variant:"outlined"})})]})})]})})]})]})]})},be="http://localhost:3001/api",Ts=void 0;class ks{async initGoogleCalendar(){return new Promise((r,a)=>{if(typeof window.gapi>"u"){const o=document.createElement("script");o.src="https://apis.google.com/js/api.js",o.onload=()=>{window.gapi.load("client:auth2",()=>{window.gapi.client.init({clientId:Ts,discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"],scope:"https://www.googleapis.com/auth/calendar"}).then(r).catch(a)})},document.head.appendChild(o)}else r()})}async connectGoogleCalendar(){await this.initGoogleCalendar();const a=await window.gapi.auth2.getAuthInstance().signIn(),o=a.getBasicProfile(),l=a.getAuthResponse(),x={provider:"google",accountEmail:o.getEmail(),accessToken:l.access_token,refreshToken:l.refresh_token||"",isActive:!0,syncEnabled:!0};return(await ye.post(`${be}/calendar/integrations`,x)).data.integration}async syncWithGoogleCalendar(r){return(await ye.post(`${be}/calendar/integrations/${r}/sync`)).data}async connectOutlookCalendar(){const r=new window.msal.PublicClientApplication({auth:{clientId:void 0,authority:"https://login.microsoftonline.com/common",redirectUri:window.location.origin}}),a={scopes:["https://graph.microsoft.com/calendars.readwrite"]},o=await r.loginPopup(a),l={provider:"outlook",accountEmail:o.account.username,accessToken:o.accessToken,isActive:!0,syncEnabled:!0};return(await ye.post(`${be}/calendar/integrations`,l)).data.integration}async createRecurringEvent(r){return(await ye.post(`${be}/calendar/recurring-events`,r)).data.event}async getRecurringEvents(r,a){return(await ye.get(`${be}/calendar/recurring-events`,{params:{startDate:r.toISOString(),endDate:a.toISOString()}})).data.events}async updateRecurringEvent(r,a,o){await ye.put(`${be}/calendar/recurring-events/${r}`,{...a,updateType:o})}async detectConflicts(r){return(await ye.post(`${be}/calendar/conflicts/detect`,r)).data}async getConflictsForPeriod(r,a,o){return(await ye.get(`${be}/calendar/conflicts`,{params:{startDate:r.toISOString(),endDate:a.toISOString(),userId:o}})).data.conflicts}async getWeatherForEvent(r,a){throw new Error("Weather API key not configured")}generateWeatherRecommendation(r){const a=r.main.temp,o=r.rain?.["3h"]||0,l=r.wind.speed;return o>10?{suitable:!1,message:"Heavy rain expected - consider indoor alternatives",alternatives:["Indoor training facility","Postpone to next available day","Virtual training session"]}:a<0?{suitable:!1,message:"Freezing conditions - unsafe for outdoor activities",alternatives:["Indoor venue","Postpone until temperature rises","Modified indoor training"]}:l>20?{suitable:!1,message:"Very strong winds - may affect safety and gameplay",alternatives:["Sheltered venue","Indoor facility","Reschedule for calmer conditions"]}:o>2||a<5||l>15?{suitable:!0,message:"Playable but challenging conditions - ensure proper preparation",alternatives:["Extra warm-up time","Waterproof equipment","Shorter session duration"]}:{suitable:!0,message:"Good conditions for outdoor activities",alternatives:[]}}async getSchedulingPreferences(r){return(await ye.get(`${be}/calendar/preferences/${r}`)).data.preferences}async updateSchedulingPreferences(r,a){await ye.put(`${be}/calendar/preferences/${r}`,a)}async suggestOptimalTimes(r){return(await ye.post(`${be}/calendar/suggest-times`,r)).data}async setReminders(r,a){await ye.put(`${be}/calendar/events/${r}/reminders`,{reminders:a})}async getUpcomingReminders(r){return(await ye.get(`${be}/calendar/reminders/${r}`)).data.reminders}async exportToICS(r){return(await ye.post(`${be}/calendar/export/ics`,{eventIds:r},{responseType:"blob"})).data}async importFromICS(r){const a=new FormData;return a.append("icsFile",r),(await ye.post(`${be}/calendar/import/ics`,a,{headers:{"Content-Type":"multipart/form-data"}})).data}}const Ue=new ks,Ds=()=>{const{user:t}=le(),[r,a]=h.useState([]),[o,l]=h.useState(null),[x,s]=h.useState(!1),[j,u]=h.useState(""),[w,v]=h.useState(""),[P,k]=h.useState(!1);h.useEffect(()=>{I(),m()},[]);const I=async()=>{try{a([])}catch(R){console.error("Error loading integrations:",R)}},m=async()=>{try{if(t?.id){const R=await Ue.getSchedulingPreferences(t.id);l(R)}}catch(R){console.error("Error loading preferences:",R),l({userId:t?.id||"",preferredTimes:[{dayOfWeek:1,startHour:18,endHour:20},{dayOfWeek:3,startHour:18,endHour:20},{dayOfWeek:6,startHour:10,endHour:16}],blackoutDates:[],minimumNoticePeriod:24,maximumEventsPerDay:3,preferredLocations:[],travelTime:30,autoAcceptTrials:!1,conflictResolution:"manual"})}},p=async R=>{s(!0),u("");try{let g;switch(R){case"google":g=await Ue.connectGoogleCalendar();break;case"outlook":g=await Ue.connectOutlookCalendar();break;case"apple":throw new Error("Apple Calendar integration coming soon");default:throw new Error("Unsupported calendar provider")}a(N=>[...N,g]),v(`Successfully connected ${R} calendar!`)}catch(g){u(g instanceof Error?g.message:"Failed to connect calendar")}finally{s(!1)}},F=async(R,g)=>{try{a(N=>N.map(V=>V.id===R?{...V,syncEnabled:g}:V)),g&&(await Ue.syncWithGoogleCalendar(R),v("Calendar sync enabled and completed!"))}catch{u("Failed to toggle calendar sync")}},b=async()=>{if(!(!o||!t?.id))try{await Ue.updateSchedulingPreferences(t.id,o),v("Preferences saved successfully!"),k(!1)}catch{u("Failed to save preferences")}},W=()=>{o&&l(R=>R?{...R,preferredTimes:[...R.preferredTimes,{dayOfWeek:1,startHour:18,endHour:20}]}:null)},f=(R,g,N)=>{o&&l(V=>V?{...V,preferredTimes:V.preferredTimes.map((H,T)=>T===R?{...H,[g]:N}:H)}:null)},S=R=>{o&&l(g=>g?{...g,preferredTimes:g.preferredTimes.filter((N,V)=>V!==R)}:null)},O=R=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][R];return e.jsxs(d,{sx:{p:2},children:[e.jsx(n,{variant:"h5",gutterBottom:!0,children:"Calendar & Scheduling Integration"}),j&&e.jsx(G,{severity:"error",sx:{mb:2},children:j}),w&&e.jsx(G,{severity:"success",sx:{mb:2},children:w}),e.jsxs(Pe,{defaultExpanded:!0,children:[e.jsx(we,{expandIcon:e.jsx(Se,{}),children:e.jsx(n,{variant:"h6",children:"Calendar Integrations"})}),e.jsx(Te,{children:e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:12,md:4,children:e.jsxs(de,{children:[e.jsxs(ue,{children:[e.jsxs(d,{display:"flex",alignItems:"center",mb:2,children:[e.jsx(nr,{color:"primary",sx:{mr:1}}),e.jsx(n,{variant:"h6",children:"Google Calendar"})]}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"Sync with Google Calendar for seamless scheduling"})]}),e.jsx(vt,{children:r.find(R=>R.provider==="google")?e.jsxs(d,{display:"flex",alignItems:"center",width:"100%",children:[e.jsx(q,{label:"Connected",color:"success",size:"small"}),e.jsx(qe,{control:e.jsx(Ye,{checked:r.find(R=>R.provider==="google")?.syncEnabled||!1,onChange:R=>{const g=r.find(N=>N.provider==="google");g&&F(g.id,R.target.checked)}}),label:"Sync",sx:{ml:"auto"}})]}):e.jsx(M,{variant:"outlined",onClick:()=>p("google"),disabled:x,startIcon:e.jsx(nr,{}),children:"Connect"})})]})}),e.jsx(i,{item:!0,xs:12,md:4,children:e.jsxs(de,{children:[e.jsxs(ue,{children:[e.jsxs(d,{display:"flex",alignItems:"center",mb:2,children:[e.jsx(ar,{color:"primary",sx:{mr:1}}),e.jsx(n,{variant:"h6",children:"Outlook Calendar"})]}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"Sync with Outlook/Office 365 calendar"})]}),e.jsx(vt,{children:r.find(R=>R.provider==="outlook")?e.jsxs(d,{display:"flex",alignItems:"center",width:"100%",children:[e.jsx(q,{label:"Connected",color:"success",size:"small"}),e.jsx(qe,{control:e.jsx(Ye,{checked:r.find(R=>R.provider==="outlook")?.syncEnabled||!1,onChange:R=>{const g=r.find(N=>N.provider==="outlook");g&&F(g.id,R.target.checked)}}),label:"Sync",sx:{ml:"auto"}})]}):e.jsx(M,{variant:"outlined",onClick:()=>p("outlook"),disabled:x,startIcon:e.jsx(ar,{}),children:"Connect"})})]})}),e.jsx(i,{item:!0,xs:12,md:4,children:e.jsxs(de,{children:[e.jsxs(ue,{children:[e.jsxs(d,{display:"flex",alignItems:"center",mb:2,children:[e.jsx(Ar,{sx:{mr:1}}),e.jsx(n,{variant:"h6",children:"Apple Calendar"})]}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"Sync with iCloud calendar (coming soon)"})]}),e.jsx(vt,{children:e.jsx(M,{variant:"outlined",disabled:!0,startIcon:e.jsx(Ar,{}),children:"Coming Soon"})})]})})]})})]}),e.jsxs(Pe,{children:[e.jsx(we,{expandIcon:e.jsx(Se,{}),children:e.jsx(n,{variant:"h6",children:"Auto-scheduling Preferences"})}),e.jsxs(Te,{children:[e.jsx(M,{variant:"outlined",onClick:()=>k(!0),startIcon:e.jsx(ur,{}),sx:{mb:2},children:"Configure Preferences"}),o&&e.jsxs(d,{children:[e.jsx(n,{variant:"subtitle1",gutterBottom:!0,children:"Current Settings:"}),e.jsxs(ct,{dense:!0,children:[e.jsx(ke,{children:e.jsx(fe,{primary:"Preferred Times",secondary:`${o.preferredTimes.length} time slots configured`})}),e.jsx(ke,{children:e.jsx(fe,{primary:"Minimum Notice Period",secondary:`${o.minimumNoticePeriod} hours`})}),e.jsx(ke,{children:e.jsx(fe,{primary:"Maximum Events Per Day",secondary:o.maximumEventsPerDay})}),e.jsx(ke,{children:e.jsx(fe,{primary:"Auto-accept Trials",secondary:o.autoAcceptTrials?"Enabled":"Disabled"})})]})]})]})]}),e.jsxs(Fe,{open:P,onClose:()=>k(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(Re,{children:"Auto-scheduling Preferences"}),e.jsx(Me,{children:o&&e.jsxs(d,{sx:{pt:2},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Preferred Times"}),o.preferredTimes.map((R,g)=>e.jsx(de,{sx:{mb:2},children:e.jsx(ue,{children:e.jsxs(i,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(i,{item:!0,xs:3,children:e.jsxs(X,{fullWidth:!0,children:[e.jsx(K,{children:"Day"}),e.jsx(J,{value:R.dayOfWeek,onChange:N=>f(g,"dayOfWeek",Number(N.target.value)),children:[0,1,2,3,4,5,6].map(N=>e.jsx(U,{value:N,children:O(N)},N))})]})}),e.jsx(i,{item:!0,xs:3,children:e.jsx(A,{label:"Start Hour",type:"number",value:R.startHour,onChange:N=>f(g,"startHour",Number(N.target.value)),inputProps:{min:0,max:23},fullWidth:!0})}),e.jsx(i,{item:!0,xs:3,children:e.jsx(A,{label:"End Hour",type:"number",value:R.endHour,onChange:N=>f(g,"endHour",Number(N.target.value)),inputProps:{min:0,max:23},fullWidth:!0})}),e.jsx(i,{item:!0,xs:3,children:e.jsx(he,{onClick:()=>S(g),color:"error",children:e.jsx(mr,{})})})]})})},g)),e.jsx(M,{variant:"outlined",onClick:W,startIcon:e.jsx(ht,{}),sx:{mb:3},children:"Add Time Slot"}),e.jsx(Ee,{sx:{my:3}}),e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{item:!0,xs:12,md:6,children:e.jsx(A,{label:"Minimum Notice Period (hours)",type:"number",value:o.minimumNoticePeriod,onChange:R=>l(g=>g?{...g,minimumNoticePeriod:Number(R.target.value)}:null),fullWidth:!0,helperText:"How much advance notice do you need?"})}),e.jsx(i,{item:!0,xs:12,md:6,children:e.jsx(A,{label:"Maximum Events Per Day",type:"number",value:o.maximumEventsPerDay,onChange:R=>l(g=>g?{...g,maximumEventsPerDay:Number(R.target.value)}:null),fullWidth:!0,inputProps:{min:1,max:10}})}),e.jsx(i,{item:!0,xs:12,md:6,children:e.jsx(A,{label:"Travel Time Between Events (minutes)",type:"number",value:o.travelTime,onChange:R=>l(g=>g?{...g,travelTime:Number(R.target.value)}:null),fullWidth:!0,helperText:"Buffer time needed between events"})}),e.jsx(i,{item:!0,xs:12,md:6,children:e.jsxs(X,{fullWidth:!0,children:[e.jsx(K,{children:"Conflict Resolution"}),e.jsxs(J,{value:o.conflictResolution,onChange:R=>l(g=>g?{...g,conflictResolution:R.target.value}:null),children:[e.jsx(U,{value:"manual",children:"Manual Review"}),e.jsx(U,{value:"auto_decline",children:"Auto Decline"}),e.jsx(U,{value:"auto_reschedule",children:"Auto Reschedule"})]})]})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(qe,{control:e.jsx(Ye,{checked:o.autoAcceptTrials,onChange:R=>l(g=>g?{...g,autoAcceptTrials:R.target.checked}:null)}),label:"Automatically accept trial invitations (if no conflicts)"})})]})]})}),e.jsxs(Oe,{children:[e.jsx(M,{onClick:()=>k(!1),children:"Cancel"}),e.jsx(M,{onClick:b,variant:"contained",children:"Save Preferences"})]})]})]})},Is=t=>{var r,a,o,l,x,s,j,u;const w=kt(),v=on(),k=((r=t.ampm)!=null?r:w.is12HourCycleInCurrentLocale())?w.formats.keyboardDateTime12h:w.formats.keyboardDateTime24h;return Y({},t,{disablePast:(a=t.disablePast)!=null?a:!1,disableFuture:(o=t.disableFuture)!=null?o:!1,format:(l=t.format)!=null?l:k,disableIgnoringDatePartForTimeValidation:!!(t.minDateTime||t.maxDateTime),minDate:Nt(w,(x=t.minDateTime)!=null?x:t.minDate,v.minDate),maxDate:Nt(w,(s=t.maxDateTime)!=null?s:t.maxDate,v.maxDate),minTime:(j=t.minDateTime)!=null?j:t.minTime,maxTime:(u=t.maxDateTime)!=null?u:t.maxTime})},As=({props:t,inputRef:r})=>{const a=Is(t),{forwardedProps:o,internalProps:l}=Da(a,"date-time");return Ia({inputRef:r,forwardedProps:o,internalProps:l,valueManager:gr,fieldValueManager:Aa,validator:pr,valueType:"date-time"})},Ws=["components","componentsProps","slots","slotProps","InputProps","inputProps"],Ls=["inputRef"],Es=["ref","onPaste","onKeyDown","inputMode","readOnly","clearable","onClear"],xn=h.forwardRef(function(r,a){var o,l,x;const s=Tt({props:r,name:"MuiDateTimeField"}),{components:j,componentsProps:u,slots:w,slotProps:v,InputProps:P,inputProps:k}=s,I=Ct(s,Ws),m=s,p=(o=(l=w?.textField)!=null?l:j?.TextField)!=null?o:A,F=Wa({elementType:p,externalSlotProps:(x=v?.textField)!=null?x:u?.textField,externalForwardedProps:I,ownerState:m}),{inputRef:b}=F,W=Ct(F,Ls);W.inputProps=Y({},k,W.inputProps),W.InputProps=Y({},P,W.InputProps);const f=As({props:W,inputRef:b}),{ref:S,onPaste:O,onKeyDown:R,inputMode:g,readOnly:N,clearable:V,onClear:H}=f,T=Ct(f,Es),{InputProps:C,fieldProps:_}=La({onClear:H,clearable:V,fieldProps:T,InputProps:T.InputProps,slots:w,slotProps:v,components:j,componentsProps:u});return e.jsx(p,Y({ref:a},_,{InputProps:Y({},C,{readOnly:N}),inputProps:Y({},T.inputProps,{inputMode:g,onPaste:O,onKeyDown:R,ref:S})}))});function Fs(t){return Xr("MuiDateTimePickerTabs",t)}Kr("MuiDateTimePickerTabs",["root"]);const Rs=t=>Lt(t)?"date":"time",Ms=t=>t==="date"?"day":"hours",Os=t=>{const{classes:r}=t;return Zr({root:["root"]},Fs,r)},Ns=Je(Ut,{name:"MuiDateTimePickerTabs",slot:"Root",overridesResolver:(t,r)=>r.root})(({theme:t})=>({boxShadow:`0 -1px 0 0 inset ${(t.vars||t).palette.divider}`,"&:last-child":{boxShadow:`0 1px 0 0 inset ${(t.vars||t).palette.divider}`,[`& .${ia.indicator}`]:{bottom:"auto",top:0}}})),Bs=function(r){const a=Tt({props:r,name:"MuiDateTimePickerTabs"}),{dateIcon:o=e.jsx(Ea,{}),onViewChange:l,timeIcon:x=e.jsx(Fa,{}),view:s,hidden:j=typeof window>"u"||window.innerHeight<667,className:u,sx:w}=a,v=_t(),P=Os(a),k=(I,m)=>{l(Ms(m))};return j?null:e.jsxs(Ns,{ownerState:a,variant:"fullWidth",value:Rs(s),onChange:k,className:sa(u,P.root),sx:w,children:[e.jsx(Le,{value:"date","aria-label":v.dateTableLabel,icon:e.jsx(h.Fragment,{children:o})}),e.jsx(Le,{value:"time","aria-label":v.timeTableLabel,icon:e.jsx(h.Fragment,{children:x})})]})};function zs(t){return Xr("MuiDateTimePickerToolbar",t)}const qt=Kr("MuiDateTimePickerToolbar",["root","dateContainer","timeContainer","timeDigitsContainer","separator","timeLabelReverse","ampmSelection","ampmLandscape","ampmLabel"]),Us=["ampm","ampmInClock","value","onChange","view","isLandscape","onViewChange","toolbarFormat","toolbarPlaceholder","views","disabled","readOnly","toolbarVariant"],_s=t=>{const{classes:r,theme:a,isLandscape:o}=t,l={root:["root"],dateContainer:["dateContainer"],timeContainer:["timeContainer",a.direction==="rtl"&&"timeLabelReverse"],timeDigitsContainer:["timeDigitsContainer",a.direction==="rtl"&&"timeLabelReverse"],separator:["separator"],ampmSelection:["ampmSelection",o&&"ampmLandscape"],ampmLabel:["ampmLabel"]};return Zr(l,zs,r)},mn=Je(Ma,{name:"MuiDateTimePickerToolbar",slot:"Root",overridesResolver:(t,r)=>r.root})(({theme:t,ownerState:r})=>({paddingLeft:r.toolbarVariant==="desktop"&&!r.isLandscape?24:16,paddingRight:r.toolbarVariant==="desktop"&&!r.isLandscape?0:16,borderBottom:r.toolbarVariant==="desktop"?`1px solid ${(t.vars||t).palette.divider}`:void 0,borderRight:r.toolbarVariant==="desktop"&&r.isLandscape?`1px solid ${(t.vars||t).palette.divider}`:void 0,justifyContent:"space-around",position:"relative"}));mn.propTypes={as:c.elementType,classes:c.object,className:c.string,isLandscape:c.bool.isRequired,isMobileKeyboardViewOpen:c.bool,landscapeDirection:c.oneOf(["column","row"]),ownerState:c.object.isRequired,sx:c.oneOfType([c.arrayOf(c.oneOfType([c.func,c.object,c.bool])),c.func,c.object]),toggleMobileKeyboardView:c.func,toolbarTitle:c.node,viewType:c.oneOf(["date","time"])};const Gs=Je("div",{name:"MuiDateTimePickerToolbar",slot:"DateContainer",overridesResolver:(t,r)=>r.dateContainer})({display:"flex",flexDirection:"column",alignItems:"flex-start"}),pn=Je("div",{name:"MuiDateTimePickerToolbar",slot:"TimeContainer",overridesResolver:(t,r)=>r.timeContainer})(({theme:t,ownerState:r})=>{const a=r.isLandscape&&r.toolbarVariant!=="desktop"?"column":"row";return Y({display:"flex",flexDirection:a},r.toolbarVariant==="desktop"&&Y({},!r.isLandscape&&{gap:9,marginRight:4,alignSelf:"flex-end"}),t.direction==="rtl"&&{flexDirection:`${a}-reverse`})}),$s=Je("div",{name:"MuiDateTimePickerToolbar",slot:"TimeDigitsContainer",overridesResolver:(t,r)=>r.timeDigitsContainer})(({theme:t,ownerState:r})=>Y({display:"flex"},r.toolbarVariant==="desktop"&&{gap:1.5},t.direction==="rtl"&&{flexDirection:"row-reverse"}));pn.propTypes={as:c.elementType,ownerState:c.object.isRequired,sx:c.oneOfType([c.arrayOf(c.oneOfType([c.func,c.object,c.bool])),c.func,c.object])};const Br=Je(Oa,{name:"MuiDateTimePickerToolbar",slot:"Separator",overridesResolver:(t,r)=>r.separator})(({ownerState:t})=>({margin:t.toolbarVariant==="desktop"?0:"0 4px 0 2px",cursor:"default"})),Vs=Je("div",{name:"MuiDateTimePickerToolbar",slot:"AmPmSelection",overridesResolver:(t,r)=>[{[`.${qt.ampmLabel}`]:r.ampmLabel},{[`&.${qt.ampmLandscape}`]:r.ampmLandscape},r.ampmSelection]})(({ownerState:t})=>Y({display:"flex",flexDirection:"column",marginRight:"auto",marginLeft:12},t.isLandscape&&{margin:"4px 0 auto",flexDirection:"row",justifyContent:"space-around",width:"100%"},{[`& .${qt.ampmLabel}`]:{fontSize:17}}));function Hs(t){const r=Tt({props:t,name:"MuiDateTimePickerToolbar"}),{ampm:a,ampmInClock:o,value:l,onChange:x,view:s,isLandscape:j,onViewChange:u,toolbarFormat:w,toolbarPlaceholder:v="â€“â€“",views:P,disabled:k,readOnly:I,toolbarVariant:m="mobile"}=r,p=Ct(r,Us),F=r,b=kt(),{meridiemMode:W,handleMeridiemChange:f}=Ra(l,a,x),S=!!(a&&!o),O=m==="desktop",R=_t(),g=lr(),N=_s(Y({},F,{theme:g})),V=T=>a?b.format(T,"hours12h"):b.format(T,"hours24h"),H=h.useMemo(()=>l?w?b.formatByString(l,w):b.format(l,"shortDate"):v,[l,w,v,b]);return e.jsxs(mn,Y({toolbarTitle:R.dateTimePickerToolbarTitle,isLandscape:j,className:N.root},p,{ownerState:F,children:[e.jsxs(Gs,{className:N.dateContainer,ownerState:F,children:[P.includes("year")&&e.jsx(He,{tabIndex:-1,variant:"subtitle1",onClick:()=>u("year"),selected:s==="year",value:l?b.format(l,"year"):"â€“"}),P.includes("day")&&e.jsx(He,{tabIndex:-1,variant:O?"h5":"h4",onClick:()=>u("day"),selected:s==="day",value:H})]}),e.jsxs(pn,{className:N.timeContainer,ownerState:F,children:[e.jsxs($s,{className:N.timeDigitsContainer,ownerState:F,children:[P.includes("hours")&&e.jsx(He,{variant:O?"h5":"h3",width:O&&!j?At:void 0,onClick:()=>u("hours"),selected:s==="hours",value:l?V(l):"--"}),P.includes("minutes")&&e.jsxs(h.Fragment,{children:[e.jsx(Br,{variant:O?"h5":"h3",value:":",className:N.separator,ownerState:F}),e.jsx(He,{variant:O?"h5":"h3",width:O&&!j?At:void 0,onClick:()=>u("minutes"),selected:s==="minutes",value:l?b.format(l,"minutes"):"--"})]}),P.includes("seconds")&&e.jsxs(h.Fragment,{children:[e.jsx(Br,{variant:O?"h5":"h3",value:":",className:N.separator,ownerState:F}),e.jsx(He,{variant:O?"h5":"h3",width:O&&!j?At:void 0,onClick:()=>u("seconds"),selected:s==="seconds",value:l?b.format(l,"seconds"):"--"})]})]}),S&&!O&&e.jsxs(Vs,{className:N.ampmSelection,ownerState:F,children:[e.jsx(He,{variant:"subtitle2",selected:W==="am",typographyClassName:N.ampmLabel,value:Vt(b,"am"),onClick:I?void 0:()=>f("am"),disabled:k}),e.jsx(He,{variant:"subtitle2",selected:W==="pm",typographyClassName:N.ampmLabel,value:Vt(b,"pm"),onClick:I?void 0:()=>f("pm"),disabled:k})]}),a&&O&&e.jsx(He,{variant:"h5",onClick:()=>u("meridiem"),selected:s==="meridiem",value:l&&W?Vt(b,W):"--",width:At})]})]}))}function gn(t,r){var a,o,l,x,s,j,u,w,v,P,k;const I=kt(),m=on(),p=Tt({props:t,name:r}),F=(a=p.ampm)!=null?a:I.is12HourCycleInCurrentLocale(),b=h.useMemo(()=>{var S;return((S=p.localeText)==null?void 0:S.toolbarTitle)==null?p.localeText:Y({},p.localeText,{dateTimePickerToolbarTitle:p.localeText.toolbarTitle})},[p.localeText]),W=(o=p.slots)!=null?o:Na(p.components),f=(l=p.slotProps)!=null?l:p.componentsProps;return Y({},p,Ba({views:p.views,openTo:p.openTo,defaultViews:["year","day","hours","minutes"],defaultOpenTo:"day"}),{ampm:F,localeText:b,orientation:(x=p.orientation)!=null?x:"portrait",disableIgnoringDatePartForTimeValidation:(s=p.disableIgnoringDatePartForTimeValidation)!=null?s:!!(p.minDateTime||p.maxDateTime||p.disablePast||p.disableFuture),disableFuture:(j=p.disableFuture)!=null?j:!1,disablePast:(u=p.disablePast)!=null?u:!1,minDate:Nt(I,(w=p.minDateTime)!=null?w:p.minDate,m.minDate),maxDate:Nt(I,(v=p.maxDateTime)!=null?v:p.maxDate,m.maxDate),minTime:(P=p.minDateTime)!=null?P:p.minTime,maxTime:(k=p.maxDateTime)!=null?k:p.maxTime,slots:Y({toolbar:Hs,tabs:Bs},W),slotProps:Y({},f,{toolbar:Y({ampm:F},f?.toolbar)})})}const qs=Je("div")({display:"flex",margin:"0 auto"}),Xe=({view:t,onViewChange:r,views:a,focusedView:o,onFocusedViewChange:l,value:x,defaultValue:s,referenceDate:j,onChange:u,className:w,classes:v,disableFuture:P,disablePast:k,minDate:I,minTime:m,maxDate:p,maxTime:F,shouldDisableDate:b,shouldDisableMonth:W,shouldDisableYear:f,shouldDisableTime:S,shouldDisableClock:O,reduceAnimations:R,minutesStep:g,ampm:N,onMonthChange:V,monthsPerRow:H,onYearChange:T,yearsPerRow:C,defaultCalendarMonth:_,components:B,componentsProps:te,slots:L,slotProps:D,loading:z,renderLoading:ce,disableHighlightToday:Be,readOnly:ze,disabled:$e,showDaysOutsideCurrentMonth:et,dayOfWeekFormatter:xt,sx:Ie,autoFocus:De,fixedWeekNumber:mt,displayWeekNumber:pt,timezone:tt,disableIgnoringDatePartForTimeValidation:gt,timeSteps:E,skipDisabled:ie,timeViewsCount:ne,shouldRenderTimeInASingleColumn:oe})=>{var se,ve;const Ae=!!((se=jr((ve=D?.actionBar)!=null?ve:te?.actionBar,{}))!=null&&(se=se.actions)!=null&&se.length),Ve={view:Qe(t)?t:"hours",onViewChange:r,focusedView:o&&Qe(o)?o:null,onFocusedViewChange:l,views:a.filter(Qe),value:x,defaultValue:s,referenceDate:j,onChange:u,className:w,classes:v,disableFuture:P,disablePast:k,minTime:m,maxTime:F,shouldDisableTime:S,shouldDisableClock:O,minutesStep:g,ampm:N,components:B,componentsProps:te,slots:L,slotProps:D,readOnly:ze,disabled:$e,autoFocus:De,disableIgnoringDatePartForTimeValidation:gt,timeSteps:E,skipDisabled:ie,timezone:tt};return e.jsxs(h.Fragment,{children:[e.jsxs(qs,{children:[e.jsx(za,{view:Lt(t)?t:"day",onViewChange:r,views:a.filter(Lt),focusedView:o&&Lt(o)?o:null,onFocusedViewChange:l,value:x,defaultValue:s,referenceDate:j,onChange:u,className:w,classes:v,disableFuture:P,disablePast:k,minDate:I,maxDate:p,shouldDisableDate:b,shouldDisableMonth:W,shouldDisableYear:f,reduceAnimations:R,onMonthChange:V,monthsPerRow:H,onYearChange:T,yearsPerRow:C,defaultCalendarMonth:_,components:B,componentsProps:te,slots:L,slotProps:D,loading:z,renderLoading:ce,disableHighlightToday:Be,readOnly:ze,disabled:$e,showDaysOutsideCurrentMonth:et,dayOfWeekFormatter:xt,sx:Ie,autoFocus:De,fixedWeekNumber:mt,displayWeekNumber:pt,timezone:tt}),ne>0&&e.jsxs(h.Fragment,{children:[e.jsx(Ee,{orientation:"vertical"}),oe?Ua(Y({},Ve,{view:"hours",views:["hours"],focusedView:o&&Qe(o)?"hours":null,sx:Y({width:"auto",[`&.${$a.root}`]:{maxHeight:Ga}},Array.isArray(Ie)?Ie:[Ie])})):_a(Y({},Ve,{view:Qe(t)?t:"hours",views:a.filter(Qe),focusedView:o&&Qe(o)?o:null,sx:Y({borderBottom:0,width:"auto",[`.${Va.root}`]:{maxHeight:"100%"}},Array.isArray(Ie)?Ie:[Ie])}))]})]}),Ae&&e.jsx(Ee,{})]})},jn=h.forwardRef(function(r,a){var o,l,x,s,j,u,w;const v=_t(),P=kt(),k=gn(r,"MuiDesktopDateTimePicker"),{shouldRenderTimeInASingleColumn:I,thresholdToRenderTimeInASingleColumn:m,views:p,timeSteps:F}=Ha(k),b=!k.viewRenderers||Object.keys(k.viewRenderers).length===0,W=b?{day:Xe,month:Xe,year:Xe,hours:Xe,minutes:Xe,seconds:Xe,meridiem:Xe}:Y({day:lt,month:lt,year:lt,hours:null,minutes:null,seconds:null,meridiem:null},k.viewRenderers),f=(o=k.ampmInClock)!=null?o:!0,S=b?["accept"]:[],O=Y({},k,{viewRenderers:W,format:ln(P,k),views:p,yearsPerRow:(l=k.yearsPerRow)!=null?l:4,ampmInClock:f,timeSteps:F,thresholdToRenderTimeInASingleColumn:m,shouldRenderTimeInASingleColumn:I,slots:Y({field:xn,openPickerIcon:qa},k.slots),slotProps:Y({},k.slotProps,{field:g=>{var N;return Y({},jr((N=k.slotProps)==null?void 0:N.field,g),cn(k),{ref:a})},toolbar:Y({hidden:!0,ampmInClock:f,toolbarVariant:b?"desktop":"mobile"},(x=k.slotProps)==null?void 0:x.toolbar),tabs:Y({hidden:!0},(s=k.slotProps)==null?void 0:s.tabs),actionBar:Y({actions:S},(j=k.slotProps)==null?void 0:j.actionBar)})}),{renderPicker:R}=Ya({props:O,valueManager:gr,valueType:"date-time",getOpenDialogAriaText:(u=(w=O.localeText)==null?void 0:w.openDatePickerDialogue)!=null?u:v.openDatePickerDialogue,validator:pr});return R()});jn.propTypes={ampm:c.bool,ampmInClock:c.bool,autoFocus:c.bool,className:c.string,closeOnSelect:c.bool,components:c.object,componentsProps:c.object,dayOfWeekFormatter:c.func,defaultCalendarMonth:c.any,defaultValue:c.any,disabled:c.bool,disableFuture:c.bool,disableHighlightToday:c.bool,disableIgnoringDatePartForTimeValidation:c.bool,disableOpenPicker:c.bool,disablePast:c.bool,displayWeekNumber:c.bool,fixedWeekNumber:c.number,format:c.string,formatDensity:c.oneOf(["dense","spacious"]),inputRef:en,label:c.node,loading:c.bool,localeText:c.object,maxDate:c.any,maxDateTime:c.any,maxTime:c.any,minDate:c.any,minDateTime:c.any,minTime:c.any,minutesStep:c.number,monthsPerRow:c.oneOf([3,4]),name:c.string,onAccept:c.func,onChange:c.func,onClose:c.func,onError:c.func,onMonthChange:c.func,onOpen:c.func,onSelectedSectionsChange:c.func,onViewChange:c.func,onYearChange:c.func,open:c.bool,openTo:c.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),orientation:c.oneOf(["landscape","portrait"]),readOnly:c.bool,reduceAnimations:c.bool,referenceDate:c.any,renderLoading:c.func,selectedSections:c.oneOfType([c.oneOf(["all","day","hours","meridiem","minutes","month","seconds","weekDay","year"]),c.number,c.shape({endIndex:c.number.isRequired,startIndex:c.number.isRequired})]),shouldDisableClock:c.func,shouldDisableDate:c.func,shouldDisableMonth:c.func,shouldDisableTime:c.func,shouldDisableYear:c.func,showDaysOutsideCurrentMonth:c.bool,skipDisabled:c.bool,slotProps:c.object,slots:c.object,sx:c.oneOfType([c.arrayOf(c.oneOfType([c.func,c.object,c.bool])),c.func,c.object]),thresholdToRenderTimeInASingleColumn:c.number,timeSteps:c.shape({hours:c.number,minutes:c.number,seconds:c.number}),timezone:c.string,value:c.any,view:c.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),viewRenderers:c.shape({day:c.func,hours:c.func,meridiem:c.func,minutes:c.func,month:c.func,seconds:c.func,year:c.func}),views:c.arrayOf(c.oneOf(["day","hours","minutes","month","seconds","year"]).isRequired),yearsPerRow:c.oneOf([3,4])};const fn=h.forwardRef(function(r,a){var o,l,x,s,j;const u=_t(),w=kt(),v=gn(r,"MuiMobileDateTimePicker"),P=Y({day:lt,month:lt,year:lt,hours:Ht,minutes:Ht,seconds:Ht},v.viewRenderers),k=(o=v.ampmInClock)!=null?o:!1,I=Y({},v,{viewRenderers:P,format:ln(w,v),ampmInClock:k,slots:Y({field:xn},v.slots),slotProps:Y({},v.slotProps,{field:p=>{var F;return Y({},jr((F=v.slotProps)==null?void 0:F.field,p),cn(v),{ref:a})},toolbar:Y({hidden:!1,ampmInClock:k},(l=v.slotProps)==null?void 0:l.toolbar),tabs:Y({hidden:!1},(x=v.slotProps)==null?void 0:x.tabs)})}),{renderPicker:m}=Ja({props:I,valueManager:gr,valueType:"date-time",getOpenDialogAriaText:(s=(j=I.localeText)==null?void 0:j.openDatePickerDialogue)!=null?s:u.openDatePickerDialogue,validator:pr});return m()});fn.propTypes={ampm:c.bool,ampmInClock:c.bool,autoFocus:c.bool,className:c.string,closeOnSelect:c.bool,components:c.object,componentsProps:c.object,dayOfWeekFormatter:c.func,defaultCalendarMonth:c.any,defaultValue:c.any,disabled:c.bool,disableFuture:c.bool,disableHighlightToday:c.bool,disableIgnoringDatePartForTimeValidation:c.bool,disableOpenPicker:c.bool,disablePast:c.bool,displayWeekNumber:c.bool,fixedWeekNumber:c.number,format:c.string,formatDensity:c.oneOf(["dense","spacious"]),inputRef:en,label:c.node,loading:c.bool,localeText:c.object,maxDate:c.any,maxDateTime:c.any,maxTime:c.any,minDate:c.any,minDateTime:c.any,minTime:c.any,minutesStep:c.number,monthsPerRow:c.oneOf([3,4]),name:c.string,onAccept:c.func,onChange:c.func,onClose:c.func,onError:c.func,onMonthChange:c.func,onOpen:c.func,onSelectedSectionsChange:c.func,onViewChange:c.func,onYearChange:c.func,open:c.bool,openTo:c.oneOf(["day","hours","minutes","month","seconds","year"]),orientation:c.oneOf(["landscape","portrait"]),readOnly:c.bool,reduceAnimations:c.bool,referenceDate:c.any,renderLoading:c.func,selectedSections:c.oneOfType([c.oneOf(["all","day","hours","meridiem","minutes","month","seconds","weekDay","year"]),c.number,c.shape({endIndex:c.number.isRequired,startIndex:c.number.isRequired})]),shouldDisableClock:c.func,shouldDisableDate:c.func,shouldDisableMonth:c.func,shouldDisableTime:c.func,shouldDisableYear:c.func,showDaysOutsideCurrentMonth:c.bool,slotProps:c.object,slots:c.object,sx:c.oneOfType([c.arrayOf(c.oneOfType([c.func,c.object,c.bool])),c.func,c.object]),timezone:c.string,value:c.any,view:c.oneOf(["day","hours","minutes","month","seconds","year"]),viewRenderers:c.shape({day:c.func,hours:c.func,minutes:c.func,month:c.func,seconds:c.func,year:c.func}),views:c.arrayOf(c.oneOf(["day","hours","minutes","month","seconds","year"]).isRequired),yearsPerRow:c.oneOf([3,4])};const Ys=["desktopModeMediaQuery"],Yt=h.forwardRef(function(r,a){const o=Tt({props:r,name:"MuiDateTimePicker"}),{desktopModeMediaQuery:l=Qa}=o,x=Ct(o,Ys);return je(l,{defaultMatches:!0})?e.jsx(jn,Y({ref:a},x)):e.jsx(fn,Y({ref:a},x))}),Js=({open:t,isOpen:r,onClose:a,onSave:o,event:l,mode:x="create"})=>{const s=r||t||!1,{user:j}=le(),[u,w]=h.useState({title:"",description:"",eventType:"training",date:new Date,startTime:new Date,endTime:new Date,location:"",maxParticipants:22,isRecurring:!1,recurringPattern:{frequency:"weekly",interval:1,daysOfWeek:[],endDate:null,occurrences:null},participants:[],reminders:[]}),[v,P]=h.useState(null),[k,I]=h.useState(null),[m,p]=h.useState(!1),[F,b]=h.useState(!1),[W,f]=h.useState(!1),[S,O]=h.useState(""),[R,g]=h.useState([]);h.useEffect(()=>{l&&x==="edit"&&w({title:l.title,description:l.description||"",eventType:l.eventType,date:new Date(l.date),startTime:new Date(`${l.date} ${l.startTime}`),endTime:new Date(`${l.date} ${l.endTime}`),location:l.location,maxParticipants:l.maxParticipants||22,isRecurring:l.isRecurring,recurringPattern:{frequency:l.recurringPattern||"weekly",interval:1,daysOfWeek:[],endDate:null,occurrences:null},participants:l.participants?.map(D=>String(D))||[],reminders:[]})},[l,x]),h.useEffect(()=>{u.location&&u.date&&N()},[u.location,u.date]),h.useEffect(()=>{u.startTime&&u.endTime&&u.participants.length>0&&V()},[u.startTime,u.endTime,u.participants]);const N=async()=>{if(u.location){b(!0);try{const D=await Ue.getWeatherForEvent(u.location,u.startTime.toISOString());P(D)}catch(D){console.error("Error fetching weather:",D),P(null)}finally{b(!1)}}},V=async()=>{f(!0);try{const D=await Ue.detectConflicts({startTime:u.startTime.toISOString(),endTime:u.endTime.toISOString(),participants:u.participants,eventId:l?.id.toString()});I(D)}catch(D){console.error("Error checking conflicts:",D),I(null)}finally{f(!1)}},H=async()=>{try{const D=await Ue.suggestOptimalTimes({duration:(u.endTime.getTime()-u.startTime.getTime())/6e4,participants:u.participants,preferredDate:u.date.toISOString().split("T")[0],location:u.location,eventType:u.eventType});g(D.suggestions)}catch(D){console.error("Error getting suggested times:",D)}},T=async()=>{p(!0),O("");try{const D={...u,date:u.startTime.toISOString().split("T")[0],startTime:u.startTime.toTimeString().slice(0,5),endTime:u.endTime.toTimeString().slice(0,5),createdBy:j?.id,recurringPattern:{...u.recurringPattern,daysOfWeek:u.recurringPattern.daysOfWeek.map(z=>z.toString()),endDate:u.recurringPattern.endDate||void 0}};await o(D),u.reminders.length>0&&l?.id&&await Ue.setReminders(l.id.toString(),u.reminders),a()}catch(D){O(D?.message||"Failed to save event")}finally{p(!1)}},C=()=>{w(D=>({...D,reminders:[...D.reminders,{type:"email",minutesBefore:60,isEnabled:!0}]}))},_=(D,z,ce)=>{w(Be=>({...Be,reminders:Be.reminders.map((ze,$e)=>$e===D?{...ze,[z]:ce}:ze)}))},B=D=>{w(z=>({...z,reminders:z.reminders.filter((ce,Be)=>Be!==D)}))},te=D=>{switch(D.toLowerCase()){case"clear":case"sunny":return e.jsx(Er,{color:"warning"});case"rain":return e.jsx(Lr,{color:"primary"});case"clouds":return e.jsx(Wr,{color:"action"});default:return e.jsx(Er,{color:"action"})}},L=D=>{switch(D){case"high":return"error";case"medium":return"warning";case"low":return"info";default:return"default"}};return e.jsx(an,{dateAdapter:sn,children:e.jsxs(Fe,{open:s,onClose:a,maxWidth:"md",fullWidth:!0,children:[e.jsx(Re,{children:e.jsxs(d,{display:"flex",alignItems:"center",children:[e.jsx(dr,{sx:{mr:1}}),x==="create"?"Create New Event":"Edit Event"]})}),e.jsxs(Me,{children:[S&&e.jsx(G,{severity:"error",sx:{mb:2},children:S}),e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{item:!0,xs:12,children:e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Event Details"})}),e.jsx(i,{item:!0,xs:12,md:8,children:e.jsx(A,{label:"Event Title",value:u.title,onChange:D=>w(z=>({...z,title:D.target.value})),fullWidth:!0,required:!0})}),e.jsx(i,{item:!0,xs:12,md:4,children:e.jsxs(X,{fullWidth:!0,children:[e.jsx(K,{children:"Event Type"}),e.jsxs(J,{value:u.eventType,onChange:D=>w(z=>({...z,eventType:D.target.value})),children:[e.jsx(U,{value:"training",children:"Training"}),e.jsx(U,{value:"match",children:"Match"}),e.jsx(U,{value:"trial",children:"Trial"})]})]})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(A,{label:"Description",value:u.description,onChange:D=>w(z=>({...z,description:D.target.value})),multiline:!0,rows:3,fullWidth:!0})}),e.jsx(i,{item:!0,xs:12,md:6,children:e.jsx(Yt,{label:"Start Time",value:u.startTime,onChange:D=>{D&&w(z=>({...z,startTime:D,date:D}))},slotProps:{textField:{fullWidth:!0}}})}),e.jsx(i,{item:!0,xs:12,md:6,children:e.jsx(Yt,{label:"End Time",value:u.endTime,onChange:D=>{D&&w(z=>({...z,endTime:D}))},slotProps:{textField:{fullWidth:!0}}})}),e.jsx(i,{item:!0,xs:12,md:8,children:e.jsx(A,{label:"Location",value:u.location,onChange:D=>w(z=>({...z,location:D.target.value})),fullWidth:!0,InputProps:{startAdornment:e.jsx(it,{color:"action",sx:{mr:1}})}})}),e.jsx(i,{item:!0,xs:12,md:4,children:e.jsx(A,{label:"Max Participants",type:"number",value:u.maxParticipants,onChange:D=>w(z=>({...z,maxParticipants:Number(D.target.value)})),fullWidth:!0,inputProps:{min:1,max:50}})}),u.location&&e.jsx(i,{item:!0,xs:12,children:e.jsxs(Pe,{children:[e.jsx(we,{expandIcon:e.jsx(Se,{}),children:e.jsxs(d,{display:"flex",alignItems:"center",children:[e.jsx(Wr,{sx:{mr:1}}),e.jsx(n,{children:"Weather Forecast"}),F&&e.jsx(n,{variant:"caption",sx:{ml:2},children:"Loading..."})]})}),e.jsx(Te,{children:v?e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:12,md:6,children:e.jsx(de,{children:e.jsxs(ue,{children:[e.jsxs(d,{display:"flex",alignItems:"center",mb:2,children:[te(v.forecast.condition),e.jsxs(d,{ml:1,children:[e.jsxs(n,{variant:"h6",children:[v.forecast.temperature,"Â°C"]}),e.jsx(n,{variant:"body2",color:"text.secondary",children:v.forecast.condition})]})]}),e.jsxs(i,{container:!0,spacing:1,children:[e.jsx(i,{item:!0,xs:6,children:e.jsxs(d,{display:"flex",alignItems:"center",children:[e.jsx(Lr,{fontSize:"small",sx:{mr:.5}}),e.jsxs(n,{variant:"caption",children:["Humidity: ",v.forecast.humidity,"%"]})]})}),e.jsx(i,{item:!0,xs:6,children:e.jsxs(d,{display:"flex",alignItems:"center",children:[e.jsx(oa,{fontSize:"small",sx:{mr:.5}}),e.jsxs(n,{variant:"caption",children:["Wind: ",v.forecast.windSpeed," m/s"]})]})}),e.jsx(i,{item:!0,xs:6,children:e.jsxs(d,{display:"flex",alignItems:"center",children:[e.jsx(dt,{fontSize:"small",sx:{mr:.5}}),e.jsxs(n,{variant:"caption",children:["Visibility: ",v.forecast.visibility," km"]})]})}),e.jsx(i,{item:!0,xs:6,children:e.jsxs(n,{variant:"caption",children:["Rain: ",v.forecast.precipitation," mm"]})})]})]})})}),e.jsxs(i,{item:!0,xs:12,md:6,children:[e.jsx(G,{severity:v.recommendation.suitable?"success":"warning",sx:{mb:1},children:e.jsx(n,{variant:"body2",children:v.recommendation.message})}),v.alerts.map((D,z)=>e.jsxs(G,{severity:D.severity==="high"?"error":D.severity==="medium"?"warning":"info",sx:{mb:1},children:[e.jsxs(n,{variant:"caption",children:[e.jsxs("strong",{children:[D.type.toUpperCase(),":"]})," ",D.message]}),e.jsx("br",{}),e.jsx(n,{variant:"caption",children:D.impact})]},z)),v.recommendation.alternatives&&v.recommendation.alternatives.length>0&&e.jsxs(re,{sx:{p:1,mt:1},children:[e.jsx(n,{variant:"caption",fontWeight:"bold",children:"Suggestions:"}),v.recommendation.alternatives.map((D,z)=>e.jsxs(n,{variant:"caption",display:"block",children:["â€¢ ",D]},z))]})]})]}):e.jsx(n,{variant:"body2",color:"text.secondary",children:"Enter a location to see weather forecast"})})]})}),u.participants.length>0&&e.jsx(i,{item:!0,xs:12,children:e.jsxs(Pe,{children:[e.jsx(we,{expandIcon:e.jsx(Se,{}),children:e.jsxs(d,{display:"flex",alignItems:"center",children:[e.jsx(er,{sx:{mr:1}}),e.jsx(n,{children:"Conflict Detection"}),k&&k.conflictingEvents.length>0&&e.jsx(q,{label:`${k.conflictingEvents.length} conflicts`,color:"warning",size:"small",sx:{ml:1}}),W&&e.jsx(n,{variant:"caption",sx:{ml:2},children:"Checking..."})]})}),e.jsxs(Te,{children:[k?k.conflictingEvents.length>0?e.jsxs(d,{children:[e.jsx(ct,{children:k.conflictingEvents.map((D,z)=>e.jsxs(ke,{children:[e.jsx(Ge,{children:e.jsx(Yr,{color:L(D.severity)})}),e.jsx(fe,{primary:D.title,secondary:`${D.startTime} - ${D.endTime} | Severity: ${D.severity}`}),e.jsx(q,{label:D.type,color:L(D.severity),variant:"outlined",size:"small"})]},z))}),k.suggestions.length>0&&e.jsxs(d,{mt:2,children:[e.jsx(n,{variant:"subtitle2",gutterBottom:!0,children:"Suggestions:"}),k.suggestions.map((D,z)=>e.jsxs(G,{severity:"info",sx:{mb:1},children:[e.jsxs(n,{variant:"body2",children:[e.jsxs("strong",{children:[D.type,":"]})," ",D.reason]}),D.newStartTime&&D.newEndTime&&e.jsxs(n,{variant:"caption",children:["Suggested time: ",D.newStartTime," - ",D.newEndTime]})]},z))]}),e.jsx(M,{variant:"outlined",onClick:H,startIcon:e.jsx(_r,{}),sx:{mt:1},children:"Get Alternative Times"})]}):e.jsx(G,{severity:"success",children:e.jsx(n,{variant:"body2",children:"No conflicts detected for this time slot!"})}):e.jsx(n,{variant:"body2",color:"text.secondary",children:"Add participants to check for conflicts"}),R.length>0&&e.jsxs(d,{mt:2,children:[e.jsx(n,{variant:"subtitle2",gutterBottom:!0,children:"Alternative Times (sorted by suitability):"}),R.slice(0,3).map((D,z)=>e.jsx(de,{sx:{mb:1},children:e.jsx(ue,{sx:{py:1},children:e.jsxs(d,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(d,{children:[e.jsxs(n,{variant:"body2",children:[D.startTime," - ",D.endTime]}),e.jsxs(n,{variant:"caption",color:"text.secondary",children:["Score: ",D.score,"/100 | Conflicts: ",D.conflicts]})]}),e.jsx(M,{size:"small",onClick:()=>{w(ce=>({...ce,startTime:new Date(D.startTime),endTime:new Date(D.endTime)}))},children:"Use This Time"})]})})},z))]})]})]})}),e.jsx(i,{item:!0,xs:12,children:e.jsxs(Pe,{children:[e.jsx(we,{expandIcon:e.jsx(Se,{}),children:e.jsxs(d,{display:"flex",alignItems:"center",children:[e.jsx(qr,{sx:{mr:1}}),e.jsx(n,{children:"Reminders"}),u.reminders.length>0&&e.jsx(q,{label:`${u.reminders.length} set`,color:"primary",size:"small",sx:{ml:1}})]})}),e.jsxs(Te,{children:[u.reminders.map((D,z)=>e.jsx(de,{sx:{mb:1},children:e.jsx(ue,{sx:{py:1},children:e.jsxs(i,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(i,{item:!0,xs:3,children:e.jsxs(X,{fullWidth:!0,size:"small",children:[e.jsx(K,{children:"Type"}),e.jsxs(J,{value:D.type,onChange:ce=>_(z,"type",ce.target.value),children:[e.jsx(U,{value:"email",children:"Email"}),e.jsx(U,{value:"sms",children:"SMS"}),e.jsx(U,{value:"push",children:"Push"}),e.jsx(U,{value:"calendar",children:"Calendar"})]})]})}),e.jsx(i,{item:!0,xs:4,children:e.jsx(A,{label:"Minutes Before",type:"number",size:"small",value:D.minutesBefore,onChange:ce=>_(z,"minutesBefore",Number(ce.target.value)),fullWidth:!0})}),e.jsx(i,{item:!0,xs:3,children:e.jsx(qe,{control:e.jsx(Ye,{checked:D.isEnabled,onChange:ce=>_(z,"isEnabled",ce.target.checked)}),label:"Enabled"})}),e.jsx(i,{item:!0,xs:2,children:e.jsx(he,{onClick:()=>B(z),color:"error",size:"small",children:e.jsx(mr,{})})})]})})},z)),e.jsx(M,{variant:"outlined",onClick:C,startIcon:e.jsx(ht,{}),size:"small",children:"Add Reminder"})]})]})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(qe,{control:e.jsx(Ye,{checked:u.isRecurring,onChange:D=>w(z=>({...z,isRecurring:D.target.checked}))}),label:"Recurring Event"})}),u.isRecurring&&e.jsxs(e.Fragment,{children:[e.jsx(i,{item:!0,xs:12,md:4,children:e.jsxs(X,{fullWidth:!0,children:[e.jsx(K,{children:"Frequency"}),e.jsxs(J,{value:u.recurringPattern.frequency,onChange:D=>w(z=>({...z,recurringPattern:{...z.recurringPattern,frequency:D.target.value}})),children:[e.jsx(U,{value:"weekly",children:"Weekly"}),e.jsx(U,{value:"monthly",children:"Monthly"})]})]})}),e.jsx(i,{item:!0,xs:12,md:4,children:e.jsx(A,{label:"Repeat Every",type:"number",value:u.recurringPattern.interval,onChange:D=>w(z=>({...z,recurringPattern:{...z.recurringPattern,interval:Number(D.target.value)}})),fullWidth:!0,helperText:`Every ${u.recurringPattern.interval} ${u.recurringPattern.frequency}`})}),e.jsx(i,{item:!0,xs:12,md:4,children:e.jsx(Yt,{label:"End Date (Optional)",value:u.recurringPattern.endDate,onChange:D=>w(z=>({...z,recurringPattern:{...z.recurringPattern,endDate:D}})),slotProps:{textField:{fullWidth:!0}}})})]})]})]}),e.jsxs(Oe,{children:[e.jsx(M,{onClick:a,disabled:m,children:"Cancel"}),e.jsx(M,{onClick:T,variant:"contained",disabled:m||!u.title||!u.location,children:m?"Saving...":x==="create"?"Create Event":"Update Event"})]})]})})},Jt={...ir,createTrial:async t=>({id:Date.now(),...t})},Qs=()=>{const{user:t}=le(),[r,a]=h.useState(new Date),[o,l]=h.useState([]),[x,s]=h.useState([]),[j,u]=h.useState("month"),[w,v]=h.useState(!1),[P,k]=h.useState(!1),[I,m]=h.useState(!1),[p]=h.useState([]),[F,b]=h.useState(!1),[W,f]=h.useState(!1),[S,O]=h.useState(!1),[R,g]=h.useState(null),[N,V]=h.useState(!1),[H,T]=h.useState(""),[C,_]=h.useState({title:"",description:"",eventType:"training",date:"",startTime:"",endTime:"",location:"",isRecurring:!1,recurringPattern:"weekly"}),[B,te]=h.useState({title:"",description:"",date:"",startTime:"",endTime:"",location:"",maxParticipants:20,ageGroup:"",positions:[],requirements:""}),L=[{value:"training",label:"Training Session",icon:e.jsx(da,{}),color:"primary"},{value:"match",label:"Match",icon:e.jsx(Ke,{}),color:"secondary"},{value:"trial",label:"Trial",icon:e.jsx(Pt,{}),color:"success"}],D=["Goalkeeper","Centre-back","Left-back","Right-back","Defensive Midfielder","Central Midfielder","Attacking Midfielder","Left Wing","Right Wing","Striker","Centre Forward"],z=["Under 6","Under 7","Under 8","Under 9","Under 10","Under 11","Under 12","Under 13","Under 14","Under 15","Under 16","Under 17","Under 18","Under 21","Senior","Veterans"];h.useEffect(()=>{ce()},[r]);const ce=async()=>{try{V(!0);const E=new Date(r.getFullYear(),r.getMonth(),1),ie=new Date(r.getFullYear(),r.getMonth()+1,0),ne=await Jt.getEvents(E,ie),oe=await Promise.all(ne.events.map(async se=>{if(se.location&&se.eventType==="training")try{const ve=await Ue.getWeatherForEvent(se.location,se.date);return{...se,weather:ve}}catch(ve){return console.error("Failed to load weather for event:",se.id,ve),se}return se}));s([]),l(oe)}catch(E){console.error("Error loading events:",E),T("Failed to load calendar events")}finally{V(!1)}},Be=E=>{_({...C,date:E.toISOString().split("T")[0]}),te({...B,date:E.toISOString().split("T")[0]})},ze=()=>{a(new Date(r.getFullYear(),r.getMonth()-1,1))},$e=()=>{a(new Date(r.getFullYear(),r.getMonth()+1,1))},et=async()=>{try{V(!0),await Jt.createEvent(C),v(!1),_({title:"",description:"",eventType:"training",date:"",startTime:"",endTime:"",location:"",isRecurring:!1,recurringPattern:"weekly"}),await ce()}catch(E){console.error("Error creating event:",E),T("Failed to create event")}finally{V(!1)}},xt=async()=>{try{V(!0);const E={...B,eventType:"trial",time:`${B.startTime} - ${B.endTime}`};await Jt.createTrial(E),k(!1),te({title:"",description:"",date:"",startTime:"",endTime:"",location:"",maxParticipants:20,ageGroup:"",positions:[],requirements:""}),await ce()}catch(E){console.error("Error creating trial:",E),T("Failed to create trial")}finally{V(!1)}},Ie=()=>{const E=r.getFullYear(),ie=r.getMonth(),ne=new Date(E,ie,1),oe=new Date(ne);oe.setDate(oe.getDate()-ne.getDay());const se=[];for(let ve=0;ve<42;ve++){const Ae=new Date(oe);Ae.setDate(oe.getDate()+ve),se.push(Ae)}return se},De=E=>o.filter(ie=>new Date(ie.date).toDateString()===E.toDateString()),mt=E=>L.find(ie=>ie.value===E)||L[0],pt=()=>{const E=Ie(),ie=new Date,ne=["January","February","March","April","May","June","July","August","September","October","November","December"];return e.jsxs(re,{sx:{p:3},children:[e.jsxs(d,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsxs(n,{variant:"h4",children:[ne[r.getMonth()]," ",r.getFullYear()]}),e.jsxs(d,{children:[e.jsx(he,{onClick:ze,children:e.jsx(la,{})}),e.jsx(he,{onClick:$e,children:e.jsx(ca,{})})]})]}),e.jsxs(i,{container:!0,spacing:1,children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(oe=>e.jsx(i,{item:!0,xs:!0,children:e.jsx(n,{variant:"subtitle2",align:"center",sx:{py:1,fontWeight:"bold"},children:oe})},oe)),E.map((oe,se)=>{const ve=oe.getMonth()===r.getMonth(),Ae=oe.toDateString()===ie.toDateString(),Ve=De(oe);return e.jsx(i,{item:!0,xs:!0,children:e.jsx(de,{sx:{minHeight:120,cursor:"pointer",opacity:ve?1:.3,border:Ae?2:1,borderColor:Ae?"primary.main":"divider","&:hover":{boxShadow:2}},onClick:()=>Be(oe),children:e.jsxs(ue,{sx:{p:1,"&:last-child":{pb:1}},children:[e.jsx(n,{variant:"body2",align:"center",sx:{fontWeight:Ae?"bold":"normal"},children:oe.getDate()}),e.jsxs(d,{mt:1,children:[Ve.slice(0,3).map((Dt,Gt)=>{const $t=mt(Dt.eventType);return e.jsx(q,{label:Dt.title,size:"small",color:$t.color,variant:"outlined",sx:{fontSize:"0.7rem",height:20,mb:.5,display:"block","& .MuiChip-label":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},Gt)}),Ve.length>3&&e.jsxs(n,{variant:"caption",color:"text.secondary",children:["+",Ve.length-3," more"]})]})]})})},se)})]})]})},tt=()=>e.jsxs(Fe,{open:w,onClose:()=>v(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(Re,{children:e.jsxs(d,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(nt,{}),"Create New Event"]})}),e.jsx(Me,{children:e.jsxs(i,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(i,{item:!0,xs:12,children:e.jsx(A,{fullWidth:!0,label:"Event Title",value:C.title,onChange:E=>_({...C,title:E.target.value})})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsxs(X,{fullWidth:!0,children:[e.jsx(K,{children:"Event Type"}),e.jsx(J,{value:C.eventType,onChange:E=>_({...C,eventType:E.target.value}),children:L.map(E=>e.jsx(U,{value:E.value,children:e.jsxs(d,{display:"flex",alignItems:"center",gap:1,children:[E.icon,E.label]})},E.value))})]})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(A,{fullWidth:!0,label:"Date",type:"date",value:C.date,onChange:E=>_({...C,date:E.target.value}),InputLabelProps:{shrink:!0}})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(A,{fullWidth:!0,label:"Start Time",type:"time",value:C.startTime,onChange:E=>_({...C,startTime:E.target.value}),InputLabelProps:{shrink:!0}})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(A,{fullWidth:!0,label:"End Time",type:"time",value:C.endTime,onChange:E=>_({...C,endTime:E.target.value}),InputLabelProps:{shrink:!0}})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(A,{fullWidth:!0,label:"Location",value:C.location,onChange:E=>_({...C,location:E.target.value})})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(A,{fullWidth:!0,multiline:!0,rows:3,label:"Description",value:C.description,onChange:E=>_({...C,description:E.target.value})})})]})}),e.jsxs(Oe,{children:[e.jsx(M,{onClick:()=>v(!1),children:"Cancel"}),e.jsx(M,{onClick:et,variant:"contained",disabled:!C.title||N,children:"Create Event"})]})]}),gt=()=>e.jsxs(Fe,{open:P,onClose:()=>k(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(Re,{children:e.jsxs(d,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(Pt,{}),"Create Trial & Send Invitations"]})}),e.jsx(Me,{children:e.jsxs(i,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(i,{item:!0,xs:12,children:e.jsx(A,{fullWidth:!0,label:"Trial Title",value:B.title,onChange:E=>te({...B,title:E.target.value})})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(A,{fullWidth:!0,label:"Date",type:"date",value:B.date,onChange:E=>te({...B,date:E.target.value}),InputLabelProps:{shrink:!0}})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsxs(X,{fullWidth:!0,children:[e.jsx(K,{children:"Age Group"}),e.jsx(J,{value:B.ageGroup,onChange:E=>te({...B,ageGroup:E.target.value}),children:z.map(E=>e.jsx(U,{value:E,children:E},E))})]})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(A,{fullWidth:!0,label:"Start Time",type:"time",value:B.startTime,onChange:E=>te({...B,startTime:E.target.value}),InputLabelProps:{shrink:!0}})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(A,{fullWidth:!0,label:"End Time",type:"time",value:B.endTime,onChange:E=>te({...B,endTime:E.target.value}),InputLabelProps:{shrink:!0}})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(A,{fullWidth:!0,label:"Location",value:B.location,onChange:E=>te({...B,location:E.target.value})})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(A,{fullWidth:!0,label:"Max Participants",type:"number",value:B.maxParticipants,onChange:E=>te({...B,maxParticipants:parseInt(E.target.value)})})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsxs(X,{fullWidth:!0,children:[e.jsx(K,{children:"Positions Needed"}),e.jsx(J,{multiple:!0,value:B.positions,onChange:E=>te({...B,positions:E.target.value}),renderValue:E=>e.jsx(d,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:E.map(ie=>e.jsx(q,{label:ie,size:"small"},ie))}),children:D.map(E=>e.jsx(U,{value:E,children:E},E))})]})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(A,{fullWidth:!0,multiline:!0,rows:3,label:"Description",value:B.description,onChange:E=>te({...B,description:E.target.value})})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(A,{fullWidth:!0,multiline:!0,rows:2,label:"Requirements (Optional)",value:B.requirements,onChange:E=>te({...B,requirements:E.target.value}),placeholder:"e.g., Bring boots, water bottle, previous experience preferred..."})})]})}),e.jsxs(Oe,{children:[e.jsx(M,{onClick:()=>k(!1),children:"Cancel"}),e.jsx(M,{onClick:xt,variant:"contained",disabled:!B.title||N,children:"Create Trial & Send Invites"})]})]});return N&&o.length===0?e.jsx(d,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:e.jsx(n,{children:"Loading calendar..."})}):e.jsxs(d,{children:[e.jsxs(re,{sx:{p:2,mb:2},children:[e.jsxs(d,{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:2,children:[e.jsxs(n,{variant:"h5",sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(dr,{}),"Team Calendar"]}),e.jsxs(d,{display:"flex",alignItems:"center",gap:2,children:[e.jsxs(X,{size:"small",sx:{minWidth:120},children:[e.jsx(K,{children:"View"}),e.jsxs(J,{value:j,onChange:E=>u(E.target.value),label:"View",children:[e.jsx(U,{value:"month",children:"Month"}),e.jsx(U,{value:"week",children:"Week"}),e.jsx(U,{value:"agenda",children:"Agenda"})]})]}),e.jsx(qe,{control:e.jsx(Ye,{checked:F,onChange:E=>b(E.target.checked),size:"small"}),label:"Weather"}),e.jsx(he,{onClick:()=>m(!0),color:"primary",title:"Calendar Integration Settings",children:e.jsx(ur,{})})]})]}),p.length>0&&e.jsxs(d,{mt:2,children:[e.jsx(n,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Connected Calendars:"}),e.jsx(d,{display:"flex",gap:1,flexWrap:"wrap",children:p.map(E=>e.jsx(q,{size:"small",label:`${E.provider} - ${E.accountEmail}`,color:E.isActive?"success":"default",icon:E.provider==="google"?e.jsx(nr,{}):e.jsx(ar,{})},E.id))})]}),x.length>0&&e.jsxs(G,{severity:"warning",sx:{mt:2},children:[e.jsx(Vr,{children:"Schedule Conflicts Detected"}),x.length," conflict",x.length>1?"s":""," found in your calendar.",e.jsx(M,{size:"small",sx:{ml:1},onClick:()=>O(!0),children:"View Details"})]})]}),H&&e.jsx(G,{severity:"error",sx:{mb:2},onClose:()=>T(""),children:H}),pt(),t?.role==="Coach"&&e.jsx(xr,{color:"primary",sx:{position:"fixed",bottom:16,right:16},onClick:E=>g(E.currentTarget),children:e.jsx(ht,{})}),e.jsxs(Xt,{anchorEl:R,open:!!R,onClose:()=>g(null),children:[e.jsxs(U,{onClick:()=>{v(!0),g(null)},children:[e.jsx(nt,{sx:{mr:1}}),"Add Training/Match"]}),e.jsxs(U,{onClick:()=>{k(!0),g(null)},children:[e.jsx(Pt,{sx:{mr:1}}),"Create Trial"]})]}),tt(),gt(),e.jsx(Fe,{open:I,onClose:()=>m(!1),maxWidth:"lg",fullWidth:!0,children:e.jsx(Ds,{onClose:()=>m(!1)})}),e.jsx(Js,{open:W,onClose:()=>f(!1),onSave:async E=>{f(!1)},mode:"create"}),e.jsxs(Fe,{open:S,onClose:()=>O(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(Re,{children:"Schedule Conflicts"}),e.jsx(Me,{children:x.length===0?e.jsx(n,{children:"No conflicts detected."}):x.map((E,ie)=>e.jsxs(re,{sx:{p:2,mb:2,border:"1px solid",borderColor:"warning.main"},children:[e.jsxs(n,{variant:"h6",color:"warning.main",gutterBottom:!0,children:["Conflict #",ie+1]}),e.jsxs(n,{variant:"body2",gutterBottom:!0,children:[e.jsx("strong",{children:"Event:"})," ",E.eventId]}),e.jsxs(n,{variant:"body2",gutterBottom:!0,children:[e.jsx("strong",{children:"Conflicts:"})," ",E.conflictingEvents.map(ne=>ne.title).join(", ")]}),e.jsxs(n,{variant:"body2",gutterBottom:!0,children:[e.jsx("strong",{children:"Type:"})," ",E.conflictingEvents[0]?.type||"Unknown"]}),e.jsxs(n,{variant:"body2",gutterBottom:!0,children:[e.jsx("strong",{children:"Severity:"})," ",E.conflictingEvents[0]?.severity||"Unknown"]}),e.jsxs(n,{variant:"body2",gutterBottom:!0,children:[e.jsx("strong",{children:"Suggestions:"})," ",E.suggestions.map(ne=>ne.reason).join(", ")]}),e.jsx(d,{mt:1,children:e.jsx(M,{size:"small",variant:"outlined",color:"primary",onClick:()=>{},children:"Resolve Conflict"})})]},ie))}),e.jsx(Oe,{children:e.jsx(M,{onClick:()=>O(!1),children:"Close"})})]})]})};function Qt(t){const{children:r,value:a,index:o,...l}=t;return e.jsx("div",{role:"tabpanel",hidden:a!==o,id:`calendar-tabpanel-${o}`,"aria-labelledby":`calendar-tab-${o}`,...l,children:a===o&&e.jsx(d,{sx:{p:3},children:r})})}const Xs=()=>{const{user:t}=le(),[r,a]=h.useState(0),[o,l]=h.useState([]),[x,s]=h.useState(!1),[j,u]=h.useState(""),[w,v]=h.useState(""),P=(f,S)=>{a(S)};h.useEffect(()=>{t?.role==="Player"&&r===2&&k()},[t,r]);const k=async()=>{try{s(!0),u("");const f=await ir.getTrialInvitations();l(f.invitations||[])}catch(f){console.error("Error loading trial invitations:",f),u("Failed to load trial invitations")}finally{s(!1)}},I=async(f,S)=>{try{u(""),await ir.respondToTrial(f,S),v(`Trial invitation ${S} successfully!`),l(O=>O.map(R=>R.id===f?{...R,status:S}:R))}catch(O){console.error("Error responding to trial:",O),u(`Failed to ${S} trial invitation`)}},m=[{id:1,title:"Team Training",type:"training",date:"2025-08-05",time:"18:00",location:"Local Sports Ground"},{id:2,title:"Match vs City FC",type:"match",date:"2025-08-08",time:"15:00",location:"City Stadium"},{id:3,title:"U18 Trial Session",type:"trial",date:"2025-08-12",time:"14:00",location:"Training Complex"}],p=f=>{switch(f){case"training":return"primary";case"match":return"secondary";case"trial":return"success";default:return"default"}},F=f=>{switch(f){case"training":return e.jsx(nt,{});case"match":return e.jsx(nt,{});case"trial":return e.jsx(Pt,{});default:return e.jsx(nt,{})}},b=()=>e.jsxs(d,{children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Trial Invitations"}),j&&e.jsx(G,{severity:"error",sx:{mb:2},onClose:()=>u(""),children:j}),w&&e.jsx(G,{severity:"success",sx:{mb:2},onClose:()=>v(""),children:w}),x?e.jsx(n,{children:"Loading trial invitations..."}):o.length===0?e.jsx(G,{severity:"info",children:"No trial invitations at the moment. Keep checking back for new opportunities!"}):e.jsx(ct,{children:o.map(f=>e.jsx(ke,{sx:{mb:2},children:e.jsxs(re,{sx:{width:"100%",p:2},children:[e.jsxs(d,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2,children:[e.jsxs(d,{children:[e.jsx(n,{variant:"h6",children:f.trial?.title||f.trialTitle}),e.jsxs(n,{variant:"body2",color:"text.secondary",children:["Invited by: ",f.coach?.firstName," ",f.coach?.lastName]})]}),e.jsx(q,{label:f.status,color:f.status==="accepted"?"success":f.status==="declined"?"error":"warning",variant:"outlined"})]}),e.jsxs(i,{container:!0,spacing:2,mb:2,children:[e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsxs(d,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(Fr,{fontSize:"small"}),e.jsxs(n,{variant:"body2",children:[new Date(f.trial?.date||f.date).toLocaleDateString()," at ",f.trial?.startTime||f.startTime]})]})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsxs(d,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(it,{fontSize:"small"}),e.jsx(n,{variant:"body2",children:f.trial?.location||f.location})]})})]}),e.jsxs(d,{mb:2,children:[e.jsxs(n,{variant:"body2",sx:{fontWeight:"medium"},children:["Positions: ",Array.isArray(f.trial?.positions)?f.trial.positions.join(", "):f.positions||"Not specified"]}),e.jsxs(n,{variant:"body2",sx:{mt:1},children:["Age Group: ",f.trial?.ageGroup||f.ageGroup]}),(f.trial?.description||f.description)&&e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mt:1},children:f.trial?.description||f.description}),f.message&&e.jsxs(n,{variant:"body2",color:"text.secondary",sx:{mt:1,fontStyle:"italic"},children:["Coach's message: ",f.message]})]}),f.status==="pending"&&e.jsxs(d,{display:"flex",gap:1,children:[e.jsx(M,{variant:"contained",color:"success",startIcon:e.jsx(Bt,{}),size:"small",onClick:()=>I(f.id,"accepted"),children:"Accept"}),e.jsx(M,{variant:"outlined",color:"error",startIcon:e.jsx(ha,{}),size:"small",onClick:()=>I(f.id,"declined"),children:"Decline"})]})]})},f.id))})]}),W=()=>e.jsxs(d,{children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Upcoming Events"}),e.jsx(i,{container:!0,spacing:2,children:m.map(f=>e.jsx(i,{item:!0,xs:12,sm:6,md:4,children:e.jsx(de,{children:e.jsxs(ue,{children:[e.jsxs(d,{display:"flex",alignItems:"center",gap:1,mb:1,children:[F(f.type),e.jsx(q,{label:f.type,size:"small",color:p(f.type),variant:"outlined"})]}),e.jsx(n,{variant:"h6",gutterBottom:!0,children:f.title}),e.jsxs(d,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(Fr,{fontSize:"small"}),e.jsxs(n,{variant:"body2",children:[new Date(f.date).toLocaleDateString()," at ",f.time]})]}),e.jsxs(d,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(it,{fontSize:"small"}),e.jsx(n,{variant:"body2",children:f.location})]})]})})},f.id))})]});return e.jsxs(ae,{maxWidth:"xl",sx:{mt:4,mb:4},children:[e.jsx(n,{variant:"h4",gutterBottom:!0,children:"Calendar & Events"}),e.jsx(re,{sx:{width:"100%",mb:3},children:e.jsxs(Ut,{value:r,onChange:P,indicatorColor:"primary",textColor:"primary",variant:"fullWidth",children:[e.jsx(Le,{icon:e.jsx(ua,{}),label:"Calendar"}),e.jsx(Le,{icon:e.jsx(nt,{}),label:"Upcoming Events"}),t?.role==="Player"&&e.jsx(Le,{icon:e.jsx(Pt,{}),label:"Trial Invitations"})]})}),e.jsx(Qt,{value:r,index:0,children:e.jsx(Qs,{})}),e.jsx(Qt,{value:r,index:1,children:W()}),t?.role==="Player"&&e.jsx(Qt,{value:r,index:2,children:b()})]})},Ks="modulepreload",Zs=function(t){return"/"+t},zr={},pe=function(r,a,o){let l=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),j=s?.nonce||s?.getAttribute("nonce");l=Promise.allSettled(a.map(u=>{if(u=Zs(u),u in zr)return;zr[u]=!0;const w=u.endsWith(".css"),v=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${v}`))return;const P=document.createElement("link");if(P.rel=w?"stylesheet":Ks,w||(P.as="script"),P.crossOrigin="",P.href=u,j&&P.setAttribute("nonce",j),document.head.appendChild(P),w)return new Promise((k,I)=>{P.addEventListener("load",k),P.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${u}`)))})}))}function x(s){const j=new Event("vite:preloadError",{cancelable:!0});if(j.payload=s,window.dispatchEvent(j),!j.defaultPrevented)throw s}return l.then(s=>{for(const j of s||[])j.status==="rejected"&&x(j.reason);return r().catch(x)})},ge=(t,r)=>{const a=h.lazy(t);return a.displayName=r||"LazyComponent",a},ei={MapsPage:ge(()=>pe(()=>import("./MapsPage-BJmH4Df2.js"),__vite__mapDeps([0,1,2,3,4,5])).then(t=>({default:t.default})),"MapsPage"),PerformanceAnalyticsPage:ge(()=>pe(()=>import("./PerformanceAnalyticsPage-CFYdIe8C.js"),__vite__mapDeps([6,1,2,7,5,8])),"PerformanceAnalyticsPage"),EnhancedSearchPage:ge(()=>pe(()=>import("./EnhancedSearchPage-D3n5ldCI.js"),__vite__mapDeps([9,1,2,5])),"EnhancedSearchPage"),AdminPage:ge(()=>pe(()=>import("./AdminPage-DKKjqL0i.js"),__vite__mapDeps([10,1,2,5])),"AdminPage"),TeamProfilePage:ge(()=>pe(()=>import("./TeamProfilePage-C9_P2-ss.js"),__vite__mapDeps([11,1,2,5])),"TeamProfilePage"),TeamRosterPage:ge(()=>pe(()=>import("./TeamRosterPage-CbOaqGoQ.js"),__vite__mapDeps([12,1,2,13,14,5])),"TeamRosterPage"),MatchCompletionsPage:ge(()=>pe(()=>import("./MatchCompletionsPage-qyrMP6g2.js"),__vite__mapDeps([15,1,2,5])),"MatchCompletionsPage"),MessagesPage:ge(()=>pe(()=>import("./MessagesPage-DWWztuwF.js"),__vite__mapDeps([16,1,2,5,14])),"MessagesPage"),SuccessStoriesPage:ge(()=>pe(()=>import("./SuccessStoriesPage-u5SIrQHZ.js"),__vite__mapDeps([17,1,2])),"SuccessStoriesPage"),EnhancedDashboardPage:ge(()=>pe(()=>import("./EnhancedDashboardPage-DnZy7lrL.js"),__vite__mapDeps([18,1,2,8,5,7])),"EnhancedDashboardPage"),AlertPreferencesPage:ge(()=>pe(()=>import("./AlertPreferencesPage-Bf2i6JTB.js"),__vite__mapDeps([19,1,2,5])),"AlertPreferencesPage"),RecommendationsPage:ge(()=>pe(()=>import("./RecommendationsPage-CXhp_HdB.js"),__vite__mapDeps([20,1,2,8,5,7])),"RecommendationsPage"),ChildPlayerAvailabilityPage:ge(()=>pe(()=>import("./ChildPlayerAvailabilityPage-CIPKu0fq.js"),__vite__mapDeps([21,1,2,5])),"ChildPlayerAvailabilityPage"),ChildrenManagementPage:ge(()=>pe(()=>import("./ChildrenManagementPage-yOR6xgrD.js"),__vite__mapDeps([22,1,2,5])),"ChildrenManagementPage"),TrainingInvitations:ge(()=>pe(()=>import("./TrainingInvitations-DIwDjm-l.js"),__vite__mapDeps([23,1,2,5])),"TrainingInvitations"),TrialManagement:ge(()=>pe(()=>import("./TrialManagement-M3CJhbeI.js"),__vite__mapDeps([24,1,2,5,13,14])),"TrialManagement")},{MapsPage:ti,PerformanceAnalyticsPage:ri,EnhancedSearchPage:ni,AdminPage:ai,TeamProfilePage:si,TeamRosterPage:ii,MatchCompletionsPage:oi,MessagesPage:li,SuccessStoriesPage:ci,EnhancedDashboardPage:di,AlertPreferencesPage:ui,RecommendationsPage:hi,ChildPlayerAvailabilityPage:xi,ChildrenManagementPage:mi,TrainingInvitations:pi,TrialManagement:gi}=ei,ji=()=>e.jsx(Xa,{text:"Loading page..."});function fi(){return e.jsx(rs,{children:e.jsxs(xa,{theme:Ka,children:[e.jsx(ma,{}),e.jsx(Pa,{children:e.jsxs(fa,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[e.jsx(Za,{}),e.jsx(es,{}),e.jsx(ns,{}),e.jsx(ts,{useSpeedDial:!0,position:{bottom:100,right:16}}),e.jsx(h.Suspense,{fallback:e.jsx(ji,{}),children:e.jsxs(ya,{children:[e.jsx(Z,{path:"/",element:e.jsx(as,{})}),e.jsx(Z,{path:"/about",element:e.jsx(ss,{})}),e.jsx(Z,{path:"/login",element:e.jsx(ee,{requireAuth:!1,children:e.jsx(os,{})})}),e.jsx(Z,{path:"/register",element:e.jsx(ee,{requireAuth:!1,children:e.jsx(ls,{})})}),e.jsx(Z,{path:"/email-verification-pending",element:e.jsx(ee,{requireAuth:!1,children:e.jsx(cs,{})})}),e.jsx(Z,{path:"/verify-email/:token",element:e.jsx(ee,{requireAuth:!1,children:e.jsx(ds,{})})}),e.jsx(Z,{path:"/forgot-password",element:e.jsx(ee,{requireAuth:!1,children:e.jsx(us,{})})}),e.jsx(Z,{path:"/reset-password/:token",element:e.jsx(ee,{requireAuth:!1,children:e.jsx(hs,{})})}),e.jsx(Z,{path:"/dashboard",element:e.jsx(ee,{children:e.jsx(xs,{})})}),e.jsx(Z,{path:"/post-advert",element:e.jsx(ee,{children:e.jsx(js,{})})}),e.jsx(Z,{path:"/search",element:e.jsx(ee,{children:e.jsx(Cs,{})})}),e.jsx(Z,{path:"/profile",element:e.jsx(ee,{children:e.jsx(ws,{})})}),e.jsx(Z,{path:"/admin",element:e.jsx(ee,{children:e.jsx(ai,{})})}),e.jsx(Z,{path:"/admin/about",element:e.jsx(ee,{children:e.jsx(Ss,{})})}),e.jsx(Z,{path:"/calendar",element:e.jsx(ee,{children:e.jsx(Xs,{})})}),e.jsx(Z,{path:"/maps",element:e.jsx(ee,{children:e.jsx(ti,{})})}),e.jsx(Z,{path:"/team-roster",element:e.jsx(ee,{children:e.jsx(ii,{})})}),e.jsx(Z,{path:"/team-profile",element:e.jsx(ee,{children:e.jsx(si,{})})}),e.jsx(Z,{path:"/children",element:e.jsx(ee,{children:e.jsx(mi,{})})}),e.jsx(Z,{path:"/child-player-availability",element:e.jsx(ee,{children:e.jsx(xi,{})})}),e.jsx(Z,{path:"/match-completions",element:e.jsx(ee,{children:e.jsx(oi,{})})}),e.jsx(Z,{path:"/success-stories",element:e.jsx(ee,{children:e.jsx(ci,{})})}),e.jsx(Z,{path:"/performance-analytics",element:e.jsx(ee,{children:e.jsx(ri,{})})}),e.jsx(Z,{path:"/messages",element:e.jsx(ee,{children:e.jsx(li,{})})}),e.jsx(Z,{path:"/alert-preferences",element:e.jsx(ee,{children:e.jsx(ui,{})})}),e.jsx(Z,{path:"/recommendations",element:e.jsx(ee,{children:e.jsx(hi,{})})}),e.jsx(Z,{path:"/enhanced-search",element:e.jsx(ee,{children:e.jsx(ni,{})})}),e.jsx(Z,{path:"/enhanced-dashboard",element:e.jsx(ee,{children:e.jsx(di,{})})}),e.jsx(Z,{path:"/training-invitations",element:e.jsx(ee,{children:e.jsx(pi,{})})}),e.jsx(Z,{path:"/trial-management",element:e.jsx(ee,{children:e.jsx(gi,{})})})]})})]})})]})})}or.createRoot(document.getElementById("root")).render(e.jsx(fi,{}));
