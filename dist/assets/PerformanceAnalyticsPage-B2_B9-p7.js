import{j as e,b8 as U,B as t,T as s,G as i,C as n,a as l,t as q,d as o,V as z,P as L,bV as M,al as V,aC as T,ag as W,z as v}from"./mui-vendor-JAsu9f5S.js";import{u as B,r as d}from"./react-vendor-BTglNIF_.js";import{L as D,B as I,C as E,a as R,b as F,P as _,c as G,d as J,p as N,e as O,f as Z,i as H}from"./charts-vendor-C2MxfCQw.js";import{u as K,a as m}from"./admin-features-R-myf6Sn.js";E.register(R,F,_,G,J,N,O,Z,H);const ee=()=>{const{user:h}=K(),g=B(),[w,f]=d.useState(!0),[c,j]=d.useState({totalVisits:0,uniqueVisitors:0,newUsers:0,searchesPerformed:0,successfulMatches:0,activeListings:0}),[x,b]=d.useState([]),[p,y]=d.useState([]);d.useEffect(()=>{if(h&&h.role!=="Admin"){g("/dashboard");return}h?.role==="Admin"&&C()},[h,g]);const C=async()=>{try{f(!0);const[r,a,u]=await Promise.all([m.get("/analytics/site-stats",{headers:{}}),m.get("/analytics/weekly-traffic",{headers:{}}),m.get("/analytics/monthly-matches",{headers:{}})]);j(r.data),b(a.data),y(u.data)}catch(r){console.error("Failed to load analytics:",r);const a={totalVisits:12547,uniqueVisitors:8923,newUsers:342,searchesPerformed:5634,successfulMatches:156,activeListings:278},u=[{date:"Mon",visits:450,uniqueUsers:320},{date:"Tue",visits:520,uniqueUsers:380},{date:"Wed",visits:490,uniqueUsers:350},{date:"Thu",visits:610,uniqueUsers:420},{date:"Fri",visits:580,uniqueUsers:410},{date:"Sat",visits:890,uniqueUsers:650},{date:"Sun",visits:820,uniqueUsers:590}],A=[{month:"Jan",matches:12},{month:"Feb",matches:18},{month:"Mar",matches:22},{month:"Apr",matches:28},{month:"May",matches:35},{month:"Jun",matches:41}];j(a),b(u),y(A)}finally{f(!1)}},S=()=>w?e.jsx(i,{container:!0,spacing:3,children:[1,2,3,4,5,6].map(r=>e.jsx(i,{item:!0,xs:12,sm:6,md:4,children:e.jsx(n,{children:e.jsx(l,{children:e.jsx(q,{variant:"rectangular",height:100})})})},r))}):e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{item:!0,xs:12,sm:6,md:4,children:e.jsx(n,{sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:e.jsx(l,{sx:{color:"white"},children:e.jsxs(t,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(t,{children:[e.jsx(s,{variant:"h3",fontWeight:"bold",children:c.totalVisits.toLocaleString()}),e.jsx(s,{variant:"subtitle1",sx:{opacity:.9,mt:1},children:"Total Site Visits"}),e.jsx(o,{label:"+12% this week",size:"small",sx:{mt:1,bgcolor:"rgba(255,255,255,0.2)",color:"white"}})]}),e.jsx(z,{sx:{fontSize:56,opacity:.7}})]})})})}),e.jsx(i,{item:!0,xs:12,sm:6,md:4,children:e.jsx(n,{sx:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"},children:e.jsx(l,{sx:{color:"white"},children:e.jsxs(t,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(t,{children:[e.jsx(s,{variant:"h3",fontWeight:"bold",children:c.uniqueVisitors.toLocaleString()}),e.jsx(s,{variant:"subtitle1",sx:{opacity:.9,mt:1},children:"Unique Visitors"}),e.jsx(o,{label:"+8% this week",size:"small",sx:{mt:1,bgcolor:"rgba(255,255,255,0.2)",color:"white"}})]}),e.jsx(L,{sx:{fontSize:56,opacity:.7}})]})})})}),e.jsx(i,{item:!0,xs:12,sm:6,md:4,children:e.jsx(n,{sx:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"},children:e.jsx(l,{sx:{color:"white"},children:e.jsxs(t,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(t,{children:[e.jsx(s,{variant:"h3",fontWeight:"bold",children:c.successfulMatches}),e.jsx(s,{variant:"subtitle1",sx:{opacity:.9,mt:1},children:"Successful Matches"}),e.jsx(o,{label:"This month",size:"small",sx:{mt:1,bgcolor:"rgba(255,255,255,0.2)",color:"white"}})]}),e.jsx(M,{sx:{fontSize:56,opacity:.7}})]})})})}),e.jsx(i,{item:!0,xs:12,sm:6,md:4,children:e.jsx(n,{sx:{background:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)"},children:e.jsx(l,{sx:{color:"white"},children:e.jsxs(t,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(t,{children:[e.jsx(s,{variant:"h3",fontWeight:"bold",children:c.newUsers}),e.jsx(s,{variant:"subtitle1",sx:{opacity:.9,mt:1},children:"New Users"}),e.jsx(o,{label:"Last 30 days",size:"small",sx:{mt:1,bgcolor:"rgba(255,255,255,0.2)",color:"white"}})]}),e.jsx(V,{sx:{fontSize:56,opacity:.7}})]})})})}),e.jsx(i,{item:!0,xs:12,sm:6,md:4,children:e.jsx(n,{sx:{background:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)"},children:e.jsx(l,{sx:{color:"white"},children:e.jsxs(t,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(t,{children:[e.jsx(s,{variant:"h3",fontWeight:"bold",children:c.searchesPerformed.toLocaleString()}),e.jsx(s,{variant:"subtitle1",sx:{opacity:.9,mt:1},children:"Searches Performed"}),e.jsx(o,{label:"All time",size:"small",sx:{mt:1,bgcolor:"rgba(255,255,255,0.2)",color:"white"}})]}),e.jsx(T,{sx:{fontSize:56,opacity:.7}})]})})})}),e.jsx(i,{item:!0,xs:12,sm:6,md:4,children:e.jsx(n,{sx:{background:"linear-gradient(135deg, #30cfd0 0%, #330867 100%)"},children:e.jsx(l,{sx:{color:"white"},children:e.jsxs(t,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(t,{children:[e.jsx(s,{variant:"h3",fontWeight:"bold",children:c.activeListings}),e.jsx(s,{variant:"subtitle1",sx:{opacity:.9,mt:1},children:"Active Listings"}),e.jsx(o,{label:"Currently open",size:"small",sx:{mt:1,bgcolor:"rgba(255,255,255,0.2)",color:"white"}})]}),e.jsx(W,{sx:{fontSize:56,opacity:.7}})]})})})})]}),k=()=>{const r={labels:x.map(a=>a.date),datasets:[{label:"Total Visits",data:x.map(a=>a.visits),borderColor:"#667eea",backgroundColor:"rgba(102, 126, 234, 0.1)",fill:!0,tension:.4},{label:"Unique Visitors",data:x.map(a=>a.uniqueUsers),borderColor:"#764ba2",backgroundColor:"rgba(118, 75, 162, 0.1)",fill:!0,tension:.4}]};return e.jsxs(v,{sx:{p:3},children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Weekly Traffic Overview"}),e.jsx(t,{height:300,children:e.jsx(D,{data:r,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}},scales:{y:{beginAtZero:!0}}}})})]})},P=()=>{const r={labels:p.map(a=>a.month),datasets:[{label:"Successful Matches",data:p.map(a=>a.matches),backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:2}]};return e.jsxs(v,{sx:{p:3},children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Monthly Successful Matches"}),e.jsx(s,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Players successfully matched with teams"}),e.jsx(t,{height:300,children:e.jsx(I,{data:r,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}}})})]})};return e.jsxs(U,{maxWidth:"xl",sx:{py:4},children:[e.jsxs(t,{mb:4,children:[e.jsx(s,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:"Site Performance Analytics"}),e.jsx(s,{variant:"body1",color:"text.secondary",children:"Overview of platform traffic, user engagement, and successful matches"})]}),e.jsx(t,{mb:4,children:S()}),e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{item:!0,xs:12,md:6,children:k()}),e.jsx(i,{item:!0,xs:12,md:6,children:P()})]})]})};export{ee as default};
